void 0===wFORMS.behaviors.validation.messages&&(wFORMS.behaviors.validation.messages={}),function(){var e,a;for(e in a={oneRequired:"This section is required.",isRequired:"This field is required.",isAlpha:"The text must use alphabetic characters only (a-z, A-Z). Numbers are not allowed.",isEmail:"This does not appear to be a valid email address.",isInteger:"Please enter a number (without decimals).",isFloat:"Please enter a number (e.g. 1.9).",isAlphanum:"Please use alpha-numeric characters only [a-z 0-9].",isDate:"This does not appear to be a valid date.",isDateTime:"This does not appear to be a valid date/time.",isTime:"This does not appear to be a valid time.",isPhone:"Please enter a valid phone number.",isCustom:"Please enter a valid value.",notification_0:"The form is not complete and has not been submitted yet. There is %% problem with your submission.",notification:"The form is not complete and has not been submitted yet. There are %% problems with your submission.",isPasswordStrong:"Please choose a more secure password. Passwords must contain 8 or more characters, with at least 1 letter (a to z), 1 number (0 to 9), and 1 symbol (like '%', '$' or '!').",isPasswordMedium:"Please choose a more secure password. Passwords must contain 4 or more characters, with at least 1 letter (a to z) and 1 number (0 to 9).",isPasswordWeak:"Your password cannot be empty.",isPasswordConfirmed:"Your password and confirmation field did not match.",rangeNumber:{max:"The value must be smaller than the upper bound %1.",min:"The value must be greater than the lower bound %1."}})wFORMS.behaviors.validation.messages[e]=a[e]}(),wFORMS.behaviors.repeat.MESSAGES={ADD_CAPTION:"Add another response",ADD_TITLE:"Will duplicate this question or section.",REMOVE_CAPTION:"Remove",REMOVE_TITLE:"Will remove this question or section"},function(){var e,a;for(e in a={CAPTION_NEXT:"Next Page",CAPTION_PREVIOUS:"Previous Page",CAPTION_UNLOAD:"Any data entered on ANY PAGE of this form will be LOST",NAV_LABEL:"Page: ",TAB_LABEL:"Page "})wFORMS.behaviors.paging.MESSAGES[e]=a[e]}(),wFORMS.behaviors.validation.instance.prototype.validateAlpha=function(e,a){var s=/^[a-zA-Z\s]+$/;return this.isEmpty(a)||s.test(a)},wFORMS.behaviors.validation.instance.prototype.validateAlphanum=function(e,a){var s=/^[\u0030-\u0039a-zA-Z\s]+$/;return this.isEmpty(a)||s.test(a)},wFORMS.helpers.calendar||(wFORMS.helpers.calendar={}),wFORMS.helpers.calendar.locale||(wFORMS.helpers.calendar.locale={});var cfg=wFORMS.helpers.calendar.locale;cfg.TITLE="Select a date",cfg.START_WEEKDAY=1,cfg.MONTHS_LONG=["January","February","March","April","May","June","July","August","September","October","November","December"],cfg.WEEKDAYS_SHORT=["Su","Mo","Tu","We","Th","Fr","Sa"],cfg.MDY_DAY_POSITION=1,cfg.MDY_MONTH_POSITION=2,cfg.MDY_YEAR_POSITION=3,cfg.DATE_FIELD_DELIMITER="/";
var base2={name:"base2",version:"1.0",exports:"Base,Package,Abstract,Module,Enumerable,Map,Collection,RegGrp,Undefined,Null,This,True,False,assignID,detect,global",namespace:""};new function(_no_shrink_){function assignID(e){return e.base2ID||(e.base2ID="b2_"+_counter++),e.base2ID}function _extendModule(e,t){var n=e.prototype,i=e.toString().slice(1,-1);for(var r in t){var a=t[r],o="";"@"==r.charAt(0)?detect(r.slice(1))&&_extendModule(e,a):n[r]||(r==r.toUpperCase()?o="var "+r+"="+i+"."+r+";":"function"==typeof a&&a.call&&(o="var "+r+"=base2.lang.bind('"+r+"',"+i+");",n[r]=_moduleMethod(e,r),n[r]._module=e),-1==e.namespace.indexOf(o)&&(e.namespace+=o))}}function _staticModuleMethod(e,t){return function(){return e[t].apply(e,arguments)}}function _moduleMethod(e,t){return function(){var n=_slice.call(arguments);return n.unshift(this),e[t].apply(e,n)}}function assert(e,t,n){if(!e)throw new(n||Error)(t||"Assertion failed.")}function assertArity(e,t,n){if(null==t&&(t=e.callee.length),e.length<t)throw new SyntaxError(n||"Not enough arguments.")}function assertType(e,t,n){if(t&&("function"==typeof t?!instanceOf(e,t):typeOf(e)!=t))throw new TypeError(n||"Invalid type.")}function copy(e){var t={};for(var n in e)t[n]=e[n];return t}function pcopy(e){return _dummy.prototype=e,new _dummy}function _dummy(){}function base(e,t){return e.base.apply(e,t)}function extend(e,t){if(e&&t){if(arguments.length>2){var n=t;t={},t[n]=arguments[2]}var i=global["function"==typeof t?"Function":"Object"].prototype;if(base2.__prototyping)for(var n,r=_HIDDEN.length;n=_HIDDEN[--r];){var a=t[n];a!=i[n]&&(_BASE.test(a)?_override(e,n,a):e[n]=a)}for(n in t)if(void 0===i[n]){var a=t[n];if("@"==n.charAt(0))detect(n.slice(1))&&extend(e,a);else{var o=e[n];o&&"function"==typeof a?a!=o&&(_BASE.test(a)?_override(e,n,a):(a.ancestor=o,e[n]=a)):e[n]=a}}}return e}function _ancestorOf(e,t){for(;t;){if(!t.ancestor)return!1;if((t=t.ancestor)==e)return!0}return!1}function _override(e,t,n){function i(){var e=this.base;this.base=a?a[t]:r;var i=n.apply(this,arguments);return this.base=e,i}var r=e[t],a=base2.__prototyping;a&&r!=a[t]&&(a=null),i.method=n,i.ancestor=r,e[t]=i,i.toString=K(n+"")}function forEach(e,t,n,i){if(null!=e){if(!i)if("function"==typeof e&&e.call)i=Function;else{if("function"==typeof e.forEach&&e.forEach!=arguments.callee)return void e.forEach(t,n);if("number"==typeof e.length)return void _Array_forEach(e,t,n)}_Function_forEach(i||Object,e,t,n)}}function _Array_forEach(e,t,n){null==e&&(e=global);var i,r=e.length||0;if("string"==typeof e)for(i=0;i<r;i++)t.call(n,e.charAt(i),i,e);else for(i=0;i<r;i++)i in e&&t.call(n,e[i],i,e)}function _Function_forEach(e,t,n,i){var r=function(){this.i=1};r.prototype={i:1};var a=0;for(var o in new r)a++;(_Function_forEach=a>1?function(e,t,n,i){var r={};for(var a in t)r[a]||void 0!==e.prototype[a]||(r[a]=!0,n.call(i,t[a],a,t))}:function(e,t,n,i){for(var r in t)void 0===e.prototype[r]&&n.call(i,t[r],r,t)})(e,t,n,i)}function instanceOf(e,t){if("function"!=typeof t)throw new TypeError("Invalid 'instanceOf' operand.");if(null==e)return!1;if(e.constructor==t)return!0;if(t.ancestorOf)return t.ancestorOf(e.constructor);if(e instanceof t)return!0;if(Base.ancestorOf==t.ancestorOf)return!1;if(Base.ancestorOf==e.constructor.ancestorOf)return t==Object;switch(t){case Array:return!("object"!=typeof e||!e.join||!e.splice);case Function:return"function"==typeOf(e);case RegExp:return"string"==typeof e.constructor.$1;case Date:return!!e.getTimezoneOffset;case String:case Number:case Boolean:return typeOf(e)==typeof t.prototype.valueOf();case Object:return!0}return!1}function typeOf(e){var t=typeof e;switch(t){case"object":return null==e?"null":void 0===e.constructor?_MSIE_NATIVE_FUNCTION.test(e)?"function":t:typeof e.constructor.prototype.valueOf();case"function":return"function"==typeof e.call?t:"object";default:return t}}function _createObject2(e,t,n,i){var r=Module.extend(),a=r.toString().slice(1,-1);forEach.csv(n,function(t){r[t]=unbind(e.prototype[t]),r.namespace+=format("var %1=%2.%1;",t,a)}),forEach(_slice.call(arguments,3),r.implement,r);var o=function(){return r(this.constructor==r?t.apply(null,arguments):arguments[0])};o.prototype=r.prototype;for(var s in r)"prototype"!=s&&e[s]&&(r[s]=e[s],delete r.prototype[s]),o[s]=r[s];return o.ancestor=Object,delete o.extend,o.namespace=o.namespace.replace(/(var (\w+)=)[^,;]+,([^\)]+)\)/g,"$1$3.$2"),o}function trim(e){return String(e).replace(_LTRIM,"").replace(_RTRIM,"")}function csv(e){return e?(e+"").split(/\s*,\s*/):[]}function format(e){var t=arguments;return(e+"").replace(new RegExp("%([1-"+(arguments.length-1)+"])","g"),function(e,n){return t[n]})}function match(e,t){return(e+"").match(t)||[]}function rescape(e){return(e+"").replace(_RESCAPE,"\\$1")}function I(e){return e}function II(e,t){return t}function K(e){return function(){return e}}function bind(e,t){var n="function"!=typeof e;if(arguments.length>2){var i=_slice.call(arguments,2);return function(){return(n?t[e]:e).apply(t,i.concat.apply(i,arguments))}}return function(){return(n?t[e]:e).apply(t,arguments)}}function compose(){var e=_slice.call(arguments);return function(){for(var t=e.length,n=e[--t].apply(this,arguments);t--;)n=e[t].call(this,n);return n}}function delegate(e,t){return function(){var n=_slice.call(arguments);return n.unshift(this),e.apply(t,n)}}function flip(e){return function(){return e.apply(this,Array2.swap(arguments,0,1))}}function not(e){return function(){return!e.apply(this,arguments)}}function partial(e){var t=_slice.call(arguments,1);return function(){for(var n=t.concat(),i=0,r=0;i<t.length&&r<arguments.length;)void 0===n[i]&&(n[i]=arguments[r++]),i++;for(;r<arguments.length;)n[i++]=arguments[r++];return Array2.contains(n,void 0)?(n.unshift(e),partial.apply(null,n)):e.apply(this,n)}}function unbind(e){return function(t){return e.apply(t,_slice.call(arguments,1))}}function detect(){var e=!!global.java;if(global.navigator){var t=/MSIE[\d.]+/g,n=document.createElement("span"),i=navigator.userAgent.replace(/([a-z])[\s\/](\d)/gi,"$1$2");i=i.replace(t,""),t.test(i)&&(i=i.match(t)[0]+" "+i.replace(t,"")),base2.userAgent=navigator.platform+" "+i.replace(/like \w+/gi,""),e&=navigator.javaEnabled()}var r={};return(detect=function(t){if(null==r[t]){var i=!1,a=t,o="!"==a.charAt(0);if(o&&(a=a.slice(1)),"("==a.charAt(0))try{i=new Function("element,jscript,java,global","return !!"+a)(n,NaN,e,global)}catch(e){}else i=new RegExp("("+a+")","i").test(base2.userAgent);r[t]=!!(o^i)}return r[t]})(arguments[0])}var Undefined=K(),Null=K(null),True=K(!0),False=K(!1),This=function(){return this},global=This(),base2=global.base2,_FORMAT=/%([1-9])/g,_LTRIM=/^\s\s*/,_RTRIM=/\s\s*$/,_RESCAPE=/([\/()[\]{}|*+-.,^$?\\])/g,_BASE=/try/.test(detect)?/\bbase\b/:/.*/,_HIDDEN=["constructor","toString","valueOf"],_MSIE_NATIVE_FUNCTION=detect("(jscript)")?new RegExp("^"+rescape(isNaN).replace(/isNaN/,"\\w+")+"$"):{test:False},_counter=1,_slice=Array.prototype.slice;_Function_forEach();var _subclass=function(e,t){function n(){if(!base2.__prototyping){if(this.constructor!=arguments.callee&&!this.__constructing)return extend(arguments[0],i);this.__constructing=!0,r.apply(this,arguments),delete this.__constructing}return this}base2.__prototyping=this.prototype;var i=new this;e&&extend(i,e),delete base2.__prototyping;var r=i.constructor;i.constructor=n;for(var a in Base)n[a]=this[a];return n.ancestor=this,n.base=Undefined,t&&extend(n,t),n.prototype=i,n.init&&n.init(),n["#implements"]=[],n["#implemented_by"]=[],n},Base=_subclass.call(Object,{constructor:function(){arguments.length>0&&this.extend(arguments[0])},base:function(){},extend:delegate(extend)},Base={ancestorOf:function(e){return _ancestorOf(this,e)},extend:_subclass,forEach:function(e,t,n){_Function_forEach(this,e,t,n)},implement:function(e){return"function"==typeof e&&(_ancestorOf(Base,e)&&(this["#implements"].push(e),e["#implemented_by"].push(this)),e=e.prototype),extend(this.prototype,e),this}}),Package=Base.extend({constructor:function(e,t){function n(e){e=e.split(".");for(var t=base2,n=0;t&&null!=e[n];)t=t[e[n++]];return t}if(this.extend(t),this.init&&this.init(),this.name&&"base2"!=this.name&&(this.parent||(this.parent=base2),this.parent.addName(this.name,this),this.namespace=format("var %1=%2;",this.name,String2.slice(this,1,-1))),e){var i=base2.JavaScript?base2.JavaScript.namespace:"";e.imports=Array2.reduce(csv(this.imports),function(e,t){var i=n(t)||n("JavaScript."+t);return assert(i,format("Object not found: '%1'.",t),ReferenceError),e+=i.namespace},"var base2=(function(){return this.base2})();"+base2.namespace+i)+lang.namespace,e.exports=Array2.reduce(csv(this.exports),function(e,t){var n=this.name+"."+t;return this.namespace+="var "+t+"="+n+";",e+="if(!"+n+")"+n+"="+t+";"},"",this)+"this._label_"+this.name+"();";var r=this,a=String2.slice(this,1,-1);e["_label_"+this.name]=function(){Package.forEach(r,function(e,t){e&&e.ancestorOf==Base.ancestorOf&&(e.toString=K(format("[%1.%2]",a,t)),e.prototype.toString==Base.prototype.toString&&(e.prototype.toString=K(format("[object %1.%2]",a,t))))})}}},exports:"",imports:"",name:"",namespace:"",parent:null,addName:function(e,t){this[e]||(this[e]=t,this.exports+=","+e,this.namespace+=format("var %1=%2.%1;",e,this.name))},addPackage:function(e){this.addName(e,new Package(null,{name:e,parent:this}))},toString:function(){return format("[%1]",this.parent?String2.slice(this.parent,1,-1)+"."+this.name:this.name)}}),Abstract=Base.extend({constructor:function(){throw new TypeError("Abstract class cannot be instantiated.")}}),_moduleCount=0,Module=Abstract.extend(null,{namespace:"",extend:function(e,t){var n=this.base(),i=_moduleCount++;return n.namespace="",n.partial=this.partial,n.toString=K("[base2.Module["+i+"]]"),Module[i]=n,n.implement(this),e&&n.implement(e),t&&(extend(n,t),n.init&&n.init()),n},forEach:function(e,t){_Function_forEach(Module,this.prototype,function(n,i){"function"==typeOf(n)&&e.call(t,this[i],i,this)},this)},implement:function(e){var t=this,n=t.toString().slice(1,-1);if("function"==typeof e){if(_ancestorOf(e,t)||this.base(e),_ancestorOf(Module,e)){for(var i in e)if(void 0===t[i]){var r=e[i];"function"==typeof r&&r.call&&e.prototype[i]&&(r=_staticModuleMethod(e,i)),t[i]=r}t.namespace+=e.namespace.replace(/base2\.Module\[\d+\]/g,n)}}else extend(t,e),_extendModule(t,e);return t},partial:function(){var e=Module.extend(),t=e.toString().slice(1,-1);return e.namespace=this.namespace.replace(/(\w+)=b[^\)]+\)/g,"$1="+t+".$1"),this.forEach(function(t,n){e[n]=partial(bind(t,e))}),e}}),Enumerable=Module.extend({every:function(e,t,n){var i=!0;try{forEach(e,function(r,a){if(!(i=t.call(n,r,a,e)))throw StopIteration})}catch(e){if(e!=StopIteration)throw e}return!!i},filter:function(e,t,n){var i=0;return this.reduce(e,function(r,a,o){return t.call(n,a,o,e)&&(r[i++]=a),r},[])},invoke:function(e,t){var n=_slice.call(arguments,2);return this.map(e,"function"==typeof t?function(e){return null==e?void 0:t.apply(e,n)}:function(e){return null==e?void 0:e[t].apply(e,n)})},map:function(e,t,n){var i=[],r=0;return forEach(e,function(a,o){i[r++]=t.call(n,a,o,e)}),i},pluck:function(e,t){return this.map(e,function(e){return null==e?void 0:e[t]})},reduce:function(e,t,n,i){var r=arguments.length>2;return forEach(e,function(a,o){r?n=t.call(i,n,a,o,e):(n=a,r=!0)}),n},some:function(e,t,n){return!this.every(e,not(t),n)}}),_HASH="#",Map=Base.extend({constructor:function(e){e&&this.merge(e)},clear:function(){for(var e in this)0==e.indexOf("#")&&delete this[e]},copy:function(){base2.__prototyping=!0;var e=new this.constructor;delete base2.__prototyping;for(var t in this)this[t]!==e[t]&&(e[t]=this[t]);return e},forEach:function(e,t){for(var n in this)0==n.indexOf("#")&&e.call(t,this[n],n.slice(1),this)},get:function(e){return this["#"+e]},getKeys:function(){return this.map(II)},getValues:function(){return this.map(I)},has:function(e){return"#"+e in this},merge:function(e){var t=flip(this.put);return forEach(arguments,function(e){forEach(e,t,this)},this),this},put:function(e,t){this["#"+e]=t},remove:function(e){delete this["#"+e]},size:function(){var e=0;for(var t in this)0==t.indexOf("#")&&e++;return e},union:function(e){return this.merge.apply(this.copy(),arguments)}});Map.implement(Enumerable),Map.prototype.filter=function(e,t){return this.reduce(function(n,i,r){return e.call(t,i,r,this)||n.remove(r),n},this.copy(),this)};var _KEYS="~",Collection=Map.extend({constructor:function(e){this["~"]=new Array2,this.base(e)},add:function(e,t){assert(!this.has(e),"Duplicate key '"+e+"'."),this.put.apply(this,arguments)},clear:function(){this.base(),this["~"].length=0},copy:function(){var e=this.base();return e["~"]=this["~"].copy(),e},forEach:function(e,t){for(var n=this["~"],i=n.length,r=0;r<i;r++)e.call(t,this["#"+n[r]],n[r],this)},getAt:function(e){var t=this["~"].item(e);return void 0===t?void 0:this["#"+t]},getKeys:function(){return this["~"].copy()},indexOf:function(e){return this["~"].indexOf(String(e))},insertAt:function(e,t,n){assert(void 0!==this["~"].item(e),"Index out of bounds."),assert(!this.has(t),"Duplicate key '"+t+"'."),this["~"].insertAt(e,String(t)),this["#"+t]=null,this.put.apply(this,_slice.call(arguments,1))},item:function(e){return this["number"==typeof e?"getAt":"get"](e)},put:function(e,t){this.has(e)||this["~"].push(String(e));var n=this.constructor;n.Item&&!instanceOf(t,n.Item)&&(t=n.create.apply(n,arguments)),this["#"+e]=t},putAt:function(e,t){arguments[0]=this["~"].item(e),assert(void 0!==arguments[0],"Index out of bounds."),this.put.apply(this,arguments)},remove:function(e){this.has(e)&&(this["~"].remove(String(e)),delete this["#"+e])},removeAt:function(e){var t=this["~"].item(e);void 0!==t&&(this["~"].removeAt(e),delete this["#"+t])},reverse:function(){return this["~"].reverse(),this},size:function(){return this["~"].length},slice:function(e,t){var n=this.copy();if(arguments.length>0){var i=this["~"],r=i;n["~"]=Array2(_slice.apply(i,arguments)),n["~"].length&&(r=r.slice(0,e),arguments.length>1&&(r=r.concat(i.slice(t))));for(var a=0;a<r.length;a++)delete n["#"+r[a]]}return n},sort:function(e){return e?this["~"].sort(bind(function(t,n){return e(this["#"+t],this["#"+n],t,n)},this)):this["~"].sort(),this},toString:function(){return"("+(this["~"]||"")+")"}},{Item:null,create:function(e,t){return this.Item?new this.Item(e,t):t},extend:function(e,t){var n=this.base(e);return n.create=this.create,t&&extend(n,t),n.Item?"function"!=typeof n.Item&&(n.Item=(this.Item||Base).extend(n.Item)):n.Item=this.Item,n.init&&n.init(),n}}),_RG_BACK_REF=/\\(\d+)/g,_RG_ESCAPE_CHARS=/\\./g,_RG_ESCAPE_BRACKETS=/\(\?[:=!]|\[[^\]]+\]/g,_RG_BRACKETS=/\(/g,_RG_LOOKUP=/\$(\d+)/,_RG_LOOKUP_SIMPLE=/^\$\d+$/,RegGrp=Collection.extend({constructor:function(e,t){this.base(e),this.ignoreCase=!!t},ignoreCase:!1,exec:function(e,t){e+="";var n=this,i=this["~"];return i.length?(t==RegGrp.IGNORE&&(t=0),e.replace(new RegExp(this,this.ignoreCase?"gi":"g"),function(e){for(var r,a=1,o=0;r=n["#"+i[o++]];){var s=a+r.length+1;if(arguments[a]){var l=null==t?r.replacement:t;switch(typeof l){case"function":return l.apply(n,_slice.call(arguments,a,s));case"number":return arguments[a+l];default:return l}}a=s}return e})):e},insertAt:function(e,t,n){return instanceOf(t,RegExp)&&(arguments[1]=t.source),base(this,arguments)},test:function(e){return this.exec(e)!=e},toString:function(){var e=1;return"("+this.map(function(t){var n=(t+"").replace(/\\(\d+)/g,function(t,n){return"\\"+(e+Number(n))});return e+=t.length+1,n}).join(")|(")+")"}},{IGNORE:"$0",init:function(){forEach("add,get,has,put,remove".split(","),function(e){_override(this,e,function(e){return instanceOf(e,RegExp)&&(arguments[0]=e.source),base(this,arguments)})},this.prototype)},Item:{constructor:function(e,t){if(null==t?t=RegGrp.IGNORE:null!=t.replacement?t=t.replacement:"function"!=typeof t&&(t=String(t)),"string"==typeof t&&_RG_LOOKUP.test(t))if(_RG_LOOKUP_SIMPLE.test(t))t=parseInt(t.slice(1));else{var n='"';t=t.replace(/\\/g,"\\\\").replace(/"/g,"\\x22").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\$(\d+)/g,'"+(arguments[$1]||"")+"').replace(/(['"])\1\+(.*)\+\1\1$/,"$1"),t=new Function('return "'+t+n)}this.length=RegGrp.count(e),this.replacement=t,this.toString=K(e+"")},length:0,replacement:""},count:function(e){return e=(e+"").replace(/\\./g,"").replace(/\(\?[:=!]|\[[^\]]+\]/g,""),match(e,/\(/g).length}}),lang={name:"lang",version:base2.version,exports:"assert,assertArity,assertType,base,bind,copy,extend,forEach,format,instanceOf,match,pcopy,rescape,trim,typeOf",namespace:""};"undefined"==typeof StopIteration&&(StopIteration=new Error("StopIteration")),forEach.csv=function(e,t,n){forEach(csv(e),t,n)},forEach.detect=function(e,t,n){forEach(e,function(i,r){"@"==r.charAt(0)?detect(r.slice(1))&&forEach(i,arguments.callee):t.call(n,i,r,e)})};var JavaScript={name:"JavaScript",version:base2.version,exports:"Array2,Date2,Function2,String2",namespace:"",bind:function(e){var t=global;return global=e,forEach.csv(this.exports,function(t){var n=t.slice(0,-1);extend(e[n],this[t]),this[t](e[n].prototype)},this),global=t,e}};(new Date).getYear()>1900&&(Date.prototype.getYear=function(){return this.getFullYear()-1900},Date.prototype.setYear=function(e){return this.setFullYear(e+1900)});var _testDate=new Date(Date.UTC(2006,1,20));_testDate.setUTCDate(15),0!=_testDate.getUTCHours()&&forEach.csv("FullYear,Month,Date,Hours,Minutes,Seconds,Milliseconds",function(e){extend(Date.prototype,"setUTC"+e,function(){var e=base(this,arguments);return e>=57722401e3&&(e-=36e5,this.setTime(e)),e})}),Function.prototype.prototype={},"$"=="".replace(/^/,K("$$"))&&extend(String.prototype,"replace",function(e,t){if("function"==typeof t){var n=t;t=function(){return String(n.apply(null,arguments)).split("$").join("$$")}}return this.base(e,t)});var Array2=_createObject2(Array,Array,"concat,join,pop,push,reverse,shift,slice,sort,splice,unshift",Enumerable,{combine:function(e,t){return t||(t=e),Array2.reduce(e,function(e,n,i){return e[n]=t[i],e},{})},contains:function(e,t){return-1!=Array2.indexOf(e,t)},copy:function(e){var t=_slice.call(e);return t.swap||Array2(t),t},flatten:function(e){var t=0;return Array2.reduce(e,function(e,n){return Array2.like(n)?Array2.reduce(n,arguments.callee,e):e[t++]=n,e},[])},forEach:_Array_forEach,indexOf:function(e,t,n){var i=e.length;null==n?n=0:n<0&&(n=Math.max(0,i+n));for(var r=n;r<i;r++)if(e[r]===t)return r;return-1},insertAt:function(e,t,n){return Array2.splice(e,t,0,n),n},item:function(e,t){return t<0&&(t+=e.length),e[t]},lastIndexOf:function(e,t,n){var i=e.length;null==n?n=i-1:n<0&&(n=Math.max(0,i+n));for(var r=n;r>=0;r--)if(e[r]===t)return r;return-1},map:function(e,t,n){var i=[];return Array2.forEach(e,function(r,a){i[a]=t.call(n,r,a,e)}),i},remove:function(e,t){var n=Array2.indexOf(e,t);-1!=n&&Array2.removeAt(e,n)},removeAt:function(e,t){Array2.splice(e,t,1)},swap:function(e,t,n){t<0&&(t+=e.length),n<0&&(n+=e.length);var i=e[t];return e[t]=e[n],e[n]=i,e}});Array2.reduce=Enumerable.reduce,Array2.like=function(e){return"object"==typeOf(e)&&"number"==typeof e.length},Enumerable["#implemented_by"].pop(),Enumerable["#implemented_by"].push(Array2);var _DATE_PATTERN=/^((-\d+|\d{4,})(-(\d{2})(-(\d{2}))?)?)?T((\d{2})(:(\d{2})(:(\d{2})(\.(\d{1,3})(\d)?\d*)?)?)?)?(([+-])(\d{2})(:(\d{2}))?|Z)?$/,_DATE_PARTS={FullYear:2,Month:4,Date:6,Hours:8,Minutes:10,Seconds:12,Milliseconds:14},_TIMEZONE_PARTS={Hectomicroseconds:15,UTC:16,Sign:17,Hours:18,Minutes:20},_TRIM_ZEROES=/(((00)?:0+)?:0+)?\.0+$/,_TRIM_TIMEZONE=/(T[0-9:.]+)$/,Date2=_createObject2(Date,function(e,t,n,i,r,a,o){switch(arguments.length){case 0:return new Date;case 1:return"number"==typeof e?new Date(e):Date2.parse(e);default:return new Date(e,t,2==arguments.length?1:n,i||0,r||0,a||0,o||0)}},"",{toISOString:function(e){var t="####-##-##T##:##:##.###";for(var n in _DATE_PARTS)t=t.replace(/#+/,function(t){var i=e["getUTC"+n]();return"Month"==n&&i++,("000"+i).slice(-t.length)});return t.replace(/(((00)?:0+)?:0+)?\.0+$/,"").replace(/(T[0-9:.]+)$/,"$1Z")}});delete Date2.forEach,Date2.now=function(){return(new Date).valueOf()},Date2.parse=function(e,t){arguments.length>1&&assertType(t,"number","default date should be of type 'number'.");var n=match(e,/^((-\d+|\d{4,})(-(\d{2})(-(\d{2}))?)?)?T((\d{2})(:(\d{2})(:(\d{2})(\.(\d{1,3})(\d)?\d*)?)?)?)?(([+-])(\d{2})(:(\d{2}))?|Z)?$/);if(n.length){n[_DATE_PARTS.Month]&&n[_DATE_PARTS.Month]--,n[_TIMEZONE_PARTS.Hectomicroseconds]>=5&&n[_DATE_PARTS.Milliseconds]++;var i=new Date(t||0),r=n[_TIMEZONE_PARTS.UTC]||n[_TIMEZONE_PARTS.Hours]?"UTC":"";for(var a in _DATE_PARTS){var o=n[_DATE_PARTS[a]];if(o&&(i["set"+r+a](o),i["get"+r+a]()!=n[_DATE_PARTS[a]]))return NaN}if(n[_TIMEZONE_PARTS.Hours]){var s=Number(n[_TIMEZONE_PARTS.Sign]+n[_TIMEZONE_PARTS.Hours]),l=Number(n[_TIMEZONE_PARTS.Sign]+(n[_TIMEZONE_PARTS.Minutes]||0));i.setUTCMinutes(i.getUTCMinutes()+60*s+l)}return i.valueOf()}return Date.parse(e)};var String2=_createObject2(String,function(e){return new String(0==arguments.length?"":e)},"charAt,charCodeAt,concat,indexOf,lastIndexOf,match,replace,search,slice,split,substr,substring,toLowerCase,toUpperCase",{csv:csv,format:format,rescape:rescape,trim:trim});delete String2.forEach;var Function2=_createObject2(Function,Function,"",{I:I,II:II,K:K,bind:bind,compose:compose,delegate:delegate,flip:flip,not:not,partial:partial,unbind:unbind});base2=global.base2=new Package(this,base2);var exports=this.exports;lang=new Package(this,lang),exports+=this.exports,JavaScript=new Package(this,JavaScript),eval(exports+this.exports),lang.base=base,lang.extend=extend},new function(_no_shrink_){function _createDelegates(e,t){var n=e.toString().slice(1,-1);for(var i in t){var r=t[i];if("@"==i.charAt(0))_createDelegates(e,r);else if(!e[i]&&"function"==typeof r&&r.call){var a="abcdefghij".slice(0,r.length).split(""),o=new Function(a.join(","),format("%2.base=%2.%1.ancestor;var m=%2.base?'base':'%1';return %2[m](%3)",i,a[0],a.slice(1)));o._delegate=i,e[i]=o,e.namespace+="var "+i+"=base2.lang.bind('"+i+"',"+n+");"}}}function _handleEvent(e,t,n){"function"==typeof t?t.call(e,n):t.handleEvent(n)}function _MSIE_getPixelValue(e,t){if(_PIXEL.test(t))return parseInt(t);var n=e.style.left,i=e.runtimeStyle.left;return e.runtimeStyle.left=e.currentStyle.left,e.style.left=t||0,t=e.style.pixelLeft,e.style.left=n,e.runtimeStyle.left=i,t}function _MSIE_getColorValue(e,t){if(e.createTextRange)var n=e.createTextRange();else n=e.document.body.createTextRange(),n.moveToElementText(e);try{var i=n.queryCommandValue("type")}catch(e){i=0}return format("rgb(%1, %2, %3)",255&i,(65280&i)>>8,(16711680&i)>>16)}function _nthChild(e,t,n,i,r,a,o,s){i=/last/i.test(e)?i+"+1-":"",isNaN(t)?"even"==t?t="2n":"odd"==t&&(t="2n+1"):t="0n+"+t,t=t.split("n");var l=t[0]?"-"==t[0]?-1:parseInt(t[0]):1,c=parseInt(t[1])||0,u=l<0;u&&1==(l=-l)&&c++;var h=format(0==l?"%3%7"+(i+c):"(%4%3-%2)%6%1%70%5%4%3>=%2",l,c,n,i,a,o,s);return u&&(h=r+"("+h+")"),h}function _xpath_not(e,t){return _notParser||(_notParser=new XPathParser),"[not("+_notParser.exec(trim(t)).replace(/\[1\]/g,"").replace(/^(\*|[\w-]+)/,"[self::$1]").replace(/\]\[/g," and ").slice(1,-1)+")]"}function _xpath_nthChild(e,t,n){return"["+_nthChild(e,t,n||"count(preceding-sibling::*)+1","last()","not"," and "," mod ","=")+"]"}function sum(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function _ElementClassList(e){this.add=function(t){ClassList.add(e,t)},this.has=function(t){return ClassList.has(e,t)},this.remove=function(t){ClassList.remove(e,t)}}var DOM=new base2.Package(this,{name:"DOM",version:"1.0.1",imports:"Function2",exports:"Interface,Binding,Node,Document,Element,AbstractView,HTMLDocument,HTMLElement,Selector,Traversal,CSSParser,XPathParser,NodeSelector,DocumentSelector,ElementSelector,StaticNodeList,Event,EventTarget,DocumentEvent,ViewCSS,CSSStyleDeclaration,ClassList",bind:function(e){if(e&&e.nodeType){var t=assignID(e);if(!DOM.bind[t]){switch(e.nodeType){case 1:"string"==typeof e.className?(HTMLElement.bindings[e.tagName]||HTMLElement).bind(e):Element.bind(e);break;case 9:e.writeln?HTMLDocument.bind(e):Document.bind(e);break;default:Node.bind(e)}DOM.bind[t]=!0}}return e},"@MSIE5.+win":{bind:function(e){return e&&e.writeln&&(e.nodeType=9),this.base(e)}}});eval(this.imports);var _MSIE=detect("MSIE"),_MSIE5=detect("MSIE5"),Interface=Module.extend(null,{forEach:function(e,t){forEach(this,function(n,i){"function"==typeOf(n)&&(this.prototype[i]||n._delegate)&&e.call(t,n,i,this)},this,Module)},implement:function(e){if("object"==typeof e)_createDelegates(this,e);else if(Interface.ancestorOf(e))for(var t in e)e[t]&&e[t]._delegate&&(this[t]=bind(t,e),this[t]._delegate=t);return this.base(e)}}),Binding=Interface.extend(null,{extend:function(e,t){if(t&&t.bind!=Function.bind){var n=t.bind;delete t.bind}var i=this.base(e,t);return i.bind=this.bind,n&&extend(i,"bind",n),i},bind:function(e){return extend(e,this.prototype)}}),Node=Binding.extend({"@!(element.compareDocumentPosition)":{compareDocumentPosition:function(e,t){if(Traversal.contains(e,t))return 20;if(Traversal.contains(t,e))return 10;var n=_getSourceIndex(e),i=_getSourceIndex(t);return n<i?4:n>i?2:0}}},{"@Gecko":{bind:function(e){return extend(this.base(e),"removeEventListener",function(){var e=Array2.slice(arguments);e.unshift(this),EventTarget.removeEventListener.apply(EventTarget,e)})}}}),_getSourceIndex=document.documentElement.sourceIndex?function(e){return e.sourceIndex}:function(e){for(var t=0;e;)t=Traversal.getNodeIndex(e)+"."+t,e=e.parentNode;return t},Document=Node.extend(null,{bind:function(e){return extend(e,"createElement",function(e){return DOM.bind(this.base(e))}),AbstractView.bind(e.defaultView),e!=window.document&&new DOMContentLoadedEvent(e),this.base(e)},"@!(document.defaultView)":{bind:function(e){return e.defaultView=Traversal.getDefaultView(e),this.base(e)}}}),_ATTRIBUTES={class:"className",for:"htmlFor"},Element=Node.extend({"@MSIE.+win":{getAttribute:function(element,name){if(void 0===element.className)return this.base(element,name);var attribute=_getAttributeNode(element,name);if(attribute&&(attribute.specified||"value"==name))return"href"==name||"src"==name?(element.base=element.getAttribute.ancestor,element[element.base?"base":"getAttribute"](name,2)):"style"==name?element.style.cssText.toLowerCase():attribute.nodeValue;if("type"==name&&"INPUT"==element.nodeName){var outerHTML=element.outerHTML;with(outerHTML)outerHTML=slice(0,indexOf(">")+1);return match(outerHTML,/type="?([^\s">]*)"?/i)[1]||null}return null},removeAttribute:function(e,t){void 0!==e.className&&(t=_ATTRIBUTES[t.toLowerCase()]||t),this.base(e,t)},setAttribute:function(e,t,n){if(void 0===e.className)this.base(e,t,n);else if("style"==t)e.style.cssText=n;else{n=String(n);var i=_getAttributeNode(e,t);i?i.nodeValue=n:this.base(e,_ATTRIBUTES[t.toLowerCase()]||t,n)}}},"@!(element.hasAttribute)":{hasAttribute:function(e,t){return void 0===e.className?this.base(e,t):null!=this.getAttribute(e,t)}}});detect("MSIE.+win")&&extend(Element.prototype,"cloneNode",function(e){var t=this.base(e||!1);return t.base2ID=void 0,t});var _HTML_ATTRIBUTES="colSpan,rowSpan,vAlign,dateTime,accessKey,tabIndex,encType,maxLength,readOnly,longDesc";extend(_ATTRIBUTES,Array2.combine(_HTML_ATTRIBUTES.toLowerCase().split(","),_HTML_ATTRIBUTES.split(",")));var _getAttributeNode=document.documentElement.getAttributeNode?function(e,t){return e.getAttributeNode(t)}:function(e,t){return e.attributes[t]||e.attributes[_ATTRIBUTES[t.toLowerCase()]]},TEXT=detect("(element.textContent===undefined)")?"innerText":"textContent",Traversal=Module.extend({getDefaultView:function(e){return this.getDocument(e).defaultView},getNextElementSibling:function(e){for(;e&&(e=e.nextSibling)&&!this.isElement(e););return e},getNodeIndex:function(e){for(var t=0;e&&(e=e.previousSibling);)t++;return t},getOwnerDocument:function(e){return e.ownerDocument},getPreviousElementSibling:function(e){for(;e&&(e=e.previousSibling)&&!this.isElement(e););return e},getTextContent:function(e,t){return e[t?"innerHTML":TEXT]},isEmpty:function(e){for(e=e.firstChild;e;){if(3==e.nodeType||this.isElement(e))return!1;e=e.nextSibling}return!0},setTextContent:function(e,t,n){return e[n?"innerHTML":TEXT]=t},"@!MSIE":{setTextContent:function(node,text,isHTML){with(node)for(;lastChild;)parentNode.removeChild(lastChild);return this.base(node,text,isHTML)}},"@MSIE":{getDefaultView:function(e){return(e.document||e).parentWindow},"@MSIE5":{getOwnerDocument:function(e){return e.ownerDocument||e.document}}}},{contains:function(e,t){for(e.nodeType;t&&(t=t.parentNode)&&e!=t;);return!!t},getDocument:function(e){return this.isDocument(e)?e:e.ownerDocument||e.document},isDocument:function(e){return!(!e||!e.documentElement)},isElement:function(e){return!(!e||1!=e.nodeType)},"@(element.contains)":{contains:function(e,t){return e!=t&&(this.isDocument(e)?e==this.getOwnerDocument(t):e.contains(t))}},"@MSIE5":{isElement:function(e){return!(!e||1!=e.nodeType||"!"==e.nodeName)}}}),AbstractView=Binding.extend(),_CAPTURE_TYPE={},_TYPE_MAP={2:2,4:1},_CAPTURING_PHASE=1,_AT_TARGET=2,_BUBBLING_PHASE=3,_MOUSE_BUTTON=/^mouse(up|down)|click$/,_MOUSE_CLICK=/click$/,_BUBBLES="abort|error|select|change|resize|scroll|",_CANCELABLE="(dbl)?click|mouse(down|up|over|move|out|wheel)|key(down|up)|submit|reset";if(_BUBBLES=new RegExp("^("+_BUBBLES+_CANCELABLE+")$"),_CANCELABLE=new RegExp("^("+_CANCELABLE+")$"),_MSIE){var _W3C_EVENT_TYPE={focusin:"focus",focusout:"blur"};_CAPTURE_TYPE={focus:"focusin",blur:"focusout"}}var _CAN_DELEGATE=/^(blur|submit|reset|change|select)$|^(mouse|key|focus)|click$/,Event=Binding.extend({"@!(document.createEvent)":{initEvent:function(e,t,n,i){e.type=String(t),e.bubbles=!!n,e.cancelable=!!i},preventDefault:function(e){!1!==e.cancelable&&(e.returnValue=!1)},stopPropagation:function(e){e.cancelBubble=!0},"@MSIE":{preventDefault:function(e){if(this.base(e),"mousedown"==e.type){var t="onbeforedeactivate",n=Traversal.getDocument(e.target);n.attachEvent(t,function(e){e.returnValue=!1,n.detachEvent(t,arguments.callee)})}}}}},{CAPTURING_PHASE:1,AT_TARGET:2,BUBBLING_PHASE:3,"@!(document.createEvent)":{"@MSIE":{bind:function(e){var t=e.type;return e.timeStamp||(e.bubbles=_BUBBLES.test(t),e.cancelable=_CANCELABLE.test(t),e.timeStamp=(new Date).valueOf()),e.relatedTarget=e[(e.target==e.fromElement?"to":"from")+"Element"],this.base(e)}}},cloneEvent:function(e){var t=copy(e);return t.stopPropagation=function(){e.stopPropagation()},t.preventDefault=function(){e.preventDefault()},t},"@MSIE":{cloneEvent:copy}}),EventDispatcher=Base.extend({constructor:function(e){this.state=e,this.events=e.events},dispatch:function(e,t,n){t.eventPhase=n;var i=this.events[t.type][n];if(i)for(var r=e.length;r--&&!t.cancelBubble;){var a=e[r],o=i[a.base2ID];if(o){o=copy(o),t.currentTarget=a,t.eventPhase=a==t.target?2:n;for(var s in o){var l=o[s];"function"==typeof l?l.call(a,t):l.handleEvent(t)}}}},handleEvent:function(e,t){Event.bind(e);var n=e.type,i=_W3C_EVENT_TYPE[n];if(i&&(e=copy(e),n=e.type=i),this.events[n]){if(_MOUSE_BUTTON.test(n)){var r=_MOUSE_CLICK.test(n)?this.state._button:e.button;r=_TYPE_MAP[r]||0,e.button!=r&&(e=copy(e),e.button=r)}for(var a=e.target,o=[],s=0;a;)o[s++]=a,a=a.parentNode;this.dispatch(o,e,1),e.cancelBubble||(e.bubbles||(o.length=1),o.reverse(),this.dispatch(o,e,3))}return!1!==e.returnValue},"@MSIE.+win":{handleEvent:function(e){return"scroll"==e.type?(setTimeout(bind(this.base,this,copy(e),!0),0),!0):this.base(e)},"@MSIE5":{dispatch:function(e,t,n){1!=n||Array2.item(e,-1).documentElement||e.push(e[0].document),this.base(e,t,n)}}}}),_wrappedListeners={},EventTarget=Interface.extend({"@!(element.addEventListener)":{addEventListener:function(e,t,n,i){var r=DocumentState.getInstance(e),a=assignID(e),o=assignID(n),s=i?1:3,l=r.registerEvent(t,e),c=l[s];c||(c=l[s]={}),i&&(t=_CAPTURE_TYPE[t]||t);var u=c[a];u||(u=c[a]={}),u[o]=n},dispatchEvent:function(e,t){return t.target=e,
DocumentState.getInstance(e).handleEvent(t)},removeEventListener:function(e,t,n,i){var r=DocumentState.getInstance(e).events,a=r[t];if(a){var o=a[i?1:3];if(o){var s=o[e.base2ID];s&&delete s[n.base2ID]}}}},"@(element.addEventListener)":{"@Gecko":{addEventListener:function(e,t,n,i){if("mousewheel"==t){t="DOMMouseScroll";var r=n;n=_wrappedListeners[assignID(n)]=function(t){t=Event.cloneEvent(t),t.type="mousewheel",t.wheelDelta=40*-t.detail||0,_handleEvent(e,r,t)}}this.base(e,t,n,i)}},"@webkit[1-4]|KHTML[34]":{addEventListener:function(e,t,n,i){if(_MOUSE_BUTTON.test(t)){var r=n;n=_wrappedListeners[assignID(n)]=function(t){var n=_TYPE_MAP[t.button]||0;t.button!=n&&(t=Event.cloneEvent(t),t.button=n),_handleEvent(e,r,t)}}else"object"==typeof n&&(n=_wrappedListeners[assignID(n)]=bind("handleEvent",n));this.base(e,t,n,i)}},"@Linux|Mac|opera":{addEventListener:function(e,t,n,i){if("keydown"==t){var r=n;n=_wrappedListeners[assignID(n)]=function(t){function n(n){a&&n.preventDefault(),(n==t||i>1)&&_handleEvent(e,r,t),i++}var i=0,a=!1;extend(t,"preventDefault",function(){this.base(),a=!0}),n(t),e.addEventListener("keyup",function(){e.removeEventListener("keypress",n,!0),e.removeEventListener("keyup",arguments.callee,!0)},!0),e.addEventListener("keypress",n,!0)}}this.base(e,t,n,i)}},removeEventListener:function(e,t,n,i){this.base(e,t,_wrappedListeners[n.base2ID]||n,i)}}});detect("Gecko")&&(EventTarget.removeEventListener._delegate="removeEventListener",delete EventTarget.prototype.removeEventListener);var DocumentEvent=Interface.extend({"@!(document.createEvent)":{createEvent:function(e,t){var n=e.createEventObject?e.createEventObject():{};return n.bubbles=!1,n.cancelable=!1,n.eventPhase=0,n.target=e,n.currentTarget=null,n.relatedTarget=null,n.timeStamp=(new Date).valueOf(),Event(n)}},"@(document.createEvent)":{"@!(document.createEvent('Events'))":{createEvent:function(e,t){return this.base(e,"Events"==t?"UIEvents":t)}}}}),DOMContentLoadedEvent=Base.extend({constructor:function(e){var t=!1;this.fire=function(){t||(t=!0,setTimeout(function(){var t=DocumentEvent.createEvent(e,"Events");Event.initEvent(t,"DOMContentLoaded",!0,!1),EventTarget.dispatchEvent(e,t)},1))},EventTarget.addEventListener(e,"DOMContentLoaded",function(){t=!0},!1),this.listen(e)},listen:Undefined,"@!Gecko20([^0]|0[3-9])|Webkit52[5-9]|Webkit5[3-9]|Webkit[6-9]|Opera[19]|MSIE.+mac":{listen:function(e){EventTarget.addEventListener(Traversal.getDefaultView(e),"load",this.fire,!1)},"@MSIE.+win":{listen:function(e){try{e.body.doScroll("left"),this.__constructing||this.fire()}catch(t){setTimeout(bind(this.listen,this,e),10)}}},"@KHTML":{listen:function(e){/loaded|complete/.test(e.readyState)?this.__constructing||this.fire():setTimeout(bind(this.listen,this,e),10)}}}});Document.implement(DocumentEvent),Document.implement(EventTarget),Element.implement(EventTarget);var _PIXEL=/^\d+(px)?$/i,_METRICS=/(width|height|top|bottom|left|right|fontSize)$/,_COLOR=/^(color|backgroundColor)$/,_RGB_BLACK="rgb(0, 0, 0)",_BLACK={black:1,"#000":1,"#000000":1},ViewCSS=Interface.extend({"@!(document.defaultView.getComputedStyle)":{"@MSIE":{getComputedStyle:function(e,t,n){var i=t.currentStyle,r={};for(var a in i)_METRICS.test(a)||_COLOR.test(a)?r[a]=this.getComputedPropertyValue(e,t,a):0!=a.indexOf("ruby")&&(r[a]=i[a]);return r}}},getComputedStyle:function(e,t,n){return _CSSStyleDeclaration_ReadOnly.bind(this.base(e,t,n))}},{getComputedPropertyValue:function(e,t,n){return CSSStyleDeclaration.getPropertyValue(this.getComputedStyle(e,t,null),n)},"@MSIE":{getComputedPropertyValue:function(e,t,n){n=this.toCamelCase(n);var i=t.currentStyle[n];if(_METRICS.test(n))return _MSIE_getPixelValue(t,i)+"px";if(!_MSIE5&&_COLOR.test(n)){var r=_MSIE_getColorValue(t,"color"==n?"ForeColor":"BackColor");return"rgb(0, 0, 0)"!=r||_BLACK[i]?r:i}return i}},toCamelCase:function(e){return e.replace(/\-([a-z])/g,flip(String2.toUpperCase))}}),_CSSStyleDeclaration_ReadOnly=Binding.extend({getPropertyValue:function(e,t){return this.base(e,_CSSPropertyNameMap[t]||t)},"@MSIE.+win":{getPropertyValue:function(e,t){return"float"==t?e.styleFloat:e[ViewCSS.toCamelCase(t)]}}}),CSSStyleDeclaration=_CSSStyleDeclaration_ReadOnly.extend({setProperty:function(e,t,n,i){return this.base(e,_CSSPropertyNameMap[t]||t,n,i)},"@MSIE.+win":{setProperty:function(e,t,n,i){"opacity"==t?(n*=100,e.opacity=n,e.zoom=1,e.filter="Alpha(opacity="+n+")"):"important"==i?e.cssText+=format(";%1:%2!important;",t,n):e.setAttribute(ViewCSS.toCamelCase(t),n)}}},{"@MSIE":{bind:function(e){return e.getPropertyValue=this.prototype.getPropertyValue,e.setProperty=this.prototype.setProperty,e}}}),_CSSPropertyNameMap=new Base({"@Gecko":{opacity:"-moz-opacity"},"@KHTML":{opacity:"-khtml-opacity"}});with(CSSStyleDeclaration.prototype)getPropertyValue.toString=setProperty.toString=K("[base2]");AbstractView.implement(ViewCSS);var NodeSelector=Interface.extend({"@(element.querySelector)":{querySelector:function(e,t){try{var n=this.base(e,trim(t));if(n)return n}catch(e){}return new Selector(t).exec(e,1)},querySelectorAll:function(e,t){try{var n=this.base(e,trim(t));if(n)return new StaticNodeList(n)}catch(e){}return new Selector(t).exec(e)}},"@!(element.querySelector)":{querySelector:function(e,t){return new Selector(t).exec(e,1)},querySelectorAll:function(e,t){return new Selector(t).exec(e)}}});extend(NodeSelector.prototype,{querySelector:function(e){return DOM.bind(this.base(e))},querySelectorAll:function(e){return extend(this.base(e),"item",function(e){return DOM.bind(this.base(e))})}});var DocumentSelector=NodeSelector.extend(),ElementSelector=NodeSelector.extend({"@!(element.matchesSelector)":{matchesSelector:function(e,t){return new Selector(t).test(e)}}}),_CSS_ESCAPE=/'(\\.|[^'\\])*'|"(\\.|[^"\\])*"/g,_CSS_IMPLIED_ASTERISK=/([\s>+~,]|[^(]\+|^)([#.:\[])/g,_CSS_IMPLIED_SPACE=/(^|,)([^\s>+~])/g,_CSS_WHITESPACE=/\s*([\s>+~,]|^|$)\s*/g,_CSS_WILD_CARD=/\s\*\s/g,_CSS_UNESCAPE=/\x01(\d+)/g,_QUOTE=/'/g,CSSParser=RegGrp.extend({constructor:function(e){this.base(e),this.cache={},this.sorter=new RegGrp,this.sorter.add(/:not\([^)]*\)/,RegGrp.IGNORE),this.sorter.add(/([ >](\*|[\w-]+))([^: >+~]*)(:\w+-child(\([^)]+\))?)([^: >+~]*)/,"$1$3$6$4")},cache:null,ignoreCase:!0,escape:function(e,t){var n=this._strings=[];return e=this.optimise(this.format(String(e).replace(/'(\\.|[^'\\])*'|"(\\.|[^"\\])*"/g,function(e){return""+n.push(e.slice(1,-1).replace(/'/g,"\\'"))}))),t&&(e=e.replace(/^ \*?/,"")),e},format:function(e){return e.replace(/\s*([\s>+~,]|^|$)\s*/g,"$1").replace(/(^|,)([^\s>+~])/g,"$1 $2").replace(/([\s>+~,]|[^(]\+|^)([#.:\[])/g,"$1*$2")},optimise:function(e){return this.sorter.exec(e.replace(/\s\*\s/g,">* "))},parse:function(e,t){return this.cache[e]||(this.cache[e]=this.unescape(this.exec(this.escape(e,t))))},unescape:function(e){var t=this._strings;return e.replace(/\x01(\d+)/g,function(e,n){return t[n-1]})}}),XPathParser=CSSParser.extend({constructor:function(){this.base(XPathParser.build()),this.sorter.putAt(1,"$1$4$3$6")},escape:function(e,t){return this.base(e,t).replace(/,/g,"")},unescape:function(e){return this.base(e.replace(/\[self::\*\]/g,"").replace(/(^|\x02)\//g,"$1./").replace(/\x02/g," | ")).replace(/'[^'\\]*\\'(\\.|[^'\\])*'/g,function(e){return"concat("+e.split("\\'").join("',\"'\",'")+")"})},"@opera(7|8|9\\.[1-4])":{unescape:function(e){return this.base(e.replace(/last\(\)/g,"count(preceding-sibling::*)+count(following-sibling::*)+1"))}}},{build:function(){return this.values.attributes[""]="[@$1]",forEach(this.types,function(e,t){forEach(this.values[t],e,this.rules)},this),this.build=K(this.rules),this.rules},optimised:{pseudoClasses:{"first-child":"[1]","last-child":"[last()]","only-child":"[last()=1]"}},rules:extend({},{"@!KHTML|opera":{"(^|\\x02) (\\*|[\\w-]+)#([\\w-]+)":"$1id('$3')[self::$2]"},"@!KHTML":{"([ >])(\\*|[\\w-]+):([\\w-]+-child(\\(([^)]+)\\))?)":function(e,t,n,i,r,a){var o=" "==t?"//*":"/*";return/^nth/i.test(i)?o+=_xpath_nthChild(i,a,"position()"):o+=XPathParser.optimised.pseudoClasses[i],o+"[self::"+n+"]"}}}),types:{identifiers:function(e,t){this[rescape(t)+"([\\w-]+)"]=e},combinators:function(e,t){this[rescape(t)+"(\\*|[\\w-]+)"]=e},attributes:function(e,t){this["\\[\\s*([\\w-]+)\\s*"+rescape(t)+"\\s*([^\\]\\s]*)\\s*\\]"]=e},pseudoClasses:function(e,t){this[":"+t.replace(/\(\)$/,"\\(([^)]+)\\)")]=e}},values:{identifiers:{"#":"[@id='$1'][1]",".":"[contains(concat(' ',@class,' '),' $1 ')]"},combinators:{" ":"/descendant::$1",">":"/child::$1","+":"/following-sibling::*[1][self::$1]","~":"/following-sibling::$1"},attributes:{"*=":"[contains(@$1,'$2')]","^=":"[starts-with(@$1,'$2')]","$=":"[substring(@$1,string-length(@$1)-string-length('$2')+1)='$2']","~=":"[contains(concat(' ',@$1,' '),' $2 ')]","|=":"[contains(concat('-',@$1,'-'),'-$2-')]","!=":"[not(@$1='$2')]","=":"[@$1='$2']"},pseudoClasses:{link:"[false]",visited:"[false]",empty:"[not(child::*) and not(text())]","first-child":"[not(preceding-sibling::*)]","last-child":"[not(following-sibling::*)]","not()":_xpath_not,"nth-child()":_xpath_nthChild,"nth-last-child()":_xpath_nthChild,"only-child":"[not(preceding-sibling::*) and not(following-sibling::*)]",root:"[not(parent::*)]"}},"@opera(7|8|9\\.[1-4])":{build:function(){return this.optimised.pseudoClasses["last-child"]=this.values.pseudoClasses["last-child"],this.optimised.pseudoClasses["only-child"]=this.values.pseudoClasses["only-child"],this.base()}}}),_notParser,Selector=Base.extend({constructor:function(e){this.toString=K(trim(e))},exec:function(e,t,n){return Selector.parse(this,n)(e,t)},isSimple:function(){return _parser.exec||(_parser=new CSSParser(_parser)),!_COMBINATOR.test(trim(_parser.escape(this)))},test:function(e){if(this.isSimple())return!!Selector.parse(this,!0)(e,1);e.setAttribute("b2-test",!0);var t=new Selector(this+"[b2-test]").exec(Traversal.getOwnerDocument(e),1);return e.removeAttribute("b2-test"),t==e},toXPath:function(e){return Selector.toXPath(this,e)},"@(XPathResult)":{exec:function(e,t,n){if(_NOT_XPATH.test(this))return this.base(e,t,n);var i=Traversal.getDocument(e),r=1==t?9:7,a=i.evaluate(this.toXPath(n),e,null,r,null);return 1==t?a.singleNodeValue:a}},"@MSIE":{exec:function(e,t,n){if(void 0!==e.selectNodes&&!_NOT_XPATH.test(this)){return e[single?"selectSingleNode":"selectNodes"](this.toXPath(n))}return this.base(e,t,n)}},"@(true)":{exec:function(e,t,n){try{var i=this.base(e||document,t,n)}catch(e){throw new SyntaxError(format("'%1' is not a valid CSS selector.",this))}return 1==t?i:new StaticNodeList(i)}}},{toXPath:function(e,t){return _xpathParser||(_xpathParser=new XPathParser),_xpathParser.parse(e,t)}}),_COMBINATOR=/[^,]\s|[+>~]/,_NOT_XPATH=":(checked|disabled|enabled|contains|hover|active|focus)|^(#[\\w-]+\\s*)?\\w+$";detect("KHTML")&&(detect("WebKit5")?_NOT_XPATH+="|nth\\-|,":_NOT_XPATH="."),_NOT_XPATH=new RegExp(_NOT_XPATH),Selector.operators={"=":"%1=='%2'","~=":/(^| )%1( |$)/,"|=":/^%1(-|$)/,"^=":/^%1/,"$=":/%1$/,"*=":/%1/},Selector.operators[""]="%1!=null",Selector.pseudoClasses={checked:"e%1.checked",contains:"e%1[TEXT].indexOf('%2')!=-1",disabled:"e%1.disabled",empty:"Traversal.isEmpty(e%1)",enabled:"e%1.disabled===false","first-child":"!Traversal.getPreviousElementSibling(e%1)","last-child":"!Traversal.getNextElementSibling(e%1)","only-child":"!Traversal.getPreviousElementSibling(e%1)&&!Traversal.getNextElementSibling(e%1)",root:"e%1==Traversal.getDocument(e%1).documentElement",target:"e%1.id&&e%1.id==location.hash.slice(1)",hover:"DocumentState.getInstance(d).isHover(e%1)",active:"DocumentState.getInstance(d).isActive(e%1)",focus:"DocumentState.getInstance(d).hasFocus(e%1)",link:"false",visited:"false"};var _INDEXED=void 0!==document.documentElement.sourceIndex,_VAR="var p%2=0,i%2,e%3,n%2=e%1.",_ID=_INDEXED?"e%1.sourceIndex":"assignID(e%1)",_TEST="var g="+_ID+";if(!p[g]){p[g]=1;",_STORE="r[k++]=e%1;if(s==1)return e%1;if(k===s){_query.state=[%2];_query.complete=%3;return r;",_FN="var _query=function(e0,s%1){_indexed++;var r=[],p={},p0=0,reg=[%4],d=Traversal.getDocument(e0),c=d.writeln?'toUpperCase':'toString',k=0;",_xpathParser,_reg,_index,_wild,_list,_group,_listAll,_duplicate,_cache={},_simple={},_parser={"^(\\*|[\\w-]+)":function(e,t){return"*"==t?"":format("if(e0.nodeName=='%1'[c]()){",t)},"^ \\*:root":function(e){_wild=!1;return format("e%2=d.documentElement;if(Traversal.contains(e%1,e%2)){",_index++,_index)}," (\\*|[\\w-]+)#([\\w-]+)":function(e,t,n){_wild=!1;var i="var e%2=_byId(d,'%4');if(e%2&&";return"*"!=t&&(i+="e%2.nodeName=='%3'[c]()&&"),i+="Traversal.contains(e%1,e%2)){",_list[_group]&&(i+=format("i%1=n%1.length;",sum(_list))),format(i,_index++,_index,t,n)}," (\\*|[\\w-]+)":function(e,t){_duplicate++,_wild="*"==t;var n=format(_VAR,_index++,"%2",_index);return n+=_wild&&_MSIE5?"all":"getElementsByTagName('%3')",n+=";for(i%2=a%2||0;(e%1=n%2[i%2]);i%2++){",_list[_group]++,format(n,_index,sum(_list),t)},">(\\*|[\\w-]+)":function(e,t){var n=_MSIE&&_index;_wild="*"==t;var i=_VAR+(n?"children":"childNodes");return i=format(i,_index++,"%2",_index),!_wild&&_MSIE&&n&&(i+=".tags('%3')"),i+=";for(i%2=a%2||0;(e%1=n%2[i%2]);i%2++){",_wild?(i+="if(e%1.nodeType==1){",_wild=_MSIE5):_MSIE&&n||(i+="if(e%1.nodeName=='%3'[c]()){"),_list[_group]++,format(i,_index,sum(_list),t)},"\\+(\\*|[\\w-]+)":function(e,t){var n="";return _wild&&_MSIE&&(n+="if(e%1.nodeName!='!'){"),_wild=!1,n+="e%1=Traversal.getNextElementSibling(e%1);if(e%1","*"!=t&&(n+="&&e%1.nodeName=='%2'[c]()"),n+="){",format(n,_index,t)},"~(\\*|[\\w-]+)":function(e,t){var n="";return _wild&&_MSIE&&(n+="if(e%1.nodeName!='!'){"),_wild=!1,_duplicate=2,n+="while(e%1=e%1.nextSibling){if(e%1.b2_adjacent==_indexed)break;if(","*"==t?(n+="e%1.nodeType==1",_MSIE5&&(n+="&&e%1.nodeName!='!'")):n+="e%1.nodeName=='%2'[c]()",n+="){e%1.b2_adjacent=_indexed;",format(n,_index,t)},"#([\\w-]+)":function(e,t){_wild=!1;var n="if(e%1.id=='%2'){";return _list[_group]&&(n+=format("i%1=n%1.length;",sum(_list))),format(n,_index,t)},"\\.([\\w-]+)":function(e,t){return _wild=!1,_reg.push(new RegExp("(^|\\s)"+rescape(t)+"(\\s|$)")),format("if(e%1.className&&reg[%2].test(e%1.className)){",_index,_reg.length-1)},":not\\((\\*|[\\w-]+)?([^)]*)\\)":function(e,t,n){var i=t&&"*"!=t?format("if(e%1.nodeName=='%2'[c]()){",_index,t):"";return i+=_parser.exec(n),"if(!"+i.slice(2,-1).replace(/\)\{if\(/g,"&&")+"){"},":nth(-last)?-child\\(([^)]+)\\)":function(e,t,n){_wild=!1,t=format("e%1.parentNode.b2_length",_index);var i="if(p%1!==e%1.parentNode)p%1=_register(e%1.parentNode);";return i+="var i=e%1[p%1.b2_lookup];if(p%1.b2_lookup!='b2_index')i++;if(",format(i,_index)+_nthChild(e,n,"i",t,"!","&&","% ","==")+"){"},":([\\w-]+)(\\(([^)]+)\\))?":function(e,t,n,i){return"if("+format(Selector.pseudoClasses[t]||"throw",_index,i||"")+"){"},"\\[\\s*([\\w-]+)\\s*([^=]?=)?\\s*([^\\]\\s]*)\\s*\\]":function(e,t,n,i){if(i=trim(i),_MSIE)var r="Element.getAttribute(e%1,'%2')";else r="e%1.getAttribute('%2')";r=format(r,_index,t);var a=Selector.operators[n||""];return instanceOf(a,RegExp)&&(_reg.push(new RegExp(format(a.source,rescape(_parser.unescape(i))))),a="reg[%2].test(%1)",i=_reg.length-1),"if("+format(a,r,i)+"){"}};!function(_no_shrink_){function _register(e){if(e.rows)e.b2_length=e.rows.length,e.b2_lookup="rowIndex";else if(e.cells)e.b2_length=e.cells.length,e.b2_lookup="cellIndex";else if(e.b2_indexed!=_indexed){for(var t=0,n=e.firstChild;n;)1==n.nodeType&&"!"!=n.nodeName&&(n.b2_index=++t),n=n.nextSibling;e.b2_length=t,e.b2_lookup="b2_index"}return e.b2_indexed=_indexed,e}var _byId=detect("MSIE[5-7]")?function(e,t){var n=e.all[t]||null;if(!n||n.id==t)return n;for(var i=0;i<n.length;i++)if(n[i].id==t)return n[i];return null}:function(e,t){return e.getElementById(t)},_indexed=1;Selector.parse=function(selector,simple){var cache=simple?_simple:_cache;if(!cache[selector]){_parser.exec||(_parser=new CSSParser(_parser)),_reg=[],_list=[];var fn="",selectors=_parser.escape(selector,simple).split(",");for(_group=0;_group<selectors.length;_group++){_wild=_index=_list[_group]=0,_duplicate=selectors.length>1?2:0;var block=_parser.exec(selectors[_group])||"throw;";_wild&&_MSIE&&(block+=format("if(e%1.tagName!='!'){",_index));var store=_duplicate>1?_TEST:"";block+=format(store+"r[k++]=e%1;if(s==1)return e%1;if(k===s){_query.state=[%2];_query.complete=%3;return r;",_index,"%2"),block+=Array(match(block,/\{/g).length+1).join("}"),fn+=block}fn=_parser.unescape(fn),selectors.length>1&&(fn+="r.unsorted=1;");for(var args="",state=[],total=sum(_list),i=1;i<=total;i++)args+=",a"+i,state.push("i"+i+"?(i"+i+"-1):0");if(total)for(var complete=[],k=0,i=0;i<_group;i++)k+=_list[i],_list[i]&&complete.push(format("n%1&&i%1==n%1.length",k));fn+="_query.state=[%2];_query.complete=%3;return s==1?null:r}",eval(format("var _query=function(e0,s%1){_indexed++;var r=[],p={},p0=0,reg=[%4],d=Traversal.getDocument(e0),c=d.writeln?'toUpperCase':'toString',k=0;"+fn,args,state.join(","),!total||complete.join("&&"),_reg)),cache[selector]=_query}return cache[selector]}}();var StaticNodeList=Base.extend({constructor:function(e){e=e||[],this.length=e.length,this.item=function(t){return t<0&&(t+=this.length),e[t]},e.unsorted&&e.sort(_SORTER)},length:0,forEach:function(e,t){for(var n=0;n<this.length;n++)e.call(t,this.item(n),n,this)},item:Undefined,not:function(e,t){return this.filter(not(e),t)},slice:function(e,t){return new StaticNodeList(this.map(I).slice(e,t))},"@(XPathResult)":{constructor:function(e){e&&e.snapshotItem?(this.length=e.snapshotLength,this.item=function(t){return t<0&&(t+=this.length),e.snapshotItem(t)}):this.base(e)}}});StaticNodeList.implement(Enumerable);var _matchesSelector=function(e,t){return"function"!=typeof e&&(e=bind("test",new Selector(e))),this.base(e,t)};StaticNodeList.implement({every:_matchesSelector,filter:_matchesSelector,not:_matchesSelector,some:_matchesSelector}),StaticNodeList.implement({filter:function(e,t){return new StaticNodeList(this.base(e,t))}});var _SORTER=_INDEXED?function(e,t){return e.sourceIndex-t.sourceIndex}:function(e,t){return(2&Node.compareDocumentPosition(e,t))-1};Document.implement(DocumentSelector),Element.implement(ElementSelector);var HTMLDocument=Document.extend(null,{bind:function(e){return DocumentState.createState(e),this.base(e)}}),HTMLElement=Element.extend(null,{bindings:{},tags:"*",bind:function(e){return e.classList||(e.classList=new _ElementClassList(e)),e.ownerDocument||(e.ownerDocument=Traversal.getOwnerDocument(e)),this.base(e)},extend:function(){var e=base(this,arguments);return forEach.csv(e.tags,function(t){HTMLElement.bindings[t]=e}),e}});HTMLElement.extend(null,{tags:"APPLET,EMBED",bind:I});var ClassList=Module.extend({add:function(e,t){this.has(e,t)||(e.className+=(e.className?" ":"")+t)},has:function(e,t){return new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},remove:function(e,t){var n=new RegExp("(^|\\s)"+t+"(\\s|$)","g");e.className=trim(e.className.replace(n,"$2"))},toggle:function(e,t){this[this.has(e,t)?"remove":"add"](e,t)}});_ElementClassList.prototype.toggle=function(e){this[this.has(e)?"remove":"add"](e)};var DocumentState=Base.extend({constructor:function(e){this.document=e,this.events={},this._hoverElement=e.documentElement,this.isBound=function(){return!!DOM.bind[e.base2ID]},forEach(this,function(e,t,n){/^on((DOM)?\w+|[a-z]+)$/.test(t)&&n.registerEvent(t.slice(2))})},includes:function(e,t){return t&&(e==t||Traversal.contains(e,t))},hasFocus:function(e){return e==this._focusElement},isActive:function(e){return this.includes(e,this._activeElement)},isHover:function(e){return this.includes(e,this._hoverElement)},handleEvent:function(e){return this["on"+e.type](e)},onblur:function(e){delete this._focusElement},onmouseover:function(e){this._hoverElement=e.target},onmouseout:function(e){delete this._hoverElement},onmousedown:function(e){this._activeElement=e.target},onfocus:function(e){this._focusElement=e.target},onmouseup:function(e){delete this._activeElement},registerEvent:function(e){this.document.addEventListener(e,this,!0),this.events[e]=!0},"@(document.activeElement===undefined)":{constructor:function(e){this.base(e),this.isBound()&&(e.activeElement=e.body)},onfocus:function(e){this.base(e),this.isBound()&&(this.document.activeElement=this._focusElement)},onblur:function(e){this.base(e),this.isBound()&&(this.document.activeElement=this.document.body)}},"@!(element.addEventListener)":{constructor:function(e){this.base(e);var t=new EventDispatcher(this);this._dispatch=function(n){n.target=n.target||n.srcElement||e,t.handleEvent(n)},this.handleEvent=function(e){return this["on"+e.type]&&this["on"+e.type](e),t.handleEvent(e)}},registerEvent:function(e,t){var n=this.events[e],i=_CAN_DELEGATE.test(e);if(!n||!i){n||(n=this.events[e]={}),!i&&t||(t=this.document);var r=this;t["on"+e]=function(e){e||(e=Traversal.getDefaultView(this).event),e&&r.handleEvent(e)}}return n},"@MSIE.+win":{constructor:function(e){this.base(e);var t={};this._registerForm=function(e){var n=assignID(e);t[n]||(t[n]=!0,e.attachEvent("onsubmit",this._dispatch),e.attachEvent("onreset",this._dispatch))}},fireEvent:function(e,t){t=copy(t),t.type=e,this.handleEvent(t)},registerEvent:function(e,t){var n=this.events[e],i=_CAN_DELEGATE.test(e);if(!n||!i){n||(n=this.events[e]={}),!i&&t||(t=this.document);var r=this;t.attachEvent("on"+e,function(t){t.target=t.srcElement||r.document,r.handleEvent(t),r["after"+e]&&r["after"+e](t)})}return n},onDOMContentLoaded:function(e){forEach(e.target.forms,this._registerForm,this);try{this.setFocus(this.document.activeElement)}catch(e){}},onmousedown:function(e){this.base(e),this._button=e.button},onmouseup:function(e){this.base(e),null==this._button&&this.fireEvent("mousedown",e),delete this._button},aftermouseup:function(){this._selectEvent&&(this._dispatch(this._selectEvent),delete this._selectEvent)},onfocusin:function(e){this.setFocus(e.target),this.onfocus(e)},setFocus:function(e){var t=this.events.change,n=this.events.select;if(t||n){var i=this._dispatch;if(t&&e.attachEvent("onchange",i),n){var r=this,a=function(t){r._activeElement==e?r._selectEvent=copy(t):i(t)};e.attachEvent("onselect",a)}e.attachEvent("onblur",function(){e.detachEvent("onblur",arguments.callee),t&&e.detachEvent("onchange",i),n&&e.detachEvent("onselect",a)})}},onfocusout:function(e){this.onblur(e)},onclick:function(e){var t=e.target;t.form&&this._registerForm(t.form)},ondblclick:function(e){this.fireEvent("click",e)}}}},{init:function(){assignID(document),DocumentState=this,this.createState(document),new DOMContentLoadedEvent(document)},createState:function(e){var t=e.base2ID;return this[t]||(this[t]=new this(e)),this[t]},getInstance:function(e){return this[Traversal.getDocument(e).base2ID]}});eval(this.exports)};try{NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){for(var n=0;n<this.length;n++)e.call(t,this.item(n),n,this)})}catch(e){}try{"undefined"==typeof StaticNodeList||StaticNodeList.prototype.forEach||(StaticNodeList.prototype.forEach=function(e,t){for(var n=0;n<this.length;n++)e.call(t,this.item(n),n,this)})}catch(e){}try{!function(e){"window"in e&&"document"in e&&"TextRectangle"in this&&!("width"in TextRectangle.prototype)&&Object.defineProperties(TextRectangle.prototype,{width:{get:function(){return this.right-this.left}},height:{get:function(){return this.bottom-this.top}}})}(this)}catch(e){}if(void 0===base2)throw new Error("Base2 not found. wForms 3 depends on the base2 library.");base2.DOM.HTMLElement.implement({hasClass:function(e,t){return e.classList&&e.classList.contains?e.classList.contains(t):e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))},removeClass:function(e,t){if(base2.DOM.HTMLElement.hasClass(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ").replace(/^\s+|\s+$/g,"")}},addClass:function(e,t){base2.DOM.HTMLElement.hasClass(e,t)||(e.className=(e.className+" "+t).replace(/^\s+|\s+$/g,""))}}),"undefined"==typeof wFORMS&&(wFORMS={}),wFORMS.NAME="wFORMS",wFORMS.VERSION="3.10.0",wFORMS.__repr__=function(){return"["+this.NAME+" "+this.VERSION+"]"},wFORMS.toString=function(){return this.__repr__()},wFORMS.behaviors={},wFORMS.helpers={},wFORMS.instances=[],wFORMS.initialized=!1,wFORMS.helpers.randomId=function(){var e=(new Date).getTime();e=e.toString().substr(6);for(var t=0;t<6;t++)e+=String.fromCharCode(48+Math.floor(10*Math.random()));return"id_"+e},wFORMS.helpers.getFieldValue=function(e){switch(e.tagName){case"INPUT":return"checkbox"==e.type?e.checked?e.value:null:"radio"==e.type?e.checked?e.value:null:e.value;case"SELECT":if(-1==e.selectedIndex)return null;if(e.getAttribute("multiple")){for(var t=[],n=0;n<e.options.length;n++)e.options[n].selected&&t.push(e.options[n].value);return t}return e.options[e.selectedIndex].value;case"TEXTAREA":return e.value;default:return null}},wFORMS.helpers.escapeQuerySelector=function(e){return e&&""!==e?e.replace(/\[(\d+)\]/g,function(e,t){return"\\["+t+"\\]"}):null},wFORMS.helpers.getLabel=function(e){if(!e||!e.form)return null;if(!e.form.querySelectorAll)return null;var t=e.getAttribute("id"),n=this.escapeQuerySelector(t);return l=e.form.querySelectorAll("label[for="+n+"]"),l&&l.length>=1?l.item(0).innerHTML:null},wFORMS.helpers.detectLocaleDecimalSeparator=function(){var e=1.1;return e=e.toLocaleString().substring(1,2)},wFORMS.helpers.normalizeNumberToUSLocale=function(e){return e=","==wFORMS.helpers.detectLocaleDecimalSeparator()?String(e).replace(",","."):String(e).replace(",","")},wFORMS.helpers.isNumericValue=function(e){return e=wFORMS.helpers.normalizeNumberToUSLocale(e),!(""===String(e)||!String(e).match(/^\s*(\+|-)?[0-9]*[\.]?[0-9]*\s*$/))},wFORMS.helpers.isEmptyValue=function(e){return e=String(e),""===(e=e.replace(/^\s+|\s+$/g,""))},wFORMS.helpers.getNumericValue=function(e){var t=wFORMS.helpers;t.isNumericValue(e)&&(e=t.normalizeNumberToUSLocale(e));var n=parseFloat(e);return isNaN(n)&&(n=0),n},wFORMS.helpers.getComputedStyle=function(e,t){return document.defaultView.getComputedStyle(e,"").getPropertyValue(t)},wFORMS.helpers.getForm=function(e){return e&&e.tagName&&"form"==e.tagName.toLowerCase()?(wFORMS.standardizeElement(e),e):e.form?(wFORMS.standardizeElement(e.form),e.form):e.parentNode?"form"==e.parentNode.tagName.toLowerCase()?(wFORMS.standardizeElement(e.parentNode),e.parentNode):this.getForm(e.parentNode):null},wFORMS.helpers.getLeft=function(e){for(var t=0;e.offsetParent;){try{if("relative"==document.defaultView.getComputedStyle(e,"").getPropertyValue("position"))return t;if(t>0&&"absolute"==document.defaultView.getComputedStyle(e,"").getPropertyValue("position"))return t}catch(e){}t+=e.offsetLeft,e=e.offsetParent}return!window.opera&&document.all&&document.compatMode&&"BackCompat"!=document.compatMode&&(t+=parseInt(document.body.currentStyle.marginTop)),t},wFORMS.helpers.getTop=function(e){for(var t=0;e.offsetParent;){try{if("relative"==document.defaultView.getComputedStyle(e,"").getPropertyValue("position"))return t;if(t>0&&"absolute"==document.defaultView.getComputedStyle(e,"").getPropertyValue("position"))return t}catch(e){}t+=e.offsetTop,e=e.offsetParent}return!window.opera&&document.all&&document.compatMode&&"BackCompat"!=document.compatMode&&(t+=parseInt(document.body.currentStyle.marginLeft)+1),t},wFORMS.helpers.position=function(e){var t=e.offsetLeft,n=e.offsetTop;if(e.offsetParent){var i=this.position(e.offsetParent);t+=i.left,n+=i.top}return{left:t,top:n}},wFORMS.helpers.useSpotlight=!1,wFORMS.helpers.spotlight=function(e){},wFORMS.helpers.activateStylesheet=function(e){if(document.getElementsByTagName)var t=document.getElementsByTagName("link");else if(document.styleSheets)var t=document.styleSheets;for(var n=0;t[n];n++)-1!=t[n].href.indexOf(e)&&(t[n].rel="stylesheet",t[n].title="",t[n].disabled=!0,t[n].disabled=!1)},wFORMS.helpers.contains=function(e,t){for(var n=e.length,i=0;i<n;i++)if(e[i]===t)return!0;return!1},wFORMS.helpers.isHTMLElement=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},wFORMS.helpers.deleteResumedFiles=function(e){var t=document.getElementById("tfa_uploadDelete_"+e),n=document.getElementById("tfa_uploadedFile_"+e);return t.checked=!t.checked,n.className=t.checked?"uploadedFile uploadDelete":"uploadedFile uploadKeep",!1},wFORMS.helpers.deleteResumedFilesFinder=function(e){return e||(e=document),base2.DOM.HTMLElement.querySelectorAll(e,".deleteUploadedFileCb")},wFORMS.LOADER={},wFORMS.LOADER.enabled=!1,wFORMS.LOADER.message="Please wait...",wFORMS.LOADER.spinner="",wFORMS.LOADER.speed=2,wFORMS.LOADER.show=function(e){if(wFORMS.LOADER.enabled){var t=wFORMS.LOADER.create();t.style.visibility="hidden",t.style.overflow="hidden";var n="above"==arguments[1]?e:e.nextSibling;t=e.parentNode.insertBefore(t,n),t.id="wfLoader_"+e.id,wFORMS.LOADER._id=t.id;var i=t.clientHeight;t.style.height=i+"px",wFORMS.LOADER._padding=t.clientHeight-i,t.style.height=i-wFORMS.LOADER._padding+"px",t.style.visibility="visible"}},wFORMS.LOADER.hide=function(e){if(wFORMS.LOADER.enabled&&wFORMS.LOADER._id){var t=document.getElementById(wFORMS.LOADER._id);t&&(arguments[1]?t.parentNode.removeChild(t):wFORMS.LOADER._interval=setInterval(function(){var e=t.clientHeight-wFORMS.LOADER.speed-wFORMS.LOADER._padding;e<0&&(e=0),t.style.height=e+"px",!t||t.clientHeight-wFORMS.LOADER._padding||(t.parentNode.removeChild(t),clearInterval(wFORMS.LOADER._interval))},10)),wFORMS.LOADER._id=null}},wFORMS.LOADER.create=function(){var e=document.createElement("DIV");e.className="wfLoader";var t=e.appendChild(document.createElement("DIV"));if(t.className="inner",wFORMS.LOADER.spinner){t.appendChild(document.createElement("IMG")).src=wFORMS.LOADER.spinner}return wFORMS.LOADER.message&&t.appendChild(document.createTextNode(wFORMS.LOADER.message)),e},wFORMS.onLoadHandler=function(){function e(){0!=i.length&&i.shift()()}function t(t){wFORMS.LOADER.show(t,"above"),setTimeout(function(){wFORMS.applyBehaviors(t),wFORMS.LOADER.hide(t),e()},1)}for(var n=document.getElementsByTagName("FORM"),i=[],r=0;r<n.length;r++)!function(e){"no-behavior"!=e.getAttribute("rel")&&i.push(function(){t(e)})}(n[r]);i.push(function(){wFORMS.initialized=!0}),e()},wFORMS.standardizeElement=function(e){"HTML"!=e.tagName&&(e.addEventListener||(e.addEventListener=function(e,t,n){base2.DOM.Element.addEventListener(this,e,t,n)}),e.hasClass||(e.hasClass=function(e){return-1!=(" "+this.className+" ").indexOf(" "+e+" ")}),e.removeClass||(e.removeClass=function(e){return base2.DOM.HTMLElement.removeClass(this,e)}),e.addClass||(e.addClass=function(e){return base2.DOM.HTMLElement.addClass(this,e)}))},wFORMS.applyBehaviors=function(e){if(base2.DOM.bind(e),wFORMS.behaviors.switch){var t=wFORMS.behaviors.switch.applyTo(e);wFORMS.instances.switch?(wFORMS.removeBehavior(e,"switch"),wFORMS.instances.switch.push(t)):wFORMS.instances.switch=[t]}for(var n in wFORMS.behaviors)if("switch"!=n&&wFORMS.behaviors[n].applyTo){var t=wFORMS.behaviors[n].applyTo(e);t&&t.constructor!=Array&&(t=[t]);for(var i=0;t&&i<t.length;i++)wFORMS.instances[n]?(wFORMS.removeBehavior(e,n),wFORMS.instances[n].push(t[i])):wFORMS.instances[n]=[t[i]]}wFORMS.behaviors.onApplyAll&&wFORMS.behaviors.onApplyAll(e)},wFORMS.removeBehavior=function(e,t){return null},wFORMS.getBehaviorInstance=function(e,t){if(!e||!wFORMS.instances[t])return null;for(var n=0;n<wFORMS.instances[t].length;n++)if(wFORMS.instances[t][n].target==e)return wFORMS.instances[t][n];return null};var loadIE=!1;if(loadIE||base2.DOM.Element.addEventListener(document,"DOMContentLoaded",wFORMS.onLoadHandler,!1),wFORMS.helpers.activateStylesheet("wforms-jsonly.css"),"undefined"==typeof wFORMS)throw new Error("wFORMS core not found. This behavior depends on the wFORMS core.");if(wFORMS.behaviors.hint={CSS_INACTIVE:"field-hint-inactive",CSS_ACTIVE:"field-hint",HINT_SELECTOR:'*[id$="-H"]',HINT_SUFFIX:"-H",instance:function(e){this.behavior=wFORMS.behaviors.hint,this.target=e}},wFORMS.behaviors.hint.applyTo=function(e){
var t=new wFORMS.behaviors.hint.instance(e);e.querySelectorAll||base2.DOM.bind(e);var n=e.querySelectorAll(wFORMS.behaviors.hint.HINT_SELECTOR);return n.forEach||(n.forEach=NodeList.prototype.forEach),n.forEach(function(e){var n=t.getElementByHintId(e.id);n&&(n.addEventListener||base2.DOM.bind(n),"SELECT"==n.tagName||"TEXTAREA"==n.tagName||"INPUT"==n.tagName&&"radio"!=n.type&&"checkbox"!=n.type?(n.addEventListener("focus",function(e){t.run(e,this)},!1),n.addEventListener("blur",function(e){t.run(e,this)},!1)):(n.addEventListener("mouseover",function(e){t.run(e,n)},!1),n.addEventListener("mouseout",function(e){t.run(e,n)},!1)))}),t.onApply(),t},wFORMS.behaviors.hint.instance.prototype.onApply=function(){},wFORMS.behaviors.hint.instance.prototype.run=function(e,t){var n=this.getHintElement(t);n&&(n.removeClass||base2.DOM.bind(n),"focus"==e.type||"mouseover"==e.type?(n.removeClass(wFORMS.behaviors.hint.CSS_INACTIVE),n.addClass(wFORMS.behaviors.hint.CSS_ACTIVE),wFORMS.helpers.getForm(t).hasClass("hintsSide")||this.setup(n,t)):(n.addClass(wFORMS.behaviors.hint.CSS_INACTIVE),n.removeClass(wFORMS.behaviors.hint.CSS_ACTIVE)))},wFORMS.behaviors.hint.instance.prototype.getElementByHintId=function(e){var t=e.substr(0,e.length-wFORMS.behaviors.hint.HINT_SUFFIX.length);return document.getElementById(t)},wFORMS.behaviors.hint.instance.prototype.getHintElement=function(e){var t=document.getElementById(e.id+this.behavior.HINT_SUFFIX);return t&&!t.hasClass&&base2.DOM.bind(t),t&&""!=t?t:null},wFORMS.behaviors.hint.instance.prototype.setup=function(e,t){var n=wFORMS.helpers.position(t),i=wFORMS.helpers.position(e),r={left:n.left-i.left,top:n.top-i.top};"select"==t.tagName.toLowerCase()?(e.style.left=e.offsetLeft+r.left+t.offsetWidth+"px",e.style.top=e.offsetTop+r.top+"px"):("span"==t.tagName.toLowerCase()&&(wFORMS.standardizeElement(t),t.hasClass("vertical")?r.left+=t.getBoundingClientRect().width:r.top+=t.getBoundingClientRect().height),e.style.left=e.offsetLeft+r.left+"px",e.style.top=e.offsetTop+r.top+t.offsetHeight+"px")},wFORMS.behaviors.hint.isHintId=function(e){return null!=e.match(new RegExp(wFORMS.behaviors.hint.HINT_SUFFIX+"$"))},"undefined"==typeof wFORMS)throw new Error("wFORMS core not found. This behavior depends on the wFORMS core.");if(wFORMS.behaviors.paging={SELECTOR:".wfPage",CSS_PAGE:"wfPage",CSS_CURRENT_PAGE:"wfCurrentPage",CSS_BUTTON_NEXT:"wfPageNextButton",CSS_BUTTON_PREVIOUS:"wfPagePreviousButton",CSS_BUTTON_PLACEHOLDER:"wfPagingButtons",CSS_PAGETAB:"wfPageTab",CSS_TABS:"wfTab",CSS_HIDDENTABS:"wfHiddenTab",CSS_TABSID:"wfTabNav",CSS_TABNAVLABEL:"wfTabNavLabel",CSS_TABSCURRENT:"wfTabCurrentPage",CSS_TABSEPARATOR_SPAN:"wfTabSep",CSS_TABSEPARATOR:" | ",ID_BUTTON_NEXT_PREFIX:"wfPageNextId",ID_BUTTON_PREVIOUS_PREFIX:"wfPagePreviousId",CSS_SUBMIT_HIDDEN:"wfHideSubmit",ID_PAGE_PREFIX:"wfPgIndex-",ID_PLACEHOLDER_SUFFIX:"-buttons",ATTR_INDEX:"wfPageIndex_activate",CAPTCHA_ERROR:"#tfa_captcha_text-E",MESSAGES:{CAPTION_NEXT:"Next Page",CAPTION_PREVIOUS:"Previous Page",CAPTION_UNLOAD:"Any data entered on ANY PAGE of this form will be LOST.",NAV_LABEL:"Page: ",TAB_LABEL:"Page "},showTabNavigation:!1,runValidationOnPageNext:!0,warnOnUnload:!0,onPageNext:function(){},onPagePrevious:function(){},onPageChange:function(){},instance:function(e){this.behavior=wFORMS.behaviors.paging,this.target=e,this.currentPageIndex=1}},wFORMS.behaviors.paging.applyTo=function(e){var t=null,n=wFORMS.behaviors.paging;n.showTabNavigation&&(n.runValidationOnPageNext=!1);var i=wFORMS.behaviors.validation&&wFORMS.behaviors.paging.runValidationOnPageNext;if(base2.DOM.Element.querySelectorAll(e,wFORMS.behaviors.paging.SELECTOR).forEach(function(r){t||(t=new wFORMS.behaviors.paging.instance(e));var a=t.getOrCreatePlaceHolder(r),o=wFORMS.behaviors.paging.getPageIndex(r);if(1==o){var s=base2.DOM.bind(a.appendChild(n._createNextPageButton(o)));i?s.addEventListener("click",function(e){wFORMS.getBehaviorInstance(t.target,"validation").run(e,r)&&t.run(e,s)},!1):s.addEventListener("click",function(e){t.run(e,s)},!1),wFORMS.behaviors.paging.showPage(r)}else{var s=base2.DOM.bind(n._createPreviousPageButton(o));if(a.insertBefore(s,a.firstChild),s.addEventListener("click",function(e){t.run(e,s)},!1),!wFORMS.behaviors.paging.isLastPageIndex(o,!0)){var l=base2.DOM.bind(a.appendChild(n._createNextPageButton(o)));i?l.addEventListener("click",function(e){wFORMS.getBehaviorInstance(t.target,"validation").run(e,r)&&t.run(e,l)},!1):l.addEventListener("click",function(e){t.run(e,l)},!1)}}}),t){if(p=t.findNextPage(0),t.currentPageIndex=0,t.activatePage(wFORMS.behaviors.paging.getPageIndex(p),!1),window.onbeforeunload||(window.onbeforeunload=function(){if(t.behavior.warnOnUnload)return t.behavior.MESSAGES.CAPTION_UNLOAD}),t.behavior.showTabNavigation){var r=wFORMS.behaviors.condition.onHide;wFORMS.behaviors.condition.onHide=function(e){r(),t.generateTabs()};var a=wFORMS.behaviors.condition.onShow;wFORMS.behaviors.condition.onShow=function(e){a(),t.generateTabs()},t.generateTabs()}if(base2.DOM.Element.querySelector(document,wFORMS.behaviors.paging.CAPTCHA_ERROR)){for(var o=1,s=1;s<100;s++)if(t.behavior.isLastPageIndex(s)){o=s;break}t.jumpTo(o)}t.onApply(),base2.DOM.Element.addEventListener(e,"submit",function(e){t.onSubmit(e,t)})}return t},wFORMS.behaviors.paging.instance.prototype.onApply=function(){},wFORMS.behaviors.paging.instance.prototype.onSubmit=function(e,t){if(!wFORMS.behaviors.paging.isLastPageIndex(t.currentPageIndex)&&wFORMS.behaviors.paging.runValidationOnPageNext){var n=wFORMS.behaviors.paging.getPageByIndex(t.currentPageIndex),i=t.findNextPage(t.currentPageIndex);if(wFORMS.getBehaviorInstance(t.target,"validation").run(e,n)){t.activatePage(t.currentPageIndex+1);var r=base2.DOM.Element.querySelector(i,"input, textarea, select");r&&r.focus()}e.stopPropagation(),e.preventDefault(),e.pagingStopPropagation=!0}else window.onbeforeunload&&(window.onbeforeunload=null)},wFORMS.behaviors.paging.instance.prototype.onPageNext=function(e){this.behavior.onPageNext(e)},wFORMS.behaviors.paging.instance.prototype.onPagePrevious=function(e){this.behavior.onPagePrevious(e)},wFORMS.behaviors.paging.instance.prototype.onPageChange=function(e){this.behavior.onPageChange(e)},wFORMS.behaviors.paging.getPageIndex=function(e){if(e&&e.id){var t=e.id.replace(new RegExp(wFORMS.behaviors.paging.ID_PAGE_PREFIX+"(\\d+)"),"$1");return t=parseInt(t),!isNaN(t)&&t}return!1},wFORMS.behaviors.paging.isElementVisible=function(e){for(;e&&"BODY"!=e.tagName;){if(e.className){if(-1!=e.className.indexOf(this.CSS_CURRENT_PAGE))return!0;if(-1!=e.className.indexOf(this.CSS_PAGE))return!1}e=e.parentNode}return!0},wFORMS.behaviors.paging._createNextPageButton=function(e){var t=this.createNextPageButton();return t.setAttribute(this.ATTR_INDEX,e+1),t.id=this.ID_BUTTON_NEXT_PREFIX+e,t},wFORMS.behaviors.paging.createNextPageButton=function(){var e=document.createElement("input");return e.setAttribute("value",this.MESSAGES.CAPTION_NEXT),e.type="button",e.className=this.CSS_BUTTON_NEXT,e},wFORMS.behaviors.paging._createPreviousPageButton=function(e){var t=this.createPreviousPageButton();return t.setAttribute(this.ATTR_INDEX,e-1),t.id=this.ID_BUTTON_PREVIOUS_PREFIX+e,t},wFORMS.behaviors.paging.createPreviousPageButton=function(){var e=document.createElement("input");return e.setAttribute("value",this.MESSAGES.CAPTION_PREVIOUS),e.type="button",e.className=this.CSS_BUTTON_PREVIOUS,e},wFORMS.behaviors.paging.instance.prototype.getOrCreatePlaceHolder=function(e){var t=e.id+this.behavior.ID_PLACEHOLDER_SUFFIX,n=document.getElementById(t);return n||(n=e.appendChild(document.createElement("div")),n.id=t,n.className=this.behavior.CSS_BUTTON_PLACEHOLDER),n},wFORMS.behaviors.paging.hidePage=function(e){e&&(e.removeClass||(e.removeClass=function(e){return base2.DOM.HTMLElement.removeClass(this,e)}),e.addClass||(e.addClass=function(e){return base2.DOM.HTMLElement.addClass(this,e)}),e.removeClass(wFORMS.behaviors.paging.CSS_CURRENT_PAGE),e.addClass(wFORMS.behaviors.paging.CSS_PAGE))},wFORMS.behaviors.paging.showPage=function(e){e&&(e.removeClass||(e.removeClass=function(e){return base2.DOM.HTMLElement.removeClass(this,e)}),e.removeClass(wFORMS.behaviors.paging.CSS_PAGE),e.addClass||(e.addClass=function(e){return base2.DOM.HTMLElement.addClass(this,e)}),e.addClass(wFORMS.behaviors.paging.CSS_CURRENT_PAGE))},wFORMS.behaviors.paging.instance.prototype.activatePage=function(e){if(arguments.length>1)var t=arguments[1];else var t=!0;if(e==this.currentPageIndex)return!1;if((e=parseInt(e))>this.currentPageIndex)var n=this.findNextPage(this.currentPageIndex);else var n=this.findPreviousPage(this.currentPageIndex);if(n){var i=this,e=i.behavior.getPageIndex(n);i.setupManagedControls(e),i.behavior.hidePage(i.behavior.getPageByIndex(i.currentPageIndex)),i.behavior.showPage(n);var r=i.currentPageIndex;i.currentPageIndex=e,t&&(n.scrollIntoView?n.scrollIntoView():location.hash="#"+wFORMS.behaviors.paging.ID_PAGE_PREFIX+e),i.labelCurrentPageTab(n),i.onPageChange(n),e>r?i.onPageNext(n):i.onPagePrevious(n)}},wFORMS.behaviors.paging.instance.prototype.setupManagedControls=function(e){e||(e=this.currentPageIndex);var t=wFORMS.behaviors.paging;t.isFirstPageIndex(e)?(ctrl=t.getPreviousButton(e))&&(ctrl.style.visibility="hidden"):(ctrl=t.getPreviousButton(e))&&(ctrl.style.visibility="visible"),t.isLastPageIndex(e)?((ctrl=t.getNextButton(e))&&(ctrl.style.visibility="hidden"),this.showSubmitButtons()):((ctrl=t.getNextButton(e))&&(ctrl.style.visibility="visible"),this.hideSubmitButtons())},wFORMS.behaviors.paging.instance.prototype.showSubmitButtons=function(){for(var e=this.target.getElementsByTagName("input"),t=0;t<e.length;t++)"submit"==e[t].type&&(e[t].className=e[t].className.replace(new RegExp("(^|\\s)"+this.behavior.CSS_SUBMIT_HIDDEN+"(\\s|$)","g"),"$2"))},wFORMS.behaviors.paging.instance.prototype.hideSubmitButtons=function(){for(var e=this.target.getElementsByTagName("input"),t=0;t<e.length;t++)"submit"==e[t].type&&(new RegExp("(^|\\s)"+this.behavior.CSS_SUBMIT_HIDDEN+"(\\s|$)").test(e[t].className)||(e[t].className+=" "+this.behavior.CSS_SUBMIT_HIDDEN))},wFORMS.behaviors.paging.getPageByIndex=function(e){var t=document.getElementById(wFORMS.behaviors.paging.ID_PAGE_PREFIX+e);return!!t&&base2.DOM.bind(t)},wFORMS.behaviors.paging.getNextButton=function(e){return document.getElementById(wFORMS.behaviors.paging.ID_BUTTON_NEXT_PREFIX+e)},wFORMS.behaviors.paging.getPreviousButton=function(e){return document.getElementById(wFORMS.behaviors.paging.ID_BUTTON_PREVIOUS_PREFIX+e)},wFORMS.behaviors.paging.isLastPageIndex=function(e,t){e=parseInt(e)+1;var n=wFORMS.behaviors.paging,i=n.getPageByIndex(e);if((_b=wFORMS.behaviors.condition)&&!t)for(;i&&_b.hasOffState(i);)e++,i=n.getPageByIndex(e);return!i},wFORMS.behaviors.paging.isFirstPageIndex=function(e,t){e=parseInt(e)-1;var n=wFORMS.behaviors.paging,i=n.getPageByIndex(e);if((_b=wFORMS.behaviors.condition)&&!t)for(;i&&_b.hasOffState(i);)e--,i=n.getPageByIndex(e);return!i},wFORMS.behaviors.paging.instance.prototype.findNextPage=function(e){e=parseInt(e)+1;var t=wFORMS.behaviors.paging,n=t.getPageByIndex(e);if(_b=wFORMS.behaviors.condition)for(;n&&_b.hasOffState(n);)e++,n=t.getPageByIndex(e);return n},wFORMS.behaviors.paging.instance.prototype.findPreviousPage=function(e){e=parseInt(e)-1;var t=wFORMS.behaviors.paging,n=t.getPageByIndex(e);if(_b=wFORMS.behaviors.condition)for(;n&&_b.hasOffState(n);)e--,n=t.getPageByIndex(e);return n||!1},wFORMS.behaviors.paging.instance.prototype.jumpTo=function(e){var t=this,n=e;if(t.currentPageIndex!=n&&(t.behavior.hidePage(t.behavior.getPageByIndex(t.currentPageIndex)),t.setupManagedControls(n),t.behavior.showPage(t.behavior.getPageByIndex(n)),t.currentPageIndex=n),vInstance=wFORMS.getBehaviorInstance(t.target,"validation"),vInstance&&vInstance.errorPages&&vInstance.errorPages[n]&&!arguments[1]){var i=document.getElementById(vInstance.errorPages[n][0]);i.scrollIntoView&&setTimeout(function(){i.scrollIntoView()},1)}var r=t.behavior.getPageByIndex(n);this.labelCurrentPageTab(r),this.onPageChange(r)},wFORMS.behaviors.paging.instance.prototype.generateTabs=function(e){var t=this;if(document.getElementById(this.behavior.CSS_TABSID)){var n=document.getElementById(this.behavior.CSS_TABSID);n.parentNode.removeChild(n)}var i=document.createElement("div");i.id=this.behavior.CSS_TABSID;var r=document.createTextNode(this.behavior.MESSAGES.NAV_LABEL),a=document.createElement("span");a.className=this.behavior.CSS_TABNAVLABEL,a.appendChild(r),i.appendChild(a),e?e.appendChild(i):this.target.parentNode.insertBefore(i,this.target);var o=base2.DOM.Element.querySelectorAll(this.target,"."+this.behavior.CSS_PAGE+", ."+this.behavior.CSS_CURRENT_PAGE);o.forEach(function(e,n){if(wFORMS.behaviors.condition.hasOffState(e)){var r=document.createElement("span");r.setAttribute("class",t.behavior.CSS_TABS+" "+t.behavior.CSS_HIDDENTABS),r.setAttribute("id",t.behavior.CSS_PAGETAB+"_"+(n+1))}else{var r=document.createElement("a");r.setAttribute("class",t.behavior.CSS_TABS),r.setAttribute("id",t.behavior.CSS_PAGETAB+"_"+(n+1)),r.setAttribute("href","#"),base2.DOM.Element.addEventListener(r,"click",function(){return t.jumpTo(n+1),!1})}var a=base2.DOM.Element.querySelector(e,"h4"),s=null;a&&(s=a.innerText?a.innerText:a.textContent),r.setAttribute("title",s||t.behavior.MESSAGES.TAB_LABEL+(n+1));var l=document.createTextNode(n+1);if(r.appendChild(l),n<o.length-1){var c=document.createElement("span");c.className=t.behavior.CSS_TABSEPARATOR_SPAN;var u=document.createTextNode(t.behavior.CSS_TABSEPARATOR);c.appendChild(u)}i.appendChild(r),c&&i.appendChild(c)});var s=t.behavior.getPageByIndex(1);return this.labelCurrentPageTab(s),this.onPageChange(s),o},wFORMS.behaviors.paging.instance.prototype.labelCurrentPageTab=function(e){_b=this,currentIndex=this.currentPageIndex,base2.DOM.Element.querySelectorAll(this.target.parentNode,'a[id^="'+this.behavior.CSS_PAGETAB+'"]').forEach(function(e){e.removeClass&&e.hasClass&&e.addClass||wFORMS.standardizeElement(e),e.removeClass(_b.behavior.CSS_TABSCURRENT),e.getAttribute("id")==_b.behavior.CSS_PAGETAB+"_"+currentIndex&&e.addClass(_b.behavior.CSS_TABSCURRENT)})},wFORMS.behaviors.paging.instance.prototype.run=function(e,t){this.activatePage(t.getAttribute(wFORMS.behaviors.paging.ATTR_INDEX))},wFORMS.behaviors.paging.helpers={},wFORMS.behaviors.paging.helpers.findPage=function(e){return e&&(e.className.match("wfPage")||e.className.match("wfCurrentPage"))?(wFORMS.standardizeElement(e),e):e&&e.parentNode?e.parentNode.className.match("wfPage")||e.parentNode.className.match("wfCurrentPage")?(wFORMS.standardizeElement(e.parentNode),e.parentNode):wFORMS.behaviors.paging.helpers.findPage(e.parentNode):null},"undefined"==typeof wFORMS)throw new Error("wFORMS core not found. This behavior depends on the wFORMS core.");wFORMS.behaviors.repeat={SELECTOR_REPEAT:'*[class~="repeat"]',SELECTOR_REMOVEABLE:'*[class~="removeable"]',ID_SUFFIX_DUPLICATE_LINK:"-wfDL",ID_SUFFIX_COUNTER:"-RC",CSS_DUPLICATE_LINK:"duplicateLink",CSS_DUPLICATE_SPAN:"duplicateSpan",CSS_DELETE_LINK:"removeLink",CSS_DELETE_SPAN:"removeSpan",CSS_REMOVEABLE:"removeable",CSS_REPEATABLE:"repeat",ATTR_DUPLICATE:"wfr__dup",ATTR_DUPLICATE_ELEM:"wfr__dup_elem",ATTR_LABEL:"data-repeatlabel",ATTR_HANDLED:"wfr_handled",ATTR_MASTER_SECTION:"wfr__master_sec",ATTR_LINK_SECTION_ID:"wfr_sec_id",MESSAGES:{ADD_CAPTION:"Add another response",ADD_TITLE:"Will duplicate this question or section.",REMOVE_CAPTION:"Remove",REMOVE_TITLE:"Will remove this question or section",REMOVE_WARNING:"Are you sure you want to remove this section? All data in this section will be lost."},UPDATEABLE_ATTR_ARRAY:["id","name","for"],preserveRadioName:!1,CSS_PRESERVE_RADIO_NAME:"preserveRadioName",onRepeat:function(e){},onRemove:function(e){},allowRepeat:function(e,t){return!0},_callbacks:{onRepeat:[],onRemove:[],onMasterIdChange:[],onRepeatIdCreate:[]},instance:function(e){this.behavior=wFORMS.behaviors.repeat,this.target=e,this._idUpdates={master:{},repeat:{}}}};var _b=wFORMS.behaviors.repeat,_i=wFORMS.behaviors.repeat.instance;if(_b.applyTo=function(e){var t=this,n=new Array;if(e.querySelectorAll||base2.DOM.bind(e),wFORMS.behaviors.repeat.getMasterSection(e)){var i=(Array(),wFORMS.behaviors.repeat.getMasterSection(e));i.querySelectorAll||base2.DOM.bind(i)}if(e.querySelectorAll(this.SELECTOR_REPEAT).forEach(function(e,i){if(!t.isHandled(e)){e.id||(e.id=wFORMS.helpers.randomId());var r=new t.instance(e),a=r.getOrCreateRepeatLink(e);a.addEventListener("click",function(e){r.run(e,a)},!1),r.setElementHandled(e),n.push(r)}}),e.hasClass||(e.hasClass=function(e){return base2.DOM.HTMLElement.hasClass(this,e)}),e.hasClass(this.CSS_REMOVEABLE)){var r=this.getMasterSection(e),a=wFORMS.getBehaviorInstance(r,"repeat");a?a.getOrCreateRemoveLink(e):n[0]&&n[0].getOrCreateRemoveLink(e)}e.querySelectorAll(this.SELECTOR_REMOVEABLE).forEach(function(e){var t=wFORMS.behaviors.repeat.getMasterSection(e),i=wFORMS.getBehaviorInstance(t,"repeat");i?i.getOrCreateRemoveLink(e):n[0]&&n[0].getOrCreateRemoveLink(e)});for(var o=0;o<n.length;o++)n[o].onApply();return n},_i.prototype.onApply=function(){},_i.prototype.counterRepeatedFields=1,_i.prototype.getOrCreateRepeatLink=function(e){var t=e.id+this.behavior.ID_SUFFIX_DUPLICATE_LINK,n=document.getElementById(t);if(!n||""==n){n=this.createRepeatLink(t);var i=document.createElement("div");if(i.className=this.behavior.CSS_DUPLICATE_SPAN,n=i.appendChild(n),"TR"==e.tagName.toUpperCase()){var r=e.parentNode.parentNode;r.style.marginBottom="0px";for(var a=r.nextSibling;a&&1!=a.nodeType;)a=a.nextSibling;a?r.parentNode.insertBefore(i,a):r.parentNode.appendChild(i)}else e.parentNode.insertBefore(i,this.getLastRepeat(e).nextSibling)}return base2.DOM.bind(n)},_i.prototype.getLastRepeat=function(e){var t=e.parentNode;t.querySelectorAll||base2.DOM.bind(t);var n=e.id.match("^.[^[]+")[0],i=t.querySelectorAll(wFORMS.behaviors.repeat.SELECTOR_REMOVEABLE+"[id^="+n+"]");return i.length>0?i.item(i.length-1):e},_i.prototype.createRepeatLink=function(e){var t=document.createElement("A");t.id=e,t.setAttribute("href","#"),t.className=this.behavior.CSS_DUPLICATE_LINK,t.setAttribute("title",this.behavior.MESSAGES.ADD_TITLE);var n=this.target.getAttribute(wFORMS.behaviors.repeat.ATTR_LABEL);return t.appendChild(document.createElement("span").appendChild(document.createTextNode(n||this.behavior.MESSAGES.ADD_CAPTION))),t},_i.prototype.getOrCreateRemoveLink=function(e){var t=this.createRemoveLink(e.id);if("TR"==e.tagName){var n=e.getElementsByTagName("TD");n[n.length-1].appendChild(t)}else e.insertBefore(t,e.children[0])},_i.prototype.createRemoveLink=function(e){var t=document.createElement("a");t.id=e+this.behavior.ID_SUFFIX_DUPLICATE_LINK,t.setAttribute("href","#"),t.className=this.behavior.CSS_DELETE_LINK,t.setAttribute("title",this.behavior.MESSAGES.REMOVE_TITLE),t.setAttribute(this.behavior.ATTR_LINK_SECTION_ID,e);var n=document.createElement("span");n.appendChild(document.createTextNode(this.behavior.MESSAGES.REMOVE_CAPTION)),t.appendChild(n);var i=this;t.onclick=function(e){return i.onRemoveLinkClick(e,t),!1};var n=document.createElement("span");return n.className=this.behavior.CSS_DELETE_SPAN,n.appendChild(t),n},_i.prototype.counterRepeatedFields=1,_i.prototype.duplicateSection=function(e){if(!this.behavior.allowRepeat(e,this))return!1;this.updateMasterSection(e);var t=e.cloneNode(!0),n=this.getNextDuplicateIndex(this.target),i=this.createSuffix(e,n);this.updateDuplicatedSection(t,n,i),t=e.parentNode.insertBefore(t,this.getInsertNode(e)),this.callRepeatCompleteObservers(e,t),wFORMS.applyBehaviors(t),this.counterRepeatedFields++;var r=e.getAttribute("data-repeatlimit"),a=e.id+this.behavior.ID_SUFFIX_DUPLICATE_LINK;null!=r&&this.counterRepeatedFields>=r&&(document.getElementById(a).style.display="none"),this.behavior.onRepeat(t),wFORMS.helpers.spotlight(t)},_i.prototype.removeSection=function(e){if(e){var t=this.behavior.getMasterSection(e);this.logRemovedSection(e);var e=e.parentNode.removeChild(e);this.callRemoveCompleteObservers(e),this.counterRepeatedFields--;var n=e.getAttribute("data-repeatlimit"),i=t.id+this.behavior.ID_SUFFIX_DUPLICATE_LINK;null!=n&&this.counterRepeatedFields<=n&&(document.getElementById(i).style.display=""),this.behavior.onRemove(e)}},_i.prototype.logRemovedSection=function(e){if(e&&e.id){var t=e.id,n=this.behavior.getMasterSection(e),i=this.getOrCreateCounterField(n);if(i){var r=i.value.split("|"),a=[];r[1]&&(a=r[1].split(",")),r=r[0],a.push(t),i.value=r+"|"+a.join(",")}}},_i.prototype.getInsertNode=function(e){var t=e.nextSibling;for(t&&1==t.nodeType&&!t.hasClass&&(t.hasClass=function(e){return base2.DOM.HTMLElement.hasClass(this,e)});t&&(1!=t.nodeType||t.hasClass(this.behavior.CSS_REMOVEABLE));)(t=t.nextSibling)&&1==t.nodeType&&!t.hasClass&&(t.hasClass=function(e){return base2.DOM.HTMLElement.hasClass(this,e)});return t},_i.prototype.onRemoveLinkClick=function(e,t){if(confirm(this.behavior.MESSAGES.REMOVE_WARNING)){var n=document.getElementById(t.getAttribute(this.behavior.ATTR_LINK_SECTION_ID));this.removeSection(n),e&&e.preventDefault()}},_i.prototype.updateMasterSection=function(e){if(1==e.doItOnce)return!0;e.doItOnce=!0;var t=e.id,n=this.createSuffix(e);e.id=this.clearSuffix(e.id)+n,e.id!=t&&this.callMasterIdChangeObservers(t,e.id),this.updateMasterElements(e,n,t)},_i.prototype.updateMasterElements=function(e,t,n){if(e&&1==e.nodeType){if(e.hasClass||(e.hasClass=function(e){return base2.DOM.HTMLElement.hasClass(this,e)}),e.hasClass(this.behavior.CSS_REPEATABLE)&&n!=e.id){document.getElementById(n+this.behavior.ID_SUFFIX_DUPLICATE_LINK).id=n+t+this.behavior.ID_SUFFIX_DUPLICATE_LINK}for(var i=e.childNodes,r=0;r<i.length;r++){var a=i[r];if(1==a.nodeType){a.hasClass||(a.hasClass=function(e){return base2.DOM.HTMLElement.hasClass(this,e)});var o=t;a.hasClass(this.behavior.CSS_REPEATABLE)&&(t+="[0]");var n=a.id;if(!a.hasClass(this.behavior.CSS_REMOVEABLE)){for(var s=0;s<this.behavior.UPDATEABLE_ATTR_ARRAY.length;s++){var l=this.behavior.UPDATEABLE_ATTR_ARRAY[s],c=this.clearSuffix(a.getAttribute(l));if(c)if("id"==l&&wFORMS.behaviors.hint&&wFORMS.behaviors.hint.isHintId(a.id))a.id=c.replace(new RegExp("(.*)("+wFORMS.behaviors.hint.HINT_SUFFIX+")$"),"$1"+t+"$2");else if("id"==l&&wFORMS.behaviors.validation&&wFORMS.behaviors.validation.isErrorPlaceholderId(a.id))a.id=c.replace(new RegExp("(.*)("+wFORMS.behaviors.validation.ERROR_PLACEHOLDER_SUFFIX+")$"),"$1"+t+"$2");else if("id"==l){var u=c.substr(-2);a.id="-L"==u||"-D"==u||"-R"==u?c.substr(0,c.length-2)+t+u:c+t}else"name"==l?a.name=c+t:a.setAttribute(l,c+t)}this.updateMasterElements(a,t,n)}a.id!=n&&this.callMasterIdChangeObservers(n,a.id),t=o}}}},_i.prototype.updateDuplicatedSection=function(e,t,n){e[this.behavior.ATTR_MASTER_SECTION]=e.id;var i=e.id;if(e.id=this.clearSuffix(e.id)+n,e.className=e.className.replace(this.behavior.CSS_REPEATABLE,this.behavior.CSS_REMOVEABLE),e.hasClass||(e.hasClass=function(e){return base2.DOM.HTMLElement.hasClass(this,e)}),e.hasClass(this.behavior.CSS_PRESERVE_RADIO_NAME))var r=!0;else var r=this.behavior.preserveRadioName;e.id!=i&&this.callRepeatIdCreateObservers(i,e.id),this.updateSectionChildNodes(e,n,r)},_i.prototype.updateSectionChildNodes=function(e,t,n){e.doItOnce&&(e.doItOnce=null);for(var i=new Array,r=0;e&&e.childNodes&&e.childNodes[r];){var a=e.childNodes[r];if(r++,1==a.nodeType)if(a.hasClass||(a.hasClass=function(e){return base2.DOM.HTMLElement.hasClass(this,e)}),this.behavior.isDuplicate(a))i.push(a);else if(a.hasClass(this.behavior.CSS_DUPLICATE_SPAN))i.push(a);else if(a.hasClass(this.behavior.CSS_DUPLICATE_LINK))i.push(a);else if(a.id.match("-R$")&&"hidden"==a.type)i.push(a);else if(a.hasClass("uploadedFile"))i.push(a);else{"INPUT"==a.tagName&&"file"==a.type&&"none"==a.style.display&&(a.style.display=""),"INPUT"==a.tagName&&"button"!=a.type||"TEXTAREA"==a.tagName?"radio"!=a.type&&"checkbox"!=a.type?a.value="":a.checked=!1:"SELECT"==a.tagName&&(a.selectedIndex=-1);var o=a.id;if("INPUT"==a.tagName&&a.type,!1){var s='<INPUT type="radio" name="'+a.name+t+'"></INPUT>',l=a.parentNode.insertBefore(document.createElement(s),a);l.id=a.id,l.className=a.className,l.value=a.value,a=a.parentNode.removeChild(a);for(var c=this.behavior.UPDATEABLE_ATTR_ARRAY.length,u=0;u<c;u++){var h=this.behavior.UPDATEABLE_ATTR_ARRAY[u],d=a.getAttribute(h);l.setAttribute(h,d)}a=l,a.hasClass||(a.hasClass=function(e){return base2.DOM.HTMLElement.hasClass(this,e)})}this.updateAttributes(a,t,n),a.id!=o&&this.callRepeatIdCreateObservers(o,a.id),a.hasClass(this.behavior.CSS_REPEATABLE)?(a.id=a.id+"[0]",this.updateSectionChildNodes(a,t+"[0]",n)):this.updateSectionChildNodes(a,t,n)}}for(var r=0;r<i.length;r++){var a=i[r];a.clearAttributes&&a.clearAttributes(!1),a.parentNode&&a.parentNode.removeChild(a)}},_i.prototype.createSuffix=function(e,t){var n="["+(t||"0")+"]",i=/\[(\d+)\]$/;for(e=e.parentNode;e&&e.tagName;){if(e.hasClass||(e.hasClass=function(e){return base2.DOM.HTMLElement.hasClass(this,e)}),e.hasClass(this.behavior.CSS_REPEATABLE)||e.hasClass(this.behavior.CSS_REMOVEABLE)){var r=i.exec(e.id);r&&(r=r[1]),n="["+(r||"0")+"]"+n}e=e.parentNode}return n},_i.prototype.clearSuffix=function(e){if(e)return e=e.replace(/(\[\d+\])+(\-[RHELD])?$/,"$2")},_i.prototype.updateAttributes=function(e,t,n){var i=wFORMS.behaviors.hint&&wFORMS.behaviors.hint.isHintId(e.id),r=wFORMS.behaviors.validation&&wFORMS.behaviors.validation.isErrorPlaceholderId(e.id);this.setInDuplicateGroup(e),this.behavior.isHandled(e)&&this.removeHandled(e),e.disabled&&(e.disabled=!1),wFORMS.behaviors.switch&&wFORMS.behaviors.switch.isHandled(e)&&wFORMS.behaviors.switch.removeHandle(e),wFORMS.behaviors.calculation&&wFORMS.behaviors.calculation.isHandled(e)&&wFORMS.behaviors.calculation.removeHandledFlag(e);for(var a=this.behavior.UPDATEABLE_ATTR_ARRAY.length,o=0;o<a;o++){var s=this.behavior.UPDATEABLE_ATTR_ARRAY[o],l=this.clearSuffix(e.getAttribute(s));if(l&&("name"!=s||"INPUT"!=e.tagName||!n))if(r&&"id"==s)e.id=l.replace(new RegExp("(.*)("+wFORMS.behaviors.validation.ERROR_PLACEHOLDER_SUFFIX+")$"),"$1"+t+"$2");else if(i&&"id"==s)e.id=l.replace(new RegExp("(.*)("+wFORMS.behaviors.hint.HINT_SUFFIX+")$"),"$1"+t+"$2");else if("id"==s){var c=l.substr(-2);e.id="-L"==c||"-D"==c||"-R"==c?l.substr(0,l.length-2)+t+c:l+t}else"name"==s?e.name=l+t:e.setAttribute(s,l+t)}},_i.prototype.getNextDuplicateIndex=function(e){var t=this.getOrCreateCounterField(e),n=t.value.split("|"),i=[];n[1]&&(i=n[1].split(",")),n=n[0];var r=parseInt(n)+1;return t.value=r+(i.length>0?"|"+i.join(","):""),r},_i.prototype.getOrCreateCounterField=function(e){var t=e.id+this.behavior.ID_SUFFIX_COUNTER,n=document.getElementById(t);if(!n||""==n){n=this.createCounterField(t);for(var i=e.parentNode;i&&"FORM"!=i.tagName.toUpperCase();)i=i.parentNode;i.appendChild(n)}return n},_i.prototype.createCounterField=function(e){return cElem=document.createElement("input"),cElem.id=e,cElem.setAttribute("type","hidden"),cElem.setAttribute("name",e),cElem.value="0",cElem},_i.prototype.getSectionsCount=function(){return!this.behavior.isDuplicate(this.target)&&parseInt(this.getOrCreateCounterField(this.target).value.split("|")[0])+1},_i.prototype.setInDuplicateGroup=function(e){return e.setAttribute(this.behavior.ATTR_DUPLICATE_ELEM,!0)},_i.prototype.setElementHandled=function(e){return e.setAttribute(this.behavior.ATTR_HANDLED,!0)},_i.prototype.removeHandled=function(e){return e.removeAttribute(this.behavior.ATTR_HANDLED)},_b.isDuplicate=function(e){return e.hasClass||(e.hasClass=function(e){return base2.DOM.HTMLElement.hasClass(this,e)}),e.hasClass(this.CSS_REMOVEABLE)},_b.isMaster=function(e){return e.hasClass||(e.hasClass=function(e){return base2.DOM.HTMLElement.hasClass(this,e)}),e.hasClass(this.CSS_REPEATABLE)},_b.isInDuplicateGroup=function(e){return!!e.getAttribute(this.ATTR_DUPLICATE_ELEM)},_b.getRepeatedElement=function(e){for(;e&&1==e.nodeType&&"BODY"!=e.tagName;){if(base2.DOM.HTMLElement.hasClass(e,this.CSS_REMOVEABLE)||base2.DOM.HTMLElement.hasClass(e,this.CSS_REPEATABLE))return e;e=e.parentNode}return null},_b.isHandled=function(e){return e.getAttribute(this.ATTR_HANDLED)},_b.getMasterSection=function(e){if(!this.isDuplicate(e))return!1;if(e[this.ATTR_MASTER_SECTION])return document.getElementById(e[this.ATTR_MASTER_SECTION]);for(e=e.previousSibling;e&&(1!=e.nodeType||!this.isMaster(e));)e=e.previousSibling;return e},_b.observeMasterIdChange=function(e){this.stopObservingMasterIdChange(e),this._callbacks.onMasterIdChange.push(e)},_b.stopObservingMasterIdChange=function(e){for(var t=0;t<this._callbacks.onMasterIdChange.length;t++)if(this._callbacks.onMasterIdChange[t].toString()==e.toString())return void this._callbacks.onMasterIdChange.splice(t,1)},_i.prototype.callMasterIdChangeObservers=function(e,t){this._idUpdates.master[e]=t;for(var n=0;n<this.behavior._callbacks.onMasterIdChange.length;n++)this.behavior._callbacks.onMasterIdChange[n].call(window,e,t)},_b.observeRepeatIdCreate=function(e){this.stopObservingRepeatIdCreate(e),this._callbacks.onRepeatIdCreate.push(e)},_b.stopObservingRepeatIdCreate=function(e){for(var t=0;t<this._callbacks.onRepeatIdCreate.length;t++)if(this._callbacks.onRepeatIdCreate[t].toString()==e.toString())return void this._callbacks.onRepeatIdCreate.splice(t,1)},_i.prototype.callRepeatIdCreateObservers=function(e,t){this._idUpdates.repeat[e]=t;for(var n=0;n<this.behavior._callbacks.onRepeatIdCreate.length;n++)this.behavior._callbacks.onRepeatIdCreate[n].call(window,e,t)},_b.observeRepeatComplete=function(e){this.stopObservingRepeatComplete(e),this._callbacks.onRepeat.push(e)},_b.stopObservingRepeatComplete=function(e){for(var t=0;t<this._callbacks.onRepeat.length;t++)if(this._callbacks.onRepeat[t].toString()==e.toString())return void this._callbacks.onRepeat.splice(t,1)},_i.prototype.callRepeatCompleteObservers=function(e,t){function n(e){if(null==e||"object"!=typeof e)return e;var t=e.constructor();for(var i in e)e.hasOwnProperty(i)&&(t[i]=n(e[i]));return t}for(var i=0;i<this.behavior._callbacks.onRepeat.length;i++)this.behavior._callbacks.onRepeat[i].call(window,e,t,n(this._idUpdates));this._idUpdates={master:{},repeat:{}}},_b.observeRemoveComplete=function(e){this.stopObservingRemoveComplete(e),this._callbacks.onRemove.push(e)},_b.stopObservingRemoveComplete=function(e){for(var t=0;t<this._callbacks.onRemove.length;t++)if(this._callbacks.onRemove[t].toString()==e.toString())return void this._callbacks.onRemove.splice(t,1)},_i.prototype.callRemoveCompleteObservers=function(e){for(var t=0;t<this.behavior._callbacks.onRemove.length;t++)this.behavior._callbacks.onRemove[t].call(window,e)},_i.prototype.run=function(e){if(wFORMS.LOADER.enabled){var t=this;wFORMS.LOADER.show(t.target),setTimeout(function(){t.duplicateSection(t.target),wFORMS.LOADER.hide(t.target,!0)},1)}else this.duplicateSection(this.target);e&&e.preventDefault()},"undefined"==typeof wFORMS)throw new Error("wFORMS core not found. This behavior depends on the wFORMS core.");if(wFORMS.behaviors.condition=function(){function _renameTriggers(e,t,n){n=n||[];var i=reduce(e,function(e,t,n){return new Trigger(e).isValid()?(n[t]=e,n):n},{}),r=reduce(e,function(e,t,n){return new Conditional(e).isValid()?(n[t]=e,n):n},{});map(i,function(e,i){map(new Trigger(e).getConditionals(),function(a){var o=r[a.getIdentifier()]||a.getIdentifier(),s=[o];t[o]&&s.push(t[o]),map(s,function(t){a=new Conditional(t),a.isValid()&&(a.unlinkTriggers(),a.replaceTrigger(i,e),n.push(t),a.linkTriggers())})})})}function _renameConditionals(e,t){var n=e.repeat,i=reduce(n,function(e,t,n){return new Conditional(e).isValid()?(n[t]=e,n):n},{}),r=map(i,function(e,t){return e});isObjectEmpty(e.master)||(r=r.concat(map(i,function(e,t){return t}))),map(r,function(e){var n=new Conditional(e);n.unlinkTriggers(),n.linkTriggers(),t.push(e)})}function _consolidateTriggers(e,t,n,i){i=i||[],map(reduce(e,function(e,t,n){return new Trigger(t).isValid()?(n[t]=e,n):n},{}),function(e,r){
map(new Trigger(r).getConditionals(),function(a){if(a.isValid()){var o=a.getConditionalElement();if(o&&!isDescendantOf(o,t)){var s;s=isDescendantOf(o,n)?e:{OR:[r,e]},a.unlinkTriggers(),a.replaceTrigger(r,s),a.linkTriggers(),i.push(a.getIdentifier())}}})})}function _detachConditionals(e){var t=base2.DOM.Element.querySelectorAll(e,"["+CONDITIONAL_ATTRIBUTE_NAME+"]"),n=[];t.forEach(function(t){n.push(new Conditional(t,e))}),map(n,function(e){e.unlinkTriggers()})}function _detachTriggers(e){var t=base2.DOM.Element.querySelectorAll(e,"["+TRIGGER_CONDITIONALS+"]"),n=[];t.forEach(function(t){n.push(new Trigger(t,e))}),map(n,function(t){map(t.getConditionals(),function(n){n.isValid()&&(isDescendantOf(n.getConditionalElement(),e)||n.detach(t.getIdentifier()))})})}function _preprocessParameter(e){function t(e,t,n){return n[_escapeQuerySelector("#"+t)]=_escapeQuerySelector("#"+e),n}return e.master=reduce(e.master,t,{}),e.repeat=reduce(e.repeat,t,{}),e}function _escapeQuerySelector(e){return e&&""!==e?e.replace(/\[(\d+)\]/g,function(e,t){return"\\["+t+"\\]"}):null}function map(e,t){if(!e)return null;var n=[];if(e instanceof Array)for(var i=0,r=e.length;i<r;i++)n.push(t(e[i],i));else{if("object"!=typeof e)return null;for(var a in e)void 0!==a&&n.push(t(e[a],a))}return n}function filter(e,t){var n=[];return map(e,function(e){t.apply(null,arguments)&&n.push(e)}),n}function extend(){for(var e=arguments[0],t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}function trim(e){return e.replace(/(^\s+)|(\s+$)/g,"")}function reduce(e,t,n){return n=n||{},map(e,function(e,i){n=t.call(window,e,i,n)}),n}function removeDuplicates(e){var t={},n=[];return map(e,function(e){t[e]||(n.push(e),t[e]=1)}),n}function getOrAssignID(e){if(!isHTMLElement(e))throw new Error("not a dom element");var t;return e.getAttribute("id")||(t=wFORMS.helpers.randomId()&&(e.setAttribute("id",t)||t))}function isDescendantOf(e,t){for(;e;){if(e.parentNode===t)return!0;e=e.parentNode}return!1}function isObjectEmpty(e){return 0===filter(e,function(){return!0}).length}var DELIMITER="`",CONDITIONAL_ATTRIBUTE_NAME="data-condition",TRIGGER_CONDITIONALS="data-conditionals",TRIGGER_DEFAULT_ENABLED=!0,DEFAULT_NON_EXIST_TRIGGER_VALUE=!1,inArray=wFORMS.helpers.contains,isHTMLElement=wFORMS.helpers.isHTMLElement,Conditional=function(){function Conditional(e,t){if(this._conditionalDomIdentifier=e,"string"!=typeof e){var n=e;if(this._conditionalDomIdentifier="#"+getOrAssignID(n),!isHTMLElement(n)||!n.hasAttribute(CONDITIONAL_ATTRIBUTE_NAME))throw new Error("this element doesn't have a \""+CONDITIONAL_ATTRIBUTE_NAME+'" attribute')}this._conditionalDomIdentifier=_escapeQuerySelector(this._conditionalDomIdentifier),this.referenceDOMTree=t||document}function PolishExpression(e,t){this.operator=(e+"").toUpperCase(),this.operands=t}function _getActiveTriggers(e){return filter(e.getTriggers(),function(e){return null!==e.getTriggerElement()})}function _mergeImplicitRules(){for(var e=this.getConditionRuleString(),t=!1,n=this.getConditionalElement(),i=n.parentNode;i&&1==i.nodeType;){var r=i.getAttribute(CONDITIONAL_ATTRIBUTE_NAME);r&&-1===e.indexOf("AND ("+r+")")&&(e="("+e+") AND ("+r+")",t=!0),i=i.parentNode}t&&(this.unlinkTriggers(),n.setAttribute(CONDITIONAL_ATTRIBUTE_NAME,e),this.linkTriggers())}extend(PolishExpression.prototype,{toStringy:function(){var e=map(this.operands,function(e){return e instanceof PolishExpression?e.toStringy():" "+e+" "});if("NOT"===this.operator){return this.operands[0]instanceof PolishExpression?" ( NOT"+e[0]+") ":" ( NOT ("+e[0]+") ) "}return e.length>1?" ("+e.join(this.operator)+") ":e[0]}});var COMPONENT_PATTERN=new RegExp(" ?"+DELIMITER+"([^"+DELIMITER+"]+)"+DELIMITER+" ?","g"),COMPOUND_COMPONENT_PATTERN=new RegExp("((AND)|(OR))\\s*"+DELIMITER+"([^"+DELIMITER+"]+)"+DELIMITER,"g"),BRACKETED_SINGLE_TRIGGER_PATTERN=new RegExp("\\(\\s*"+DELIMITER+"([^"+DELIMITER+"]+)"+DELIMITER+"\\s*\\)","g");return extend(Conditional.prototype,{getConditionRuleString:function(){var e=this.getConditionalElement();return e?e.getAttribute(CONDITIONAL_ATTRIBUTE_NAME):null},getTriggers:function(){var e=this.getConditionRuleString();if(!e)return null;var t,n=[];for(COMPONENT_PATTERN.lastIndex=0;t=COMPONENT_PATTERN.exec(e);)n.push(t[1]);return map(n,function(e){try{return new Trigger(e)}catch(e){return null}})},getConditionalElement:function(){try{return base2.DOM.Element.querySelector(this.referenceDOMTree,this._conditionalDomIdentifier)}catch(e){return null}},getIdentifier:function(){return this._conditionalDomIdentifier},equals:function(e){if(this.getIdentifier()===e.getIdentifier())return!0;var t=this.getConditionalElement(),n=e.getConditionalElement();return!(!n||!t)&&n===t},linkTriggers:function(){map(_getActiveTriggers(this),function(e){return function(t){t.addConditional(e)}}(this))},unlinkTriggers:function(){map(_getActiveTriggers(this),function(e){return function(t){t.removeConditional(e)}}(this))},refresh:function(){this.isConditionMet()?this.show():this.hide();var e=wFORMS.getBehaviorInstance(wFORMS.helpers.getForm(this.getConditionalElement()),"paging");e&&e.setupManagedControls()},isConditionMet:function(){_mergeImplicitRules.call(this);var conditionRuleString=this.getConditionRuleString();if(!conditionRuleString)throw new Error("The inferred DOM element doesn't have a rule string");COMPONENT_PATTERN.lastIndex=0;var rawBooleanExpression=conditionRuleString.replace(COMPONENT_PATTERN,function(e,t){return new Trigger(t).getValue()?"true":"false"}),booleanExpression=rawBooleanExpression.replace(/AND/g," && ").replace(/OR/g," || ").replace(/NOT/g," ! ");return eval(booleanExpression)},show:function(){var e=this.getConditionalElement(),t=e.id;if("INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||base2.DOM.HTMLElement.hasClass(e,"choices")){for(var n=e.parentNode;n&&1==n.nodeType&&!base2.DOM.HTMLElement.hasClass(n,"oneField");)n=n.parentNode;n&&1==n.nodeType&&base2.DOM.HTMLElement.hasClass(n,"oneField")?e=n:"INPUT"==e.tagName&&(e._wforms_disabled&&(e.disabled=!1),e.getAttribute(TRIGGER_CONDITIONALS)&&new Trigger(e).trigger(),this.flagCalculationForUpdate(e))}else base2.DOM.HTMLElement.hasClass(e,"pageSection")&&(e=e.parentNode);var i=this,r=function(e){switch(e.tagName){case"INPUT":e._wforms_disabled&&(e.disabled=!1),e.getAttribute(TRIGGER_CONDITIONALS)&&new Trigger(e).trigger(),i.flagCalculationForUpdate(e);break;case"TEXTAREA":e._wforms_disabled&&(e.disabled=!1),i.flagCalculationForUpdate(e);break;case"SELECT":e._wforms_disabled&&(e.disabled=!1);for(var t=e.getElementsByTagName("OPTION"),n=0;n<t.length;n++)t[n].getAttribute(TRIGGER_CONDITIONALS)&&new Trigger(t[n]).trigger();i.flagCalculationForUpdate(e);break;default:for(var a=0;a<e.childNodes.length;a++)1!=e.childNodes[a].nodeType||wFORMS.behaviors.condition.hasOffState(e.childNodes[a])||r(e.childNodes[a])}};r(e);var a=document.getElementById("tfa_switchedoff");if(a){if(a.value)var o=a.value.split(",");else var o=[];for(var s in o)if(o[s]==t){o.splice(s,1),a.value=o.join(",");break}}base2.DOM.HTMLElement.removeClass(e,"offstate");var l=wFORMS.getBehaviorInstance(e,"repeat");l&&l.behavior.isHandled(e)&&base2.DOM.HTMLElement.removeClass(l.getOrCreateRepeatLink(e),"offstate"),wFORMS.behaviors.condition.onShow&&wFORMS.behaviors.condition.onShow(this)},hide:function(){var e=this.getConditionalElement(),t=e.id;if("INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||base2.DOM.HTMLElement.hasClass(e,"choices")){for(var n=e.parentNode;n&&1==n.nodeType&&!base2.DOM.HTMLElement.hasClass(n,"oneField");)n=n.parentNode;n&&1==n.nodeType&&base2.DOM.HTMLElement.hasClass(n,"oneField")?e=n:"INPUT"==e.tagName&&(e.disabled=!0,e._wforms_disabled=!0,e.getAttribute(TRIGGER_CONDITIONALS)&&new Trigger(e).trigger(),this.flagCalculationForUpdate(e))}else base2.DOM.HTMLElement.hasClass(e,"pageSection")&&(e=e.parentNode);for(var i=e.getElementsByTagName("INPUT"),r=0;r<i.length;r++)i[r].disabled=!0,i[r]._wforms_disabled=!0,i[r].getAttribute(TRIGGER_CONDITIONALS)&&new Trigger(i[r]).trigger(),this.flagCalculationForUpdate(i[r]);for(var i=e.getElementsByTagName("TEXTAREA"),r=0;r<i.length;r++)i[r].disabled=!0,i[r]._wforms_disabled=!0,this.flagCalculationForUpdate(i[r]);for(var i=e.getElementsByTagName("SELECT"),r=0;r<i.length;r++){i[r].disabled=!0,i[r]._wforms_disabled=!0;for(var a=i[r].getElementsByTagName("OPTION"),o=0;o<a.length;o++)a[o].getAttribute(TRIGGER_CONDITIONALS)&&new Trigger(a[o]).trigger();this.flagCalculationForUpdate(i[r])}var s=document.getElementById("tfa_switchedoff");if(s){if(s.value)var l=s.value.split(",");else var l=[];for(var r in l)if(l[r]==t){l.splice(r,1);break}l.push(t),s.value=l.join(",")}base2.DOM.HTMLElement.addClass(e,"offstate");var c=wFORMS.getBehaviorInstance(e,"repeat");c&&c.behavior.isHandled(e)&&base2.DOM.HTMLElement.addClass(c.getOrCreateRepeatLink(e),"offstate"),wFORMS.behaviors.condition.onHide&&wFORMS.behaviors.condition.onHide(this)},isValid:function(){return this.getConditionalElement()&&this.getConditionRuleString()},replaceTrigger:function(e,t){"string"==typeof t&&(t={AND:t}),t=Conditional.makeConditionRules(t);var n=this.getConditionRuleString();if(!n)throw new Error("The inferred DOM element doesn't have a rule string");COMPONENT_PATTERN.lastIndex=0,n=n.replace(COMPONENT_PATTERN,function(n,i){return i===e?t:n}),this.getConditionalElement().setAttribute(CONDITIONAL_ATTRIBUTE_NAME,n)},detach:function(e){var t=this.getConditionRuleString();if(!t)throw new Error("The inferred DOM element doesn't have a rule string");COMPOUND_COMPONENT_PATTERN.lastIndex=0,t=t.replace(COMPOUND_COMPONENT_PATTERN,function(t){return _escapeQuerySelector(arguments[4])===e?"":t}),BRACKETED_SINGLE_TRIGGER_PATTERN.lastIndex=0,t=t.replace(BRACKETED_SINGLE_TRIGGER_PATTERN,function(e,t){return DELIMITER+t+DELIMITER}),this.getConditionalElement().setAttribute(CONDITIONAL_ATTRIBUTE_NAME,t)},flagCalculationForUpdate:function(e){wFORMS.behaviors.condition.calculationInstance||(wFORMS.behaviors.condition.calculationInstance=wFORMS.getBehaviorInstance(wFORMS.helpers.getForm(e),"calculation"));var t=wFORMS.behaviors.condition.calculationInstance;if(t&&t.isVariable(e))for(var n=t.getCalculatedFields(e),i=0;i<n.length;i++)wFORMS.behaviors.condition._dirtyCalculations[n[i].id]=n[i]}}),extend(Conditional,{makeConditionRules:function(e){function t(e){var t,n=e;return isHTMLElement(e)&&(n=e.getAttribute("id")||(t=wFORMS.helpers.randomId())&&(e.setAttribute("id",t)||t),n="#"+n),DELIMITER+n+DELIMITER}function n(e){return e instanceof Array||e.constructor===Object&&map(e,function(e,t){return t}).length>1}function i(e){if("string"==typeof e||isHTMLElement(e))return!0;var t=filter(e||{},function(e,t){return inArray(["NOT","AND","OR"],(t||"").toUpperCase())});return!t||0===t.length}function r(e){return filter(map(e,function(e,t){var n={};return n[(t||"").toUpperCase()]=e,n}),function(e){var t=map(e,function(e,t){return t});return inArray(["NOT","AND","OR"],t[0])})}function a(e){var t={};return map(e,function(e,n){t.name=n,t.value=e}),t}function o(e){if(e=e||{},i(e))return t(e);if(n(e))return new PolishExpression("AND",map(r(e),o));var s=a(e),l=s.value;l instanceof Array||(l=[l]);var c=[];return map(l,function(e){var t=o(e);t instanceof Array?c=c.concat(t):c.push(t)}),new PolishExpression(s.name,c)}var s=o(e);return s&&s.toStringy()||null}})}(),Trigger=function(){function e(e,t){var n=e;"string"!=typeof e&&(n="#"+getOrAssignID(e)),this._triggerElementIdentifier=_escapeQuerySelector(n),this.referenceDOMTree=t||document}function t(e){var t=e.getTriggerElement();if(!t)return[];var n=t.getAttribute(TRIGGER_CONDITIONALS);return n?map(n.split(","),function(e){try{return new Conditional(trim(e))}catch(e){return null}}):[]}function n(e){return map(e,function(e){return e.getIdentifier()}).join(",")}function i(e,t){if(!(t=filter(t,function(e){return e instanceof Conditional})))return null;var i=e.getTriggerElement();if(!isHTMLElement(i))throw new Error("Cannot store Conditionals to this Trigger object. The inferred DOM object doesn't exist");var r=n(t);return i.setAttribute(TRIGGER_CONDITIONALS,r),r}return extend(e.prototype,{attachedConditionals:[],_getConditionalsPattern:function(){return n(this.getConditionals())},setEventListener:function(){var e=this.getTriggerElement();if(e&&"OPTION"==e.tagName)for(;e&&"SELECT"!=e.tagName;)e=e.parentNode;if(e&&!e.__wforms_event_handled)if("INPUT"==e.tagName&&"radio"==e.getAttribute("type")){var t=e.form[e.getAttribute("name")];t.length||(t=[t]);for(var n=0;n<t.length;n++){var i=t[n];base2.DOM.Element.addEventListener(i,"click",EventHandlers.onChange,!1),i.__wforms_event_handled=!0}}else"INPUT"==e.tagName&&"checkbox"==e.getAttribute("type")?(base2.DOM.Element.addEventListener(e,"click",EventHandlers.onChange,!1),e.__wforms_event_handled=!0):(base2.DOM.Element.addEventListener(e,"change",EventHandlers.onChange,!1),e.__wforms_event_handled=!0)},getIdentifier:function(){return this._triggerElementIdentifier},getTriggerElement:function(){try{return base2.DOM.Element.querySelector(this.referenceDOMTree,this._triggerElementIdentifier)}catch(e){return null}},getValue:function(){var e=this.getTriggerElement();if(!e)return!1;if(e.disabled)return!1;if("OPTION"===e.tagName){for(var t=e.parentNode;t&&"SELECT"!=t.tagName;)t=t.parentNode;if(t&&t.disabled)return!1}if("INPUT"===e.tagName){var n=base2.DOM.Element.getAttribute(e,"type");if("checkbox"===n||"radio"===n)return!!e.checked;if("text"===n)return 0!==trim(e.value).length}else{if("TEXTAREA"===e.tagName)return 0!==trim(e.value).length;if("OPTION"===e.tagName)return e.selected;if("SELECT"===e.tagName){if(e.selectedIndex>0)return!0;for(var i=0,r=e.options.length;i<r;i++){var a=e.options[i];if(a.selected&&trim(a.value).length>0)return!0}return!1}}return!1},getConditionals:function(){return t(this)},replaceConditionals:function(e){return i(this,e)},addConditional:function(e){var t=this.getConditionals();return 0!==filter(t,function(t){return t.equals(e)}).length?null:(t.push(e),i(this,t))},removeConditional:function(e){return i(this,filter(this.getConditionals(),function(t,n){return!t.equals(e)}))},trigger:function(){var e=this.getTriggerElement();if(!(wFORMS.behaviors.condition._triggerChain&&e.id in wFORMS.behaviors.condition._triggerChain)){wFORMS.behaviors.condition._triggerChain[e.id]=!0;map(filter(this.getConditionals(),function(e){return e&&e.getConditionalElement()}),function(e){e.refresh()})}},isValid:function(){var e;return(e=this.getTriggerElement())&&e.getAttribute(TRIGGER_CONDITIONALS)}}),e}(),EventHandlers={onChange:function(e){var t=e.target;if(t){if(wFORMS.behaviors.condition.resetTriggerExecutionChain(),"SELECT"===t.tagName)for(var n=0;n<t.options.length;n++){var i=t.options[n];i.getAttribute(TRIGGER_CONDITIONALS)&&new Trigger(i).trigger()}else if("INPUT"===t.tagName&&"radio"===t.getAttribute("type")){var r=t.getAttribute("name"),a=t.form[r];a.length||(a=[a]);for(var n=0;n<a.length;n++){var o=a[n];new Trigger(o).trigger()}}else t.getAttribute(TRIGGER_CONDITIONALS)&&new Trigger(t).trigger();wFORMS.behaviors.condition.updateCalculations()}},onRepeatableDuplicated:function(e,t,n){var i=[];wFORMS.behaviors.condition.resetTriggerExecutionChain(),n=_preprocessParameter(n);var r=reduce(n.repeat,function(e,t,n){return new Conditional(t).isValid()?(n[t]=e,n):n},{});_renameTriggers(n.master,r,i),_renameConditionals(n,i),_consolidateTriggers(n.repeat,e,t,i),map(removeDuplicates(i),function(e){new Conditional(e).refresh()}),wFORMS.behaviors.condition.updateCalculations()},onRepeatableRemoved:function(e){_detachConditionals(e),_detachTriggers(e),wFORMS.behaviors.condition.updateCalculations()}};return{skip:!1,onHide:function(e){},onShow:function(e){},applyTo:function(e){if(wFORMS.behaviors.condition.skip)return null;this.resetTriggerExecutionChain();var t=base2.DOM.Element.querySelectorAll(e,"["+TRIGGER_CONDITIONALS+"]");t.forEach(function(e){var t=new Trigger(e);t.trigger(),t.setEventListener()}),wFORMS.behaviors.condition.updateCalculations(),t.length>0&&wFORMS.behaviors.repeat&&(wFORMS.behaviors.repeat.observeRepeatComplete(EventHandlers.onRepeatableDuplicated),wFORMS.behaviors.repeat.observeRemoveComplete(EventHandlers.onRepeatableRemoved))},getConditional:function(e){return new Conditional(e)},getTrigger:function(e){return new Trigger(e)},Conditional:Conditional,Trigger:Trigger,mockup:function(){},isInitialized:function(){return initialized},hasOffState:function(e){return base2.DOM.HTMLElement.hasClass(e,"offstate")},resetTriggerExecutionChain:function(){wFORMS.behaviors.condition._triggerChain={},wFORMS.behaviors.condition._dirtyCalculations={}},updateCalculations:function(){for(var e in wFORMS.behaviors.condition._dirtyCalculations){var t=wFORMS.behaviors.condition._dirtyCalculations[e];wFORMS.behaviors.condition.calculationInstance||(wFORMS.behaviors.condition.calculationInstance=wFORMS.getBehaviorInstance(wFORMS.helpers.getForm(t),"calculation")),wFORMS.behaviors.condition.calculationInstance.refresh(null,t)}wFORMS.behaviors.condition._dirtyCalculations={}}}}(),"undefined"==typeof wFORMS)throw new Error("wFORMS core not found. This behavior depends on the wFORMS core.");if(wFORMS.behaviors.validation={skip:!1,ERROR_PLACEHOLDER_SUFFIX:"-E",LOWER_BOUND_ATTRIBUTE:"min",UPPER_BOUND_ATTRIBUTE:"max",rules:{oneRequired:{selector:".required-one",check:"validateOneRequired"},isRequired:{selector:".required",check:"validateRequired"},isAlpha:{selector:".validate-alpha",check:"validateAlpha"},isAlphanum:{selector:".validate-alphanum",check:"validateAlphanum"},isDateTime:{selector:".validate-datetime",check:"validateDateTime"},isDate:{selector:".validate-date, .validate-datecal",check:"validateDate",range_verifier:"dateRangeTest",range_error_message:"rangeDate"},isTime:{selector:".validate-time",check:"validateTime",range_verifier:"timeRangeTest",range_error_message:"rangeDate"},isEmail:{selector:".validate-email",check:"validateEmail"},isInteger:{selector:".validate-integer",check:"validateInteger",range_verifier:"numberRangeTest",range_error_message:"rangeNumber"},isFloat:{selector:".validate-float",check:"validateFloat",range_verifier:"numberRangeTest",range_error_message:"rangeNumber"},isPhone:{selector:".validate-phone",check:"validatePhone"},isCustom:{selector:".validate-custom",check:"validateCustom"},wordCount:{selector:".count-words",check:"validateWordCount"},isHostname:{selector:".validate-hostname",check:"validateHostname"}},styling:{fieldError:"errFld",errorMessage:"errMsg",linkedErrorMessage:"linkedErrMsg",errorLink:"errLink"},messages:{oneRequired:"This section is required.",isRequired:"This field is required.",isAlpha:"The text must use alphabetic characters only (a-z, A-Z). Numbers are not allowed.",isEmail:"This does not appear to be a valid email address.",isInteger:"Please enter an integer.",isFloat:"Please enter a number (ex. 1.9).",isAlphanum:"Please use alpha-numeric characters only [a-z 0-9].",isDateTime:"This does not appear to be a valid date/time.",isDate:"This does not appear to be a valid date.",isTime:"This does not appear to be a valid time.",isPhone:"Please enter a valid phone number.",isCustom:"Please enter a valid value.",wordCount:"This field is over the word limit.",wordsRemPos:" words remaining",wordsRemNeg:" words over the limit",notification:"The form is not complete and has not been submitted yet. There was %% problem(s) with your submission.",rangeNumber:{max:"The value must be smaller than the upper bound %1",min:"The value must be greater than the lower bound %1",both:"The entered value must be between %1 - %2"},rangeDate:{max:"The date must be on or before %1.",min:"The date must be on or after %1.",both:"This date must be between %1 - %2.",cont:"This field determines the date range for %1.",dep:"Could not validated date. This field is dependent on %1.",link:"another field"},wait:"Please wait..."},instance:function(e){this.behavior=wFORMS.behaviors.validation,this.target=e;var t=this;e.__wFormsValidationHandled||(e.addEventListener||wFORMS.standardizeElement(e),e.addEventListener("submit",function(e){return t.run(e,this)},!1),e.__wFormsValidationHandled=!0)},onPass:function(e,t){},onFail:function(e,t){var n=wFORMS.behaviors.validation.messages.notification,i=null,r=0;for(var a in e.elementsInError)r++,i||(i=a);if(n=n.replace("%%",r),wFORMS.behaviors.paging&&wFORMS.behaviors.paging.showTabNavigation){e.errorPages=new Array;var o=9999;for(var a in e.elementsInError){var s=wFORMS.behaviors.paging.helpers.findPage(document.getElementById(a));if(s){var l=wFORMS.behaviors.paging.getPageIndex(s);l<o&&(o=l),"object"==typeof e.errorPages[l]?e.errorPages[l].push(a):(e.errorPages[l]=new Array,e.errorPages[l].push(a))}}var c=wFORMS.getBehaviorInstance(e.target,"paging");c.jumpTo(o);var u=base2.DOM.Element.querySelectorAll(e.target.parentNode,'a[id^="'+c.behavior.CSS_PAGETAB+'"]');u.forEach||(u=base2.JavaScript.Array2(u)),u.forEach(function(e){e.removeClass&&e.hasClass&&e.addClass||wFORMS.standardizeElement(e),e.removeClass("errMsg")}),e.errorPages.forEach||(e.errorPages=base2.JavaScript.Array2(e.errorPages)),e.errorPages.forEach(function(t,n){var i=base2.DOM.Element.querySelector(e.target.parentNode,"#"+c.behavior.CSS_PAGETAB+"_"+n);i&&(i.addClass||wFORMS.standardizeElement(i),i.addClass("errMsg"))})}var h=document.getElementById(i);h.scrollIntoView?h.scrollIntoView():location.hash="#"+i,alert(n)},dateRegex:function(){var e="(\\d{1,4}|\\d{1,2})",t="(\\d{1,2}|((January)|(February)|(March)|(April)|(May)|(June)|(July)|(August)|(September)|(October)|(November)|(December)|(Jan)|(Feb)|(Mar)|(Apr)|(May)|(Jun)|(Jul)|(Aug)|(Sep)|(Oct)|(Nov)|(Dec)))",n="\\d{1,2}((th)|(rd)|(nd)|(st))?",i="\\s*[-/\\\\|\\,\\.]?\\s*",r="(("+t+i+n+")|("+n+i+t+")|("+t+"))",a="(("+e+i+r+")|("+r+i+e+")|"+r+")",o="((1[012]|[1-9])\\s*[:-]?\\s*([0-5][0-9])?\\s*(a|am|p|pm))",s="(([0-1]?[0-9]|2[0-4])\\s*[:-]?\\s*[0-5][0-9](\\s*[:-]?\\s*[0-5][0-9])?)";return[new RegExp("^"+a+"\\s+"+o+"$","i"),new RegExp("^"+a+"\\s+"+s+"$","i"),new RegExp("^"+o+"\\s+"+a+"$","i"),new RegExp("^"+s+"\\s+"+a+"$","i"),new RegExp("^"+a+"$","i"),new RegExp("^"+o+"$","i"),new RegExp("^"+s+"$","i")]}()},wFORMS.behaviors.validation.rules.isDate.fail=function(e,t){function n(e,t,n){var r=base2.DOM.HTMLDocument.querySelector(i.target,wFORMS.helpers.escapeQuerySelector("#"+e)),a=base2.DOM.HTMLDocument.querySelector(i.target,wFORMS.helpers.escapeQuerySelector("#"+t));n&&i.addErrorMessage(r,wFORMS.behaviors.validation.messages.rangeDate.cont,!0);var o=base2.DOM.HTMLDocument.querySelector(i.target,wFORMS.helpers.escapeQuerySelector("#"+r.id+wFORMS.behaviors.validation.ERROR_PLACEHOLDER_SUFFIX)),s=document.createElement("span");s.setAttribute("class","errLink"),s.textContent=wFORMS.behaviors.validation.messages.rangeDate.link,o.innerHTML=o.innerHTML.replace(/%1/,s.outerHTML),o.getElementsByClassName(wFORMS.behaviors.validation.styling.errorLink)[0].onclick=function(){wFORMS.behaviors.validation.moveToLinkedDate.call(a)}}var i=this;if(t.match(/%%(.+)%%/)){var r=t.match(/%%(.+)%%/)[1];t=t.replace(/%%(.+)%%/,"%1")}this.fail(e,t),r&&(n(r,e.id,!0),n(e.id,r))},wFORMS.behaviors.validation.applyTo=function(e){if(wFORMS.behaviors.validation.skip)return null;if(!e||!e.tagName)throw new Error("Can't apply behavior to "+e);if("FORM"!=e.tagName)if(e.form)e=e.form;else{var t=e;for(e=e.parentNode;e&&"FORM"!=e.tagName;e=e.parentNode);e&&"FORM"==e.tagName||(e=t.getElementsByTagName("form"))}if(!e.tagName&&e.length>0)for(var n=new Array,i=0;i<e.length;i++){var r=new wFORMS.behaviors.validation.instance(e[i]);n.push(r),r.onApply()}else{var n=new wFORMS.behaviors.validation.instance(e);n.onApply()}return n},wFORMS.behaviors.validation.instance.prototype.onApply=function(){var e=this;if(wFORMS.behaviors.repeat&&!wFORMS.behaviors.repeat.handlingRepeatedErrors){wFORMS.behaviors.repeat.handlingRepeatedErrors=!0;var t=wFORMS.behaviors.repeat.onRepeat;wFORMS.behaviors.repeat.onRepeat=function(n){n&&e.removeErrorMessage(n),base2.DOM.Element.querySelectorAll(n,"*").forEach(function(t){e.removeErrorMessage(t)}),t&&t.apply(this,arguments)},wFORMS.behaviors.repeat.observeRepeatComplete(this.repeatHandler)}},wFORMS.behaviors.validation.instance.prototype.run=function(e,t){if(e&&e.pagingStopPropagation)return!1;var n=function(e){if((!wFORMS.behaviors.paging||wFORMS.behaviors.paging.showTabNavigation||wFORMS.behaviors.paging.isElementVisible(e))&&!o.isSwitchedOff(e)){var t=wFORMS.helpers.getFieldValue(e);if(a.check.call)var n=a.check.call(o,e,t);else n=o[a.check].call(o,e,t);var s=r;if(n&&void 0!==a.range_verifier){var l=o[a.range_verifier].call(o,e,t,wFORMS.behaviors.validation.messages[a.range_error_message]);!0!==l&&(n=!1,!1!==l&&(s=l))}n?(o.elementsInError[e.id]||o.removeErrorMessage(e),a.pass?a.pass.call(o,e):o.pass.call(o,e)):(e.id||(e.id=wFORMS.helpers.randomId()),o.elementsInError[e.id]={id:e.id,rule:r},o.removeErrorMessage(e),a.fail?a.fail.call(o,e,s):o.fail.call(o,e,s),i++)}},i=0;this.elementsInError={};for(var r in this.behavior.rules){var a=this.behavior.rules[r],o=this;t.matchesSelector||wFORMS.standardizeElement(t),t.matchesSelector||(t=base2.DOM.bind(t)),!t.matchesSelector&&t.msMatchesSelector&&(t.matchesSelector=t.msMatchesSelector),!t.matchesSelector&&t.mozMatchesSelector&&(t.matchesSelector=t.mozMatchesSelector),!t.matchesSelector&&t.webkitMatchesSelector&&(t.matchesSelector=t.webkitMatchesSelector),t.matchesSelector||(t.matchesSelector=base2.DOM.Element.matchesSelector),t.matchesSelector(a.selector)&&n(t),t.querySelectorAll(a.selector).forEach(n)}if(i>0)return e&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.behavior.onFail&&this.behavior.onFail(this,e),!1;if(e&&"submit"==e.type){var s=base2.DOM.Element.querySelector(this.target,'.actions .primaryAction[type="submit"]');s.setAttribute("disabled","disabled"),s.setAttribute("style","color: grey"),s.setAttribute("value",wFORMS.behaviors.validation.messages.wait)}return this.behavior.onPass&&this.behavior.onPass(this,e),!0},wFORMS.behaviors.validation.instance.prototype.fail=function(e,t){var n=document.getElementById(e.id+"-D");if(!n&&wFORMS.behaviors.repeat&&e.id){var i=e.id.replace(/(\[\d+\])+(\-[HED])?$/,"$2"),r=e.id.split(i).join("");i+="-D",r&&(i+=r),n=document.getElementById(i)}n?(n.hasClass&&n.addClass||wFORMS.standardizeElement(n),n.addClass(this.behavior.styling.fieldError)):(e.hasClass&&e.addClass||wFORMS.standardizeElement(e),e.addClass(this.behavior.styling.fieldError));var a=t in this.behavior.messages?this.behavior.messages[t]:t;this.addErrorMessage(e,a)},wFORMS.behaviors.validation.instance.prototype.pass=function(e){},wFORMS.behaviors.validation.instance.prototype.addErrorMessage=function(e,t,n){e.id||(e.id=wFORMS.helpers.randomId());var i=document.createElement("span");i.appendChild(document.createTextNode(t)),n&&i.setAttribute("class",this.behavior.styling.linkedErrorMessage);var r=document.getElementById(e.id+this.behavior.ERROR_PLACEHOLDER_SUFFIX);if(r)r.appendChild(document.createElement("br"));else if(r=document.createElement("div"),r.setAttribute("id",e.id+this.behavior.ERROR_PLACEHOLDER_SUFFIX),"TR"==e.tagName)r=e.getElementsByTagName("TH").length>0?e.getElementsByTagName("TH")[0].appendChild(r):e.getElementsByTagName("TD")[0].appendChild(r);else if(e.hasClass("wfSection")||e.hasClass("inlineSection"))r=e.appendChild(r);else{var a=document.getElementById(e.id+"-D");r=a?a.appendChild(r):e.parentNode.insertBefore(r,e.nextSibling)}r.appendChild(i),wFORMS.standardizeElement(r),r.addClass(this.behavior.styling.errorMessage)},wFORMS.behaviors.validation.instance.prototype.removeErrorMessage=function(e){var t=document.getElementById(e.id+"-D");e.hasClass||wFORMS.standardizeElement(e),e.addClass||wFORMS.standardizeElement(e),e.removeClass||wFORMS.standardizeElement(e),t&&!t.hasClass&&wFORMS.standardizeElement(t),t&&!t.addClass&&wFORMS.standardizeElement(t),t&&!t.removeClass&&wFORMS.standardizeElement(t),e.hasClass(this.behavior.styling.fieldError)&&e.removeClass(this.behavior.styling.fieldError),t&&t.hasClass(this.behavior.styling.fieldError)&&t.removeClass(this.behavior.styling.fieldError);var n=document.getElementById(e.id+this.behavior.ERROR_PLACEHOLDER_SUFFIX);if(n)n.parentNode.removeChild(n);else if(e.id){var i=e.id.split("-D").join(""),n=document.getElementById(i+this.behavior.ERROR_PLACEHOLDER_SUFFIX);n&&n.parentNode.removeChild(n)}},wFORMS.behaviors.validation.instance.prototype.isSwitchedOff=function(e){switch(e.tagName){case"INPUT":case"TEXTAREA":case"SELECT":return!!e.disabled;default:if(!0===e.disabled)return!0;for(var t=e.getElementsByTagName("INPUT"),n=0;n<t.length;n++)if(!t[n].disabled)return!1;t=e.getElementsByTagName("TEXTAREA");for(var n=0;n<t.length;n++)if(!t[n].disabled)return!1;t=e.getElementsByTagName("SELECT");for(var n=0;n<t.length;n++)if(!t[n].disabled)return!1;return!0}},wFORMS.behaviors.validation.isErrorPlaceholderId=function(e){return null!=e.match(new RegExp(wFORMS.behaviors.validation.ERROR_PLACEHOLDER_SUFFIX+"$"))},wFORMS.behaviors.validation.instance.prototype.isEmpty=function(e){var t=/^\s+$/;return null==e||0==e.length||t.test(e)},wFORMS.behaviors.validation.instance.prototype.validateRequired=function(e,t){switch(e.tagName){case"INPUT":var n=e.getAttribute("type");switch(n||(n="text"),n.toLowerCase()){case"checkbox":case"radio":return e.checked;case"file":var i=document.getElementById("tfa_uploadDelete_"+e.id);return!this.isEmpty(t)||i&&!i.checked;default:return!this.isEmpty(t)}break;case"SELECT":case"TEXTAREA":return!this.isEmpty(t);default:return this.validateOneRequired(e)}return!1},wFORMS.behaviors.validation.instance.prototype.validateOneRequired=function(e){if(1!=e.nodeType)return!1;if(this.isSwitchedOff(e))return!1;switch(e.tagName){case"INPUT":var t=e.getAttribute("type");switch(t||(t="text"),t.toLowerCase()){case"checkbox":case"radio":return e.checked;case"file":var n=document.getElementById("tfa_uploadDelete_"+e.id);return!this.isEmpty(wFORMS.helpers.getFieldValue(e))||n&&!n.checked;default:return!this.isEmpty(wFORMS.helpers.getFieldValue(e))}break;case"SELECT":case"TEXTAREA":return!this.isEmpty(wFORMS.helpers.getFieldValue(e));default:for(var i=0;i<e.childNodes.length;i++)if(this.validateOneRequired(e.childNodes[i]))return!0}return!1},wFORMS.behaviors.validation.instance.prototype.validateAlpha=function(e,t){var n=/^[a-zA-Z\s]+$/;return this.isEmpty(t)||n.test(t)},wFORMS.behaviors.validation.instance.prototype.validateAlphanum=function(e,t){var n=/^[\w\s]+$/;return this.isEmpty(t)||n.test(t)},wFORMS.behaviors.validation.instance.prototype.validateHostname=function(e,t){var n=/^[a-z0-9](-(?!($|\.))|\.(?!$)|[a-z0-9]){0,}$/i;return this.isEmpty(t)||n.test(t)},wFORMS.behaviors.validation.instance.prototype.validateDateTime=function(e,t){if(this.isEmpty(t))return!0;for(var n=wFORMS.behaviors.validation.dateRegex,i=0;i<n.length-1;i++)if(n[i].test(t))return!0;return!1},wFORMS.behaviors.validation.instance.prototype.validateDate=function(e,t){return!!this.isEmpty(t)||!(null===this.analyzeDateComponents(t))},wFORMS.behaviors.validation.relativeDate=function(e,t,n,i){this.sign=e,this.qty=t||0,this.unit=n||"Days",this.target=i||""},wFORMS.behaviors.validation.relativeDate.prototype.toString=function(){return this.sign+"|"+this.qty+"_"+this.unit+"{"+this.target+"}"},wFORMS.behaviors.validation.parseRelativeDateString=function(e){try{var t=e.match(/^([+-])\|(\d*)\_?(Day|Month|Year)?\{(tfa_.+)?\}/),n=t[1],i=t[2],r=t[3],a=t[4];return new wFORMS.behaviors.validation.relativeDate(n,i,r,a)}catch(e){return null}},wFORMS.behaviors.validation.instance.prototype.getRelativeDateControllerIds=function(e){var t=[],n=[];e.getAttribute(wFORMS.behaviors.validation.LOWER_BOUND_ATTRIBUTE)&&t.push(e.getAttribute(wFORMS.behaviors.validation.LOWER_BOUND_ATTRIBUTE)),e.getAttribute(wFORMS.behaviors.validation.UPPER_BOUND_ATTRIBUTE)&&t.push(e.getAttribute(wFORMS.behaviors.validation.UPPER_BOUND_ATTRIBUTE));for(var i in t){
var r=wFORMS.behaviors.validation.parseRelativeDateString(t[i]);r&&""!=r.target&&-1==n.indexOf(r.target)&&n.push(r.target)}return!!n.length&&n},wFORMS.behaviors.validation.instance.prototype.analyzeDateComponents=function(e){var t;try{t=wFORMS.helpers.calendar.locale}catch(e){}t||(t={MDY_DAY_POSITION:1,MDY_MONTH_POSITION:2,MDY_YEAR_POSITION:3});var n=e.split(/[\/\.\-\s]/);if(3!=n.length){var i=this.computeWformsRelativeDateString(e);return i||null}for(var r=0;r<3;r++)if(!/^\d+$/.test(n[r]))return null;if(n[t.MDY_DAY_POSITION-1].length>2||n[t.MDY_MONTH_POSITION-1].length>2||n[t.MDY_YEAR_POSITION-1].length>4)return null;var a=n[t.MDY_YEAR_POSITION-1];if(2==a.length&&(a=a>50?"19"+a:"20"+a),a<0||a>3e3)return null;var o=parseInt(n[t.MDY_MONTH_POSITION-1],10);if(o<0||o>12)return null;var s=parseInt(n[t.MDY_DAY_POSITION-1],10);if(s<0||s>31)return null;var l=new Date(a,o-1,s);return l.getMonth()+1!=o||l.getDate()!=s||l.getFullYear()!=a?null:l},wFORMS.behaviors.validation.instance.prototype.computeWformsRelativeDateString=function(val,timeStamp){var wfDateObj=wFORMS.behaviors.validation.parseRelativeDateString(val);if(null==wfDateObj)return null;var base=new Date;if(timeStamp)base.setTime(timeStamp);else if(wfDateObj.target){var escaped=wFORMS.helpers.escapeQuerySelector("#"+wfDateObj.target),compTarget=base2.DOM.Element.querySelector(this.target,escaped);if(!(base=this.analyzeDateComponents(compTarget.value)))return null}else{var now=new Date;base=new Date(now.getFullYear(),now.getMonth(),now.getDate())}var preComp=base.getTime();"Day"==wfDateObj.unit&&(wfDateObj.unit="Date"),"Year"==wfDateObj.unit&&(wfDateObj.unit="FullYear");var toComp="base.set"+wfDateObj.unit+"(base.get"+wfDateObj.unit+"()"+wfDateObj.sign+wfDateObj.qty+")";return eval(toComp),isNaN(base)&&base.setTime(preComp),base},wFORMS.behaviors.validation.instance.prototype.toWformsLocaleDateString=function(e){var t,n,i=[];try{t=wFORMS.helpers.calendar.locale}catch(e){t={MDY_DAY_POSITION:1,MDY_MONTH_POSITION:2,MDY_YEAR_POSITION:3,DATE_FIELD_DELIMITER:"/"}}for(var r in t)if(r.match(/position/i)){switch(r.match(/_(.*)_/)[1]){case"DAY":n=e.getDate();break;case"MONTH":n=e.getMonth()+1;break;case"YEAR":n=e.getFullYear()}i[t[r]-1]=n}return i.join(t.DATE_FIELD_DELIMITER)},wFORMS.behaviors.validation.instance.prototype.repeatHandler=function(e,t,n){function i(e){return base2.DOM.Element.querySelectorAll(e,".validate-date, .validate-datecal")}var r=wFORMS.behaviors.validation.LOWER_BOUND_ATTRIBUTE,a=wFORMS.behaviors.validation.UPPER_BOUND_ATTRIBUTE,o=i(e);o.forEach(function(e){var t=wFORMS.behaviors.validation.parseRelativeDateString(e.getAttribute(r)),i=wFORMS.behaviors.validation.parseRelativeDateString(e.getAttribute(a));t&&n.master[t.target]&&(t.target=n.master[t.target],e.setAttribute(r,t.toString())),i&&n.master[i.target]&&(i.target=n.master[i.target],e.setAttribute(a,i.toString()))});var s={};for(var l in n.repeat){var c=function(e,t){for(var n in t)if(t[n]==e)return n;return e}(l,n.master);s[c]=n.repeat[l]}var o=i(t);o.forEach(function(e){var t=wFORMS.behaviors.validation.parseRelativeDateString(e.getAttribute(r)),n=wFORMS.behaviors.validation.parseRelativeDateString(e.getAttribute(a));t&&s[t.target]&&(t.target=s[t.target],e.setAttribute(r,t.toString())),n&&s[n.target]&&(n.target=s[n.target],e.setAttribute(a,n.toString()))})},wFORMS.behaviors.validation.instance.prototype.validateTime=function(e,t){return!!this.isEmpty(t)||null!==this.analyzeTimeComponents(t)},wFORMS.behaviors.validation.instance.prototype.analyzeTimeComponents=function(e){var t,n=!1,i=!1;if(t=e.match(/a[^\da-z]?m/gi)){if(t.length>1)return null;1==t.length&&(n=!0)}if(t=e.match(/p[^\da-z]?m/gi)){if(t.length>1)return null;1==t.length&&(i=!0)}if(n&&i)return null;var r=null,a=0,o=0,s=0;if(t=!1,(r=e.match(/(\d{1,2})[-:](\d{1,2})[-:](\d{1,2})/))&&4==r.length?(a=parseInt(r[1]),o=parseInt(r[2]),s=parseInt(r[3]),t=!0):(r=e.match(/(\d{1,2})[-:](\d{1,2})/))&&3==r.length?(a=parseInt(r[1]),o=parseInt(r[2]),t=!0):(r=e.match(/(\d{1,2})/))&&2==r.length&&(a=parseInt(r[1]),t=!0),!t)return null;if(i)24==(a+=12)&&(a=0);else if(n&&a>12)return null;return a<0||a>23||o<0||o>59||s<0||s>59?null:new Date(0,0,0,a,o,s,0)},wFORMS.behaviors.validation.instance.prototype.validateEmail=function(e,t){var n=/[^\s@]+@[^\s@]+\.[^\s@]+/;if(this.isEmpty(t))return!0;for(var i=t.split(","),r=0;r<i.length;r++){var a=i[r].replace(/^\s+|\s+$/g,"");if(!n.test(a))return!1}return!0},wFORMS.behaviors.validation.instance.prototype.validateInteger=function(e,t){var n=/^[\-+]?\d+$/;return this.isEmpty(t)||n.test(t)},wFORMS.behaviors.validation.instance.prototype.validateFloat=function(e,t){return this.isEmpty(t)||wFORMS.helpers.isNumericValue(t)},wFORMS.behaviors.validation.instance.prototype.validatePhone=function(e,t){if(this.isEmpty(t))return!0;var n=[/^[\d\-\. \+\(\)]+$/,/^[\d\-\. \+\(\)]+ # {0,1}\d+ *$/,/^[\d\-\. \+\(\)]+ ext\.{0,1} \d+ *$/];for(var i in n)if(n[i].test(t))return!0;return!1},wFORMS.behaviors.validation.instance.prototype.validateCustom=function(e,t){var n=new RegExp("/(.*)/([gi]*)"),i=e.className.match(n);if(this.isEmpty(t))return!0;if(i&&i[0]){var r=new RegExp(i[1],i[2]);if(!t.match(r))return!1}return!0},wFORMS.behaviors.validation.instance.prototype.ALLOWED_ELEMENT_TYPE=['input[type="text"][id^="tfa_"]','textarea[id^="tfa_"]'],wFORMS.behaviors.validation.instance.prototype.validateWordCount=function(e,t){return!(e.count>e.getAttribute("data-maxwords"))},wFORMS.behaviors.validation.instance.prototype.numberRangeTest=function(e,t,n){var i,r,a=null,o=null;if(this.isEmpty(t))return!0;if(i=e.getAttribute(wFORMS.behaviors.validation.LOWER_BOUND_ATTRIBUTE),i&&(this.validateFloat(i)||this.validateInteger(i))&&(a=parseFloat(i)),null==a&&(a=-1/0),r=e.getAttribute(wFORMS.behaviors.validation.UPPER_BOUND_ATTRIBUTE),r&&(this.validateFloat(r)||this.validateInteger(r))&&(o=parseFloat(r)),null==o&&(o=1/0),t=parseFloat(t),isNaN(t)||void 0===t||null===t)return!1;var s=null;return t<a&&(s=(null==s?"":s)+n.min.replace(/%1/g,a)),t>o&&(s=(null==s?"":s+" ")+n.max.replace(/%1/g,o)),null==s||s},wFORMS.behaviors.validation.instance.prototype.dateRangeTest=function(e,t,n){return this.dateTimeRangeTestCommon(e,t,n,"analyzeDateComponents")},wFORMS.behaviors.validation.instance.prototype.timeRangeTest=function(e,t,n){return this.dateTimeRangeTestCommon(e,t,n,"analyzeTimeComponents")},wFORMS.behaviors.validation.moveToLinkedDate=function(){var e=null!=this.id.match(/\[/)?this.id.replace("[","-D["):this.id+"-D",t=document.getElementById(e);if(t&&!wFORMS.behaviors.paging.isElementVisible(t)){var n=wFORMS.behaviors.paging.helpers.findPage(t);wFORMS.getBehaviorInstance(document.getElementById("tfa_0"),"paging").jumpTo(wFORMS.behaviors.paging.getPageIndex(n))}t&&t.scrollIntoView?t.scrollIntoView():location.hash="#"+e},wFORMS.behaviors.validation.instance.prototype.dateTimeRangeTestCommon=function(e,t,n,i){var r,a,o=null,s=null;if(this.isEmpty(t))return!0;if(r=e.getAttribute(wFORMS.behaviors.validation.LOWER_BOUND_ATTRIBUTE),r&&(o=this[i](r)),a=e.getAttribute(wFORMS.behaviors.validation.UPPER_BOUND_ATTRIBUTE),a&&(s=this[i](a)),null===(t=this[i](t)))return!1;var l=this.getRelativeDateControllerIds(e);if(l){if(!o&&r||!s&&a&&t){var c=wFORMS.helpers.escapeQuerySelector("#"+l[!o&&r?0:l.length-1]),u=base2.DOM.HTMLDocument.querySelector(this.target,c);return!!this.isSwitchedOff(u)||n.dep.replace(/%1/,"%%"+u.id+"%%")}var h=this.elementsInError;for(var d in h)if(l.indexOf(h[d].id)>-1)return n.dep.replace(/%1/,"%%"+h[d].id+"%%")}if(o&&s&&o>s)return!0;if(r&&this.computeWformsRelativeDateString(r)instanceof Date){var p=new Date(this.computeWformsRelativeDateString(r).getTime());r=this.toWformsLocaleDateString(p)}if(a&&this.computeWformsRelativeDateString(a)instanceof Date){var f=new Date(this.computeWformsRelativeDateString(a).getTime());a=this.toWformsLocaleDateString(f)}var v=o&&t.getTime()<o.getTime(),g=s&&t.getTime()>s.getTime();return(v||g)&&s&&o?n.both.replace(/%1/g,r).replace(/%2/g,a):v?n.min.replace(/%1/g,r):!g||n.max.replace(/%1/g,a)},wFORMS.behaviors.validation.enableResumeLater=function(){var e=document.getElementById("tfa_resumeLater");if(e){wFORMS.behaviors.validation.messages.isPasswordConfirmed||(wFORMS.behaviors.validation.messages.isPasswordConfirmed="Your password and confirmation field did not match."),wFORMS.behaviors.validation.instance.prototype.isPasswordConfirmed=function(e,t){return!document.getElementById("tfa_confirmPassword")||t==document.getElementById("tfa_confirmPassword").value},wFORMS.behaviors.validation.messages.isPasswordStrong||(wFORMS.behaviors.validation.messages.isPasswordStrong="Please choose a more secure password. Passwords must contain 8 or more characters, with at least 1 letter (a to z), 1 number (0 to 9), and 1 symbol (like '%', '$' or '!')."),wFORMS.behaviors.validation.instance.prototype.isPasswordStrong=function(e,t){for(var n=[/^([^\s]{8,})/,/[a-zA-Z]/i,/[0-9]/,/[\"!#$%&'()*+,-.\/:;<=>?@\[\]\\\^_`{|}~]/],i=0;i<n.length;i++)if(!t.match(n[i]))return!1;return!0},wFORMS.behaviors.validation.messages.isPasswordMedium||(wFORMS.behaviors.validation.messages.isPasswordMedium="Please choose a more secure password. Passwords must contain 4 or more characters, with at least 1 letter (a to z) and 1 number (0 to 9)."),wFORMS.behaviors.validation.instance.prototype.isPasswordMedium=function(e,t){for(var n=[/^([^\s]{4,})/,/[a-zA-Z]/i,/[0-9]/],i=0;i<n.length;i++)if(!t.match(n[i]))return!1;return!0},wFORMS.behaviors.validation.messages.isPasswordWeak||(wFORMS.behaviors.validation.messages.isPasswordWeak="Your password cannot be empty."),wFORMS.behaviors.validation.instance.prototype.isPasswordWeak=function(e,t){for(var n=[/^([^\s]{1,})/],i=0;i<n.length;i++)if(!t.match(n[i]))return!1;return!0};var t=document.getElementById("tfa_saveForLaterLink");t&&(t.onclick=function(){for(f=this;f&&"FORM"!=f.tagName;)f=f.parentNode;elem=document.getElementById("tfa_saveForLater"),elem&&!elem.checked&&elem.click(),elem&&elem.scrollIntoView?elem.scrollIntoView():location.hash="#tfa_saveForLater",new wFORMS.behaviors.condition.Trigger("#tfa_saveForLater").trigger()}),e.onclick=function(e){var t=this.form,n=wFORMS.getBehaviorInstance(t,"validation");if(n){var i=n.behavior.rules;switch(n.behavior.rules=[],n.behavior.rules.isEmail={selector:"#tfa_resumeEmail",check:"validateEmail"},n.behavior.rules.isRequired={selector:"#tfa_resumeEmail",check:"validateRequired"},wFORMS.behaviors.validation.passwordStrength||(wFORMS.behaviors.validation.passwordStrength="low"),wFORMS.behaviors.validation.passwordStrength){case"high":n.behavior.rules.isPasswordStrong={selector:"#tfa_resumePassword",check:"isPasswordStrong"};break;case"medium":n.behavior.rules.isPasswordMedium={selector:"#tfa_resumePassword",check:"isPasswordMedium"};break;case"low":default:n.behavior.rules.isPasswordWeak={selector:"#tfa_resumePassword",check:"isPasswordWeak"}}n.behavior.rules.isPasswordConfirmed={selector:"#tfa_resumePassword",check:"isPasswordConfirmed"}}var r=wFORMS.getBehaviorInstance(t,"paging");r&&(r.behavior.warnOnUnload=!1),n&&n.run(null,t)?(this.value=" ... ",t.submit()):n&&(n.behavior.rules=i)}}},base2.DOM.Element.addEventListener(document,"DOMContentLoaded",wFORMS.behaviors.validation.enableResumeLater,!1),wFORMS.behaviors.word_counter={ALLOWED_ELEMENT_TYPES:['input[type="text"][id^="tfa_"]','textarea[id^="tfa_"]'],CLASSNAME:"count-words",ATTRIBUTE:"data-maxwords",applyTo:function(e){var t=[],n=[];for(r=0;r<this.ALLOWED_ELEMENT_TYPES.length;r++)n.push(this.ALLOWED_ELEMENT_TYPES[r]+"."+this.CLASSNAME);for(var i=e.querySelectorAll(n.join(",")),r=0;r<i.length;r++){var a=i.item(r),o=new wFORMS.behaviors.word_counter.instance(a);t.push(o)}return t},instance:function(e){this.target=e,this.counter=null,this.wordCount=0,this.maxWords=parseInt(e.getAttribute(wFORMS.behaviors.word_counter.ATTRIBUTE)),this.addHandlers(e),this.addCounter(e)}},wFORMS.behaviors.word_counter.instance.prototype={addHandlers:function(e){var t=this;e.addEventListener||wFORMS.standardizeElement(e),e.addEventListener("keyup",function(){t.updateCounter(e)},!1),e.addEventListener("paste",function(){setTimeout(function(){t.updateCounter(e)},0)},!1),e.addEventListener("cut",function(){setTimeout(function(){t.updateCounter(e)},0)},!1),e.addEventListener("focus",function(){t.updateCounter(e)},!1),e.addEventListener("focus",function(){t.counter.style.visibility="visible"},!1),e.addEventListener("blur",function(){t.counter.style.visibility="hidden"},!1)},addCounter:function(e){var t=e.parentNode;this.counter=document.createElement("span"),this.counter.className=wFORMS.behaviors.word_counter.CLASSNAME,this.counter.message=wFORMS.behaviors.validation.messages.wordsRemPos,this.counter.style.marginLeft="10px",this.counter.style.visibility="hidden",e.count=0,t.insertBefore(this.counter,e.nextSibling),this.updateCounter(e)},getWordCount:function(){return this.wordCount},updateCounter:function(e){try{this.wordCount=this.target.value.match(/\S+/g).length}catch(e){this.wordCount=0}this.maxWords-this.wordCount>=0?(this.counter.message=wFORMS.behaviors.validation.messages.wordsRemPos,this.counter.className=this.counter.className.replace(/errMsg/,"")):this.counter.className.match(/errMsg/)||(this.counter.message=wFORMS.behaviors.validation.messages.wordsRemNeg,this.counter.className+=" errMsg"),this.counter.innerHTML=Math.abs(this.maxWords-this.wordCount)+this.counter.message,e.count=this.wordCount}},"undefined"==typeof wFORMS)throw new Error("wFORMS core not found. This behavior depends on the wFORMS core.");if(wFORMS.behaviors.calculation={skip:!1,VARIABLE_SELECTOR_PREFIX:"calc-",CHOICE_VALUE_SELECTOR_PREFIX:"calcval-",CALCULATION_SELECTOR:'*[class*="formula="]',CALCULATION_ERROR_MESSAGE:"There was an error computing this field.",instance:function(e){var t=this;this.behavior=wFORMS.behaviors.calculation,this.target=e,this.calculations=[],e.__wFormsCalculationInstanceInitializationHandled||(e.addEventListener||wFORMS.standardizeElement(e),e.addEventListener("submit",function(e){t.refreshAll()},!1),e.__wFormsCalculationInstanceInitializationHandled=!0)}},wFORMS.behaviors.calculation.applyTo=function(e){if(wFORMS.behaviors.calculation.skip)return null;for(;e&&"FORM"!=e.tagName;)e=e.parentNode;var t=wFORMS.getBehaviorInstance(e,"calculation");if(t?t.calculations=[]:t=new wFORMS.behaviors.calculation.instance(e),wFORMS.behaviors.repeat&&!t._repeatRemoveHandler){var n=wFORMS.behaviors.repeat.onRemove;t._repeatRemoveHandler=function(){wFORMS.behaviors.calculation.applyTo(e),n&&n.apply(this,arguments)},wFORMS.behaviors.repeat.onRemove=t._repeatRemoveHandler}return base2.DOM.Element.querySelectorAll(e,wFORMS.behaviors.calculation.CALCULATION_SELECTOR).forEach(function(n){var i=n.className.substr(n.className.indexOf("formula=")+8).split(" ")[0],r=i.split(/[^a-zA-Z]+/g);t.varFields=[];for(var a=0;a<r.length;a++)""!=r[a]&&base2.DOM.Document.querySelectorAll(e,'*[class*="'+wFORMS.behaviors.calculation.VARIABLE_SELECTOR_PREFIX+r[a]+'"]').forEach(function(e){if(e.addEventListener||base2.DOM.bind(e),-1!=(" "+e.className+" ").indexOf(" "+wFORMS.behaviors.calculation.VARIABLE_SELECTOR_PREFIX+r[a]+" ")){if(!wFORMS.behaviors.calculation.isHandled(e)){var n=e.tagName.toLowerCase();if("input"==n||"textarea"==n){var i=e.type.toLowerCase();"input"!=n||"radio"!=i&&"checkbox"!=i?(e.addEventListener("blur",function(e){return t.run(e,this)},!1),wFORMS.behaviors.calculation.setHandledFlag(e)):(e.addEventListener("click",function(e){return t.run(e,this)},!1),wFORMS.behaviors.calculation.setHandledFlag(e))}else{if("select"!=n)return;e.addEventListener("change",function(e){return t.run(e,this)},!1),wFORMS.behaviors.calculation.setHandledFlag(e)}}t.varFields.push({name:r[a],field:e})}});var o={field:n,formula:i,variables:t.varFields};t.calculations.push(o),t.compute(o)}),t.onApply(),t},wFORMS.behaviors.calculation.instance.prototype.onApply=function(){},wFORMS.behaviors.calculation.instance.prototype.run=function(e,t){for(var n=0;n<this.calculations.length;n++)for(var i=this.calculations[n],r=0;r<i.variables.length;r++)t==i.variables[r].field&&this.compute(i)},wFORMS.behaviors.calculation.instance.prototype.refresh=function(e,t){for(var n=0;n<this.calculations.length;n++){var i=this.calculations[n];t==i.field&&this.compute(i)}},wFORMS.behaviors.calculation.instance.prototype.refreshAll=function(){for(var e=0;e<this.calculations.length;e++){var t=this.calculations[e];this.compute(t)}},wFORMS.behaviors.calculation.instance.prototype.getCalculatedFields=function(e){for(var t=[],n=0;n<this.calculations.length;n++)for(var i=(this.calculations[n],0);i<this.calculations[n].variables.length;i++)(e.nodeName&&this.calculations[n].variables[i].field==e||"string"==typeof e&&this.calculations[n].variables[i].name==e)&&t.push(this.calculations[n].field);return t},wFORMS.behaviors.calculation.instance.prototype.compute=function(calculation){for(var f=this.target,formula=calculation.formula,_processedVariables=new Array,isNumericCalculation=!0,i=0;i<calculation.variables.length;i++){var v=calculation.variables[i],varval=isNumericCalculation?0:"",_self=this;if(!wFORMS.helpers.contains(_processedVariables,v.name))if(_processedVariables.push(v.name),base2.DOM.Document.querySelectorAll(f,'*[class*="'+_self.behavior.VARIABLE_SELECTOR_PREFIX+v.name+'"]').forEach(function(e){if(-1!=(" "+e.className+" ").indexOf(" "+wFORMS.behaviors.calculation.VARIABLE_SELECTOR_PREFIX+v.name+" ")&&_self.inScope(calculation.field,e)&&!e.disabled){if(_self.hasValueInClassName(e))var t=_self.getValueFromClassName(e);else t=wFORMS.helpers.getFieldValue(e);if("string"==typeof t||t||(t=0),t.constructor==Array)for(var n=0;n<t.length;n++)wFORMS.helpers.isNumericValue(t[n])||wFORMS.helpers.isEmptyValue(t[n])||(isNumericCalculation=!1),isNumericCalculation?varval+=wFORMS.helpers.getNumericValue(t[n]):varval=varval?String(varval).concat(t[n]):t[n];else wFORMS.helpers.isNumericValue(t)||wFORMS.helpers.isEmptyValue(t)||(isNumericCalculation=!1),isNumericCalculation?varval+=wFORMS.helpers.getNumericValue(t):varval=varval?String(varval).concat(t):String(t)}}),isNumericCalculation)formula="var "+v.name+" = "+varval+"; "+formula;else{var varvalAsString=varval.replace(/"/g,'\\"').replace(/\n/g,"\\n");formula="var "+v.name+' = "'+varvalAsString+'"; '+formula}}try{var calc=function(){return eval(formula)},result=calc();("Infinity"==result||"NaN"==result||String(result).match("NaN"))&&(result="error")}catch(e){result="error"}var validationBehavior=wFORMS.getBehaviorInstance(this.target,"validation");validationBehavior&&(wFORMS.behaviors.validation.messages.calculation||(wFORMS.behaviors.validation.messages.calculation=this.behavior.CALCULATION_ERROR_MESSAGE),validationBehavior.removeErrorMessage(calculation.field),"error"==result&&validationBehavior.fail(calculation.field,"calculation")),calculation.field.value=result,this.isVariable(calculation.field)&&this.run(null,calculation.field)},wFORMS.behaviors.calculation.instance.prototype.isVariable=function(e){return e.className&&-1!=e.className.indexOf(this.behavior.VARIABLE_SELECTOR_PREFIX)},wFORMS.behaviors.calculation.instance.prototype.hasValueInClassName=function(e){switch(e.tagName){case"SELECT":for(var t=0;t<e.options.length;t++)if(e.options[t].className&&-1!=e.options[t].className.indexOf(this.behavior.CHOICE_VALUE_SELECTOR_PREFIX))return!0;return!1;default:if(!e.className||-1==(" "+e.className).indexOf(" "+this.behavior.CHOICE_VALUE_SELECTOR_PREFIX))return!1}return!0},wFORMS.behaviors.calculation.instance.prototype.getValueFromClassName=function(e){switch(e.tagName){case"INPUT":if(!e.className||-1==e.className.indexOf(this.behavior.CHOICE_VALUE_SELECTOR_PREFIX))return null;var t=e.className.split(this.behavior.CHOICE_VALUE_SELECTOR_PREFIX)[1].split(" ")[0];return"checkbox"==e.type||"radio"==e.type?e.checked?t:wFORMS.helpers.isNumericValue(t)?0:"":t;case"SELECT":if(-1==e.selectedIndex)return null;for(var n=[],i=0;i<e.options.length;i++)if(e.options[i].selected&&e.options[i].className&&-1!=e.options[i].className.indexOf(this.behavior.CHOICE_VALUE_SELECTOR_PREFIX)){var t=e.options[i].className.split(this.behavior.CHOICE_VALUE_SELECTOR_PREFIX)[1].split(" ")[0];n.push(t)}return 0==n.length?null:n;case"TEXTAREA":if(!e.className||-1==e.className.indexOf(this.behavior.CHOICE_VALUE_SELECTOR_PREFIX))return null;var t=e.className.split(this.behavior.CHOICE_VALUE_SELECTOR_PREFIX)[1].split(" ")[0];return t;default:return null}return null},wFORMS.behaviors.calculation.isHandled=function(e){return!0===e._wforms_calc_handled},wFORMS.behaviors.calculation.setHandledFlag=function(e){e._wforms_calc_handled=!0},wFORMS.behaviors.calculation.removeHandledFlag=function(e){try{delete e._wforms_calc_handled}catch(t){e._wforms_calc_handled=void 0}},wFORMS.behaviors.calculation.instance.prototype.inScope=function(e,t){if(wFORMS.behaviors.repeat){for(var n=[],i=[],r=wFORMS.behaviors.repeat.getRepeatedElement(e);r;)n.push(r),r=wFORMS.behaviors.repeat.getRepeatedElement(r.parentNode);for(r=wFORMS.behaviors.repeat.getRepeatedElement(t);r;)i.push(r),r=wFORMS.behaviors.repeat.getRepeatedElement(r.parentNode);var a=function(e,t){for(var n=0;n<e.length;n++){for(var i=0;i<t.length&&e[n]!==t[i];i++);if(i==t.length)return!1}return!0};return a(n,i)||a(i,n)}return!0},"undefined"==typeof wFORMS)throw new Error("wFORMS core not found. This behavior depends on the wFORMS core.");if(wFORMS.behaviors.autoformat={ATTRIBUTE_SELECTOR:'input[autoformat][id^="tfa_"]',ALLOWED_ELEMENT_TYPE:['input[type="text"]'],NUMERIC_REGEX:new RegExp("[0-9]"),ALPHABETIC_REGEX:new RegExp("[A-Za-z]"),_globalCache:{},instance:function(e){this.actorsInDomain=[]},Caret:function(e){this.mask=e,this.isRtl=this.mask.isRtl;var t=this.isRtl?this.mask.format.length:0;this.caretPos={isRange:!1,position:t,start:t,end:t},this.prevCaretPos={isRange:!1,position:t,start:t,end:t}},Mask:function(e){var t=this;if(this.element=e,wFORMS.standardizeElement(this.element),this.parentForm=this.element.form,wFORMS.standardizeElement(this.parentForm),this.formatString=this.element.getAttribute("autoformat"),this.contents=this.formatString.split(""),this.format=this.contents.slice(),this.isRtl=this.getRtl(this.element),this.Vals=[],this.VAL_LENGTH=this.getValLength(),this.valIndex={start:0,end:0},this.handlers=this.getEventHandlers(),this.firstInputChar=function(){for(var e=0;e<t.format.length&&!t.isMaskChar(t.format[e]);e++);return e}(),this.lastInputChar=function(){for(var e=t.format.length-1;e>=0&&!t.isMaskChar(t.format[e]);e--);return e}(),this.caret=new wFORMS.behaviors.autoformat.Caret(this),""!==this.element.value)for(var n=this.element.value.split(""),i=0;i<n.length;i++)this.inputChar(n[i]);window.setTimeout(function(){t.addListeners()},1),this.isRtl&&(this.element.style.direction="ltr",this.element.style.textAlign="right")},applyTo:function(e){var t=base2.DOM.Element.querySelectorAll(e,wFORMS.behaviors.autoformat.ATTRIBUTE_SELECTOR),n=[];t.forEach(function(e){if(base2.DOM.Element.matchesSelector(e,wFORMS.behaviors.autoformat.ALLOWED_ELEMENT_TYPE[0])){var t=wFORMS.behaviors.autoformat._getIDForActorElement(e);n.push(t)}});var i=new wFORMS.behaviors.autoformat.instance(e);if(i.actorsInDomain=n,wFORMS.behaviors.autoformat.applyToVisibleElements(i),wFORMS.behaviors.paging&&wFORMS.getBehaviorInstance(e,"paging")){var r=wFORMS.getBehaviorInstance(e,"paging"),a=r.onPageChange,o=i;r.onPageChange=function(e){wFORMS.behaviors.autoformat.applyToVisibleElements(o),a.apply(r,arguments)}}return i},_getIDForActorElement:function(e){if(""===e.id)for(;;){var t=wFORMS.helpers.randomId();if(null===document.getElementById(t)){e.id=t;break}}return e.id}},wFORMS.behaviors.autoformat.instance.prototype.onApply=function(){},wFORMS.behaviors.autoformat.instance.prototype.run=function(){},wFORMS.behaviors.autoformat.applyToVisibleElements=function(e){for(var t=function(e,t){if(!wFORMS.behaviors.autoformat._globalCache[e]){var n=new wFORMS.behaviors.autoformat.Mask(t);wFORMS.behaviors.autoformat._globalCache[e]=n}},n=0;n<e.actorsInDomain.length;n++){var i=e.actorsInDomain[n],r=document.getElementById(i);wFORMS.behaviors.paging?wFORMS.behaviors.paging.isElementVisible(r)&&t(i,r):t(i,r)}},wFORMS.behaviors.autoformat.Mask.prototype.getRtl=function(){var e;return this.element&&(window.getComputedStyle?e=window.getComputedStyle(this.element).direction:this.element.currentStyle&&(e=this.element.currentStyle.direction)),"rtl"===e},wFORMS.behaviors.autoformat.Mask.prototype.getValLength=function(){var e,t=0;for(e=0;e<this.format.length;e++)this.isMaskChar(this.format[e])&&(t+=1);return t},wFORMS.behaviors.autoformat.Mask.prototype.isMaskChar=function(e){return"#"===e||"$"===e},wFORMS.behaviors.autoformat.Mask.prototype.getEventHandlers=function(){var e=null,t=this,n={BACKSPACE:8,TAB:9,RETURN:13,ESCAPE:27,LEFT_ARR:37,UP_ARR:38,RIGHT_ARR:39,DOWN_ARR:40,DELETE:46};return{keyDown:function(i){switch(e=i.which||i.keyCode){case n.RETURN:case n.LEFT_ARR:case n.UP_ARR:case n.RIGHT_ARR:case n.DOWN_ARR:case n.TAB:t.caret.preventOverflow(),e=null;break;case n.BACKSPACE:i.preventDefault(),t.backspace(),e=null;break;case n.DELETE:i.preventDefault(),t.forwardDel(),e=null}},keyPress:function(n){var i,r;if(null!==e){if(n.metaKey||n.ctrlKey||n.altKey)return void(e=null);r=n.which||n.keyCode,r&&(i=String.fromCharCode(r),t.inputChar(i)),n.preventDefault()}},keyUp:function(i){switch(i.which){case n.RETURN:case n.LEFT_ARR:case n.UP_ARR:case n.RIGHT_ARR:case n.DOWN_ARR:case n.TAB:t.caret.preventOverflow(),t.caret.savePosition()}e=null},cut:function(){window.setTimeout(function(){t.cut()},1)},paste:function(){window.setTimeout(function(){t.paste()},1)},click:function(){t.caret.preventOverflow()},submit:function(){t.submit()}}},wFORMS.behaviors.autoformat.Mask.prototype.addListeners=function(){var e=this;this.element.addEventListener("focus",function(){e.applyElementValueUncontrolledChanges(),e.updateValue(),e.caret.nudge(0)}),this.element.addEventListener("blur",function(){e.blur()}),this.element.addEventListener("keydown",this.handlers.keyDown),this.element.addEventListener("keypress",this.handlers.keyPress),this.element.addEventListener("keyup",this.handlers.keyUp),this.element.addEventListener("click",this.handlers.click),this.element.addEventListener("cut",this.handlers.cut),this.element.addEventListener("paste",this.handlers.paste),this.parentForm.addEventListener("submit",this.handlers.submit),this.element.blur()},wFORMS.behaviors.autoformat.Mask.prototype.removeListeners=function(){this.element.removeEventListener("keydown",this.handlers.keyDown),this.element.removeEventListener("keypress",this.handlers.keyPress),this.element.removeEventListener("keyup",this.handlers.keyUp),this.element.removeEventListener("click",this.handlers.click),this.element.removeEventListener("cut",this.handlers.cut),this.element.removeEventListener("paste",this.handlers.paste),this.parentForm.removeEventListener("submit",this.handlers.submit)},wFORMS.behaviors.autoformat.Mask.prototype.blur=function(){this.element.value=this.stripExtraInput()},wFORMS.behaviors.autoformat.Mask.prototype.applyElementValueUncontrolledChanges=function(){var e=this.Vals.join(""),t=this.element.value;return""==e&&""!=t&&(this.Vals=t.split(""),this.reformat(),!0)},wFORMS.behaviors.autoformat.Mask.prototype.updateValue=function(){var e=this;this.element.value=this.contents.join(""),window.setTimeout(function(){e.caret.update()},1)},wFORMS.behaviors.autoformat.Mask.prototype.inputChar=function(e){var t,n=this.caret.getPosition();if(this.isRtl)for(;!this.isMaskChar(this.format[n.start-1])&&n.start>0;)n=this.caret.nudge();else for(;!this.isMaskChar(this.format[n.start])&&n.start<this.format.length;)n=this.caret.nudge();t=this.isRtl?n.start-1:n.start,this.isCharAllowed(e,this.format[t])&&(this.caret.savePosition(),n.isRange?this.Vals.splice(this.valIndex.start,this.valIndex.end-this.valIndex.start,e):this.Vals.splice(this.valIndex.start,0,e),this.Vals.length=this.VAL_LENGTH,this.reformat(),this.caret.nudge())},wFORMS.behaviors.autoformat.Mask.prototype.backspace=function(){var e=this.caret.getPosition();this.caret.savePosition(),e.isRange?(this.Vals.splice(this.valIndex.start,this.valIndex.end-this.valIndex.start),this.caret.setPosition(this.isRtl?e.end:e.start)):(this.Vals.splice(this.valIndex.start-1,1),!this.isRtl&&e.position>this.firstInputChar?this.caret.nudge(-1):this.isRtl&&e.position<=this.lastInputChar&&this.caret.nudge(-1)),this.reformat()},wFORMS.behaviors.autoformat.Mask.prototype.forwardDel=function(){var e=this.caret.getPosition();this.caret.savePosition(),e.isRange?this.backspace():(this.Vals.splice(this.valIndex.start,1),this.caret.nudge(0),this.reformat())},wFORMS.behaviors.autoformat.Mask.prototype.cut=function(){var e=0,t=this.caret.getPosition();this.Vals.splice(this.valIndex.start,this.valIndex.end-this.valIndex.start),this.isRtl?(e=this.element.value.length-t.position,this.reformat(),this.caret.setPosition(this.format.length-e)):this.reformat()},wFORMS.behaviors.autoformat.Mask.prototype.paste=function(){var e,t,n,i,r,a=this.caret.previousPosition();for(n=a.isRange?a.end-a.start:0,t=this.element.value.length-this.contents.length+n,a.isRange&&this.Vals.splice(this.valIndex.start,this.valIndex.end-this.valIndex.start),this.caret.setPosition(a.start),i=this.element.value.substr(a.start,t).split(""),this.isRtl&&(r=this.caret.getPosition().position+n,this.caret.setPosition(r)),e=0;e<i.length;e++)this.inputChar(i[e])},wFORMS.behaviors.autoformat.Mask.prototype.submit=function(){this.applyElementValueUncontrolledChanges(),this.element.value=this.stripExtraInput()},wFORMS.behaviors.autoformat.Mask.prototype.isCharAllowed=function(e,t){return"#"===t?Boolean(e.match(wFORMS.behaviors.autoformat.NUMERIC_REGEX)):"$"===t&&Boolean(e.match(wFORMS.behaviors.autoformat.ALPHABETIC_REGEX)||e.match(wFORMS.behaviors.autoformat.NUMERIC_REGEX))},wFORMS.behaviors.autoformat.Mask.prototype.reformat=function(){var e,t,n=[],i=this.Vals.slice(),r=function(e){i?this.isMaskChar(this.format[e])&&(t=i.shift(),t&&this.isCharAllowed(t,this.format[e])?(this.contents[e]=t,n.push(t)):(i=null,this.contents[e]=this.format[e])):this.contents[e]=this.format[e]};if(this.isRtl)for(e=this.format.length-1;e>=0;e--)r.call(this,e);else for(e=0;e<this.format.length;e++)r.call(this,e);this.Vals=n.slice(),this.caret.savePosition(),this.updateValue()},wFORMS.behaviors.autoformat.Mask.prototype.stripExtraInput=function(){var e,t=0,n="",i=[];for(e=0;e<this.Vals.length;e++)this.Vals[e]&&i.push(this.Vals[e]);if(i.length===this.VAL_LENGTH)return n=this.contents.join("");if(this.isRtl)for(e=this.contents.length-1;e>=0&&t!==i.length;e--)n=this.contents[e]+n,this.isMaskChar(this.format[e])&&(t+=1);else for(e=0;e<this.contents.length&&t!==i.length;e++)n+=this.contents[e],this.isMaskChar(this.format[e])&&(t+=1);return n},wFORMS.behaviors.autoformat.Caret.prototype.getSelection=function(){var e,t,n,i,r=this.mask.element,a=0,o=0;return"number"==typeof r.selectionStart?(a=r.selectionStart,o=r.selectionEnd):(e=document.selection.createRange())&&e.parentElement()===r&&(n=r.value.length,t=r.createTextRange(),t.moveToBookmark(e.getBookmark()),i=r.createTextRange(),i.collapse(!1),t.compareEndPoints("StartToEnd",i)>-1?a=o=n:(a=-t.moveStart("character",-n),o=t.compareEndPoints("EndToEnd",i)>-1?n:-t.moveEnd("character",-n))),{start:a,end:o}},wFORMS.behaviors.autoformat.Caret.prototype.setSelection=function(e,t){var n=this.mask.element;if(n.setSelectionRange)n.setSelectionRange(e,t);else{var i=n.createTextRange();i.collapse(!0),e===t?i.move("character",e):(i.moveEnd("character",t),i.moveStart("character",e)),i.select()}},wFORMS.behaviors.autoformat.Caret.prototype.update=function(){return this.setSelection(this.caretPos.start,this.caretPos.start),this.savePosition(),this.caretPos},wFORMS.behaviors.autoformat.Caret.prototype.getPosition=function(){var e=this.getSelection(),t=e.start,n=e.end,i={isRange:null,position:null,start:t,end:n};return n-t==0?(i.isRange=!1,
i.position=t):i.isRange=!0,i},wFORMS.behaviors.autoformat.Caret.prototype.savePosition=function(){return this.prevCaretPos=this.cloneCaretPos(),this.caretPos=this.getPosition(),this._setValIndex(),this.caretPos},wFORMS.behaviors.autoformat.Caret.prototype.setPosition=function(e){return this.caretPos.isRange=!1,this.caretPos.start=this.caretPos.end=this.caretPos.position=e,this.update()},wFORMS.behaviors.autoformat.Caret.prototype.cloneCaretPos=function(){return{isRange:this.caretPos.isRange,position:this.caretPos.position,start:this.caretPos.start,end:this.caretPos.end}},wFORMS.behaviors.autoformat.Caret.prototype.nudge=function(e){if(e=void 0!==e?e:1,this.isRtl&&(e=-e),this.caretPos.isRange&&(this.isRtl?this.caretPos.position=this.caretPos.start=this.caretPos.end:this.caretPos.position=this.caretPos.end=this.caretPos.start),this.caretPos.position+=e,this.isRtl)for(;this.caretPos.position>=0&&this.caretPos.position<=this.mask.format.length&&!this.mask.isMaskChar(this.mask.format[this.caretPos.position-1]);)0===e?this.caretPos.position-=1:this.caretPos.position+=e>0?1:-1;else for(;this.caretPos.position>=0&&this.caretPos.position<=this.mask.format.length&&!this.mask.isMaskChar(this.mask.format[this.caretPos.position]);)this.caretPos.position+=0===e?1:e>0?1:-1;return this.caretPos.start=this.caretPos.end=this.caretPos.position,this.update()},wFORMS.behaviors.autoformat.Caret.prototype.preventOverflow=function(){var e,t;if(this.savePosition(),!this.caretPos.isRange){if(this.isRtl){for(t=this.mask.contents.length-1;t>=0;t--)if(this.mask.isMaskChar(this.mask.contents[t])){e=t;break}this.caretPos.position>this.mask.lastInputChar?this.caretPos.position=this.mask.lastInputChar+1:this.caretPos.position<=e&&(this.caretPos.position=e+1)}else{for(t=0;t<this.mask.contents.length;t++)if(this.mask.isMaskChar(this.mask.contents[t])){e=t;break}this.caretPos.position<this.mask.firstInputChar?this.caretPos.position=this.mask.firstInputChar:this.caretPos.position>e&&(this.caretPos.position=e)}return this.caretPos.start=this.caretPos.end=this.caretPos.position,this.update()}},wFORMS.behaviors.autoformat.Caret.prototype.previousPosition=function(){return this.prevCaretPos},wFORMS.behaviors.autoformat.Caret.prototype._setValIndex=function(){var e,t=0,n=0;if(this.mask.isRtl){for(e=this.mask.format.length;e>this.caretPos.end;e--)this.mask.isMaskChar(this.mask.format[e-1])&&(t+=1);for(n=t,e=this.caretPos.end;e>this.caretPos.start;e--)this.mask.isMaskChar(this.mask.format[e-1])&&(n+=1)}else{for(e=0;e<this.caretPos.start;e++)this.mask.isMaskChar(this.mask.format[e])&&(t+=1);for(n=t,e=this.caretPos.start;e<this.caretPos.end;e++)this.mask.isMaskChar(this.mask.format[e])&&(n+=1)}this.mask.valIndex={start:t,end:n}},"undefined"==typeof wFORMS)throw new Error("wFORMS core not found. This behavior depends on the wFORMS core.");if(wFORMS.behaviors.lengthPrompt={ATTRIBUTE_SELECTOR:"maxLength",ALLOWED_ELEMENT_TYPE:['input[type="text"][id^="tfa_"]','input[type="color"][id^="tfa_"]','input[type="date"][id^="tfa_"]','input[type="datetime"][id^="tfa_"]','input[type="datetime-local"][id^="tfa_"]','input[type="email"][id^="tfa_"]','input[type="month"][id^="tfa_"]','input[type="number"][id^="tfa_"]','input[type="range"][id^="tfa_"]','input[type="search"][id^="tfa_"]','input[type="tel"][id^="tfa_"]','input[type="time"][id^="tfa_"]','input[type="url"][id^="tfa_"]','input[type="week"][id^="tfa_"]','textarea[id^="tfa_"]'],MONITOR_CHECK_TIMES:10,CUSTOM_INDICATOR_STYLE:"lengthIndicator",keyCode:{LEFT:37,RIGHT:39,END:35,HOME:36,DELETE:46,BACKSPACE:8},instance:function(){return function(e){this.element=e,this.ui_indicator=null,this.maxLength=-1,this.previousLength=-1,this._pasteMonitorHandler=null,this.inputCache=null}}(),_globalCache:{},applyTo:function(e){base2.DOM.Element.querySelectorAll(e,wFORMS.behaviors.lengthPrompt._getActorsSelector()).forEach(function(e){var t=e.getAttribute(wFORMS.behaviors.lengthPrompt.ATTRIBUTE_SELECTOR);if(null!==t&&void 0!==t){var n=new wFORMS.behaviors.lengthPrompt.instance(e);n.maxLength=parseInt(t);var i=wFORMS.behaviors.lengthPrompt._getIDForActorElement(e);wFORMS.standardizeElement(e),n.deployUI(),n.bindEvents(),wFORMS.behaviors.lengthPrompt._globalCache[i]=n}})},eventHandlers:{focus:function(e){var t=wFORMS.behaviors.lengthPrompt._globalCache[this.id];t&&t.showIndicator()},blur:function(e){var t=wFORMS.behaviors.lengthPrompt._globalCache[this.id];t&&t.hideIndicator()},keyup:function(e){var t=wFORMS.behaviors.lengthPrompt._globalCache[this.id];t&&t.checkUpdate()},paste:function(e){var t=wFORMS.behaviors.lengthPrompt._globalCache[this.id];if(t){var n=wFORMS.behaviors.lengthPrompt.getSelection(t.element);t.inputCache=this.value,t._pasteMonitorHandler=window.setInterval(function(){var e=0;return function(){var i=t.checkCacheTempered(n);!1!==i&&(window.clearInterval(t._pasteMonitorHandler),t.handlePaste(i,n)),++e>=wFORMS.behaviors.lengthPrompt.MONITOR_CHECK_TIMES&&window.clearInterval(t._pasteMonitorHandler)}}(),10)}},textarea_input:function(e){var t=wFORMS.behaviors.lengthPrompt._globalCache[this.id];t&&t.restrictInput(e)}},messages:"%1 characters left.",_getActorsSelector:function(){if(!wFORMS.behaviors.lengthPrompt.ACTORS_SELECTOR){for(var e="",t=0;t<wFORMS.behaviors.lengthPrompt.ALLOWED_ELEMENT_TYPE.length;t++)e+=wFORMS.behaviors.lengthPrompt.ALLOWED_ELEMENT_TYPE[t]+"["+wFORMS.behaviors.lengthPrompt.ATTRIBUTE_SELECTOR+"], ";wFORMS.behaviors.lengthPrompt.ACTORS_SELECTOR=e.slice(0,-2)}return wFORMS.behaviors.lengthPrompt.ACTORS_SELECTOR},_getIDForActorElement:function(e){if(""===e.id)for(;;){var t=wFORMS.helpers.randomId();if(null==document.getElementById(t)){e.id=t;break}}return e.id},getSelection:function(e){var t,n=-1;if(e.selectionStart>=0)n=e.selectionStart,t=e.selectionEnd-e.selectionStart;else if(document.selection){var i,r,a;e.tagName&&"TEXTAREA"===e.tagName?(i=document.selection.createRange().duplicate(),r=e.createTextRange(),r.collapse(!1),r.moveToBookmark(i.getBookmark()),""===i.text&&(a=r.duplicate(),a.moveEnd("character",1),i.boundingWidth===a.boundingWidth&&i.boundingHeight===a.boundingHeight&&(r=a))):r=document.selection.createRange().duplicate(),t=r.text.length,n=Math.abs(r.moveStart("character",-1e6))}else document.getSelection&&(n=0,t=document.getSelection().length);return{caret:n,length:t}},setCaretPosition:function(e,t){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()}}},function(e){for(var t in e)wFORMS.behaviors.lengthPrompt.instance.prototype[t]=e[t]}({deployUI:function(){var e=this.element.parentNode;base2.DOM.Element.matchesSelector(this.element.parentNode,wFORMS.INPUT_CONTROL_WRAPPER_SELECTOR)||(e=this.mirrorWrapperDiv());var t=document.createElement("div");e.appendChild(t),t.style.position="absolute",t.style.top="0px",t.style.display="none",t.style.width="100%",t.className=wFORMS.behaviors.lengthPrompt.CUSTOM_INDICATOR_STYLE,this.ui_indicator=t,this.adjustIndicatorPosition(),this.checkUpdate()},adjustIndicatorPosition:function(){for(var e=function(e){return function(t){return parseFloat(base2.DOM.AbstractView.getComputedStyle(window,e,"").getPropertyValue(t).replace(/px$/,""))||0}}(this.element),t=this.element.offsetWidth||e("width"),n=["margin-left","margin-right","border-left-width","border-right-width","padding-left","padding-right"],i=0,r=n.length;i<r;i++)t+=e(n[i])||0;this.ui_indicator.style.left=t+"px"},mirrorWrapperDiv:function(){var e=document.createElement("div");return this.element.parentNode.insertBefore(e,this.element),e.style.position="relative",e.style.display=base2.DOM.AbstractView.getComputedStyle(window,this.element,"").getPropertyValue("display"),e.appendChild(this.element),e},bindEvents:function(){for(var e=0,t=["focus","blur"];e<t.length;e++){var n=t[e];this.element.addEventListener(n,wFORMS.behaviors.lengthPrompt.eventHandlers[n],!0)}"TEXTAREA"==this.element.tagName.toUpperCase()&&(this.element.addEventListener("paste",wFORMS.behaviors.lengthPrompt.eventHandlers.paste,!0),this.element.addEventListener("keydown",wFORMS.behaviors.lengthPrompt.eventHandlers.textarea_input,!0))},bindMonitorEvent:function(){for(var e=0,t=["keyup"];e<t.length;e++){var n=t[e];this.element.addEventListener(n,wFORMS.behaviors.lengthPrompt.eventHandlers[n],!0)}},releaseMonitorEvent:function(){for(var e=0,t=["keyup"];e<t.length;e++){var n=t[e];base2.DOM.Element.removeEventListener(this.element,n,wFORMS.behaviors.lengthPrompt.eventHandlers[n],!0)}},checkCacheTempered:function(e){var t=this.element.value;if(t==this.inputCache)return!1;var n=t.length-this.inputCache.length+e.length,i=wFORMS.behaviors.lengthPrompt.getSelection(this.element).caret,r=i-n;return{diff:t.substr(r,n),start:r,length:n}},handlePaste:function(e,t){var n=this.inputCache.length-t.length+e.length-this.maxLength,i=e.diff;n>0&&(i=i.substr(0,i.length-n)),this.element.value=this.inputCache.substr(0,t.caret)+i+this.inputCache.substr(t.caret+t.length,this.inputCache.length),wFORMS.behaviors.lengthPrompt.setCaretPosition(this.element,t.caret+i.length),this.checkUpdate()},restrictInput:function(e){this.element.value.replace(/(\r\n|\n|\r)/g,"--").length!=this.maxLength||this.testSpecialKey(e)||0!=wFORMS.behaviors.lengthPrompt.getSelection(this.element).length||e.preventDefault()},testSpecialKey:function(e){var t=e.which||e.keyCode;return e.ctrlKey&&(65==t||88==t||67==t||86==t)||t==wFORMS.behaviors.lengthPrompt.keyCode.END||t==wFORMS.behaviors.lengthPrompt.keyCode.HOME||t==wFORMS.behaviors.lengthPrompt.keyCode.LEFT||t==wFORMS.behaviors.lengthPrompt.keyCode.RIGHT||t==wFORMS.behaviors.lengthPrompt.keyCode.DELETE||t==wFORMS.behaviors.lengthPrompt.keyCode.BACKSPACE},showIndicator:function(){this.adjustIndicatorPosition(),this.ui_indicator.style.display="block",this.bindMonitorEvent()},hideIndicator:function(){this.ui_indicator.style.display="none",this.releaseMonitorEvent()},updateIndicator:function(){var e=this.element.value.replace(/(\r\n|\n|\r)/g,"--").length,t=this.maxLength-e;this.ui_indicator.innerHTML=wFORMS.behaviors.lengthPrompt.messages.replace(/%1/g,t)},checkUpdate:function(){var e=this.element.value.replace(/(\r\n|\n|\r)/g,"--").length;e!=this.previousLength&&(this.updateIndicator(),this.previousLength=e)}}),"undefined"==typeof wFORMS)throw new Error("wFORMS core not found. This behavior depends on the wFORMS core.");if(wFORMS.behaviors.dependent_list={skip:!1,instance:function(e){this.behavior=wFORMS.behaviors.dependent_list,this.target=e}},wFORMS.behaviors.dependent_list.applyTo=function(e){if(wFORMS.behaviors.dependent_list.skip)return null;var t=new wFORMS.behaviors.dependent_list.instance(e);e.querySelectorAll||base2.DOM.bind(e);var n=e.querySelectorAll("option[data-filter-dependent], select[data-filter-dependent], input[data-filter-dependent]");return n.forEach(function(e){e.addEventListener||base2.DOM.bind(e),e.addEventListener("change",function(e){t.run(e,this)},!1),t.run(null,e)}),n.length>0&&wFORMS.behaviors.repeat&&(wFORMS.behaviors.repeat.observeRepeatComplete(function(e,n,i){t.onRepeatableDuplicated(e,n,i)}),wFORMS.behaviors.repeat.observeRemoveComplete(function(e){t.onRepeatableRemoved(e)})),t.onApply(),t},wFORMS.behaviors.dependent_list.instance.prototype.onApply=function(){},wFORMS.behaviors.dependent_list.instance.prototype.run=function(e,t){var n=this,i=wFORMS.helpers.getForm(this.target),r=t.getAttribute("data-filter-dependent");i.querySelectorAll(r).forEach(function(e){n.applyFiltersTo(e)})},wFORMS.behaviors.dependent_list.instance.prototype.applyFiltersTo=function(e){var t=this,n=wFORMS.helpers.getForm(this.target),i=e.getAttribute("data-filter-control");n.querySelectorAll(i).forEach(function(n){t.filter(n,e)})},wFORMS.behaviors.dependent_list.instance.prototype.filter=function(e,t){var n=this;this._dirtyCalculations={};var i=function(e,i){var r=(e.checked||e.selected)&&!e.disabled,a=e.getAttribute("data-filter-include"),o=e.getAttribute("data-filter-exclude");if(!a&&!o){a="optgroup[label='"+n.getChoiceLabel(e).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"']"}a&&(r?"selected"==i&&n.include(t,a):"deselected"==i&&n.exclude(t,a)),o&&(r?"selected"==i&&n.exclude(t,o):"deselected"==i&&n.include(t,o))};if("INPUT"==e.tagName)i(e,"deselected"),i(e,"selected");else{var r=e.querySelectorAll("input[type=checkbox],input[type=radio],option");r.forEach(function(e){i(e,"deselected")}),r.forEach(function(e){i(e,"selected")})}var a=wFORMS.getBehaviorInstance(wFORMS.helpers.getForm(this.target),"calculation");for(var o in this._dirtyCalculations)a.run(null,this._dirtyCalculations[o]);this._dirtyCalculations={},t.getAttribute("data-filter-dependent")&&this.run(null,t)},wFORMS.behaviors.dependent_list.instance.prototype.include=function(e,t){e.querySelectorAll(t).forEach(function(e){if(e.disabled=!1,e.style.display="",("OPTGROUP"==e.tagName||"OPTION"==e.tagName)&&"SPAN"==e.parentNode.tagName){var t=e.parentNode;t.parentNode.insertBefore(e,t),t.parentNode.removeChild(t)}fields=e.querySelectorAll("input,select,textarea,option"),fields.forEach(function(e){e.disabled=!1})})},wFORMS.behaviors.dependent_list.instance.prototype.exclude=function(e,t){var n=e.querySelectorAll(t),i=wFORMS.getBehaviorInstance(wFORMS.helpers.getForm(this.target),"calculation"),r=this;n.forEach(function(e){if(e.disabled="disabled",e.style.display="none",e.selected&&(e.selected=!1),e.checked&&(e.checked=!1),"OPTGROUP"==e.tagName||"OPTION"==e.tagName){"SPAN"!=e.parentNode.tagName&&e.parentNode.insertBefore(document.createElement("span"),e).appendChild(e);for(var t=e.parentNode;t&&"SELECT"!=t.tagName;)t=t.parentNode;t&&i&&i.isVariable(t)&&(r._dirtyCalculations[t.id]=t)}else i&&i.isVariable(e)&&(r._dirtyCalculations[t.id]=t);fields=e.querySelectorAll("input,select,textarea,option"),fields.forEach(function(e){e.disabled="disabled",e.selected=!1,i&&i.isVariable(e)&&(r._dirtyCalculations[e.id]=e)})})},wFORMS.behaviors.dependent_list.instance.prototype.getChoiceLabel=function(e){return"OPTION"!=e.tagName&&(e=this.target.querySelector("label[for='"+e.getAttribute("id")+"']")),e.textContent||e.innerText},wFORMS.behaviors.dependent_list.instance.prototype.updateReference=function(e,t,n,i,r){var a=e.getAttribute(t),o=a?a.split(","):[];if(o.length>0){if(r)for(var s=0;s<o.length;s++){var l=this.unescapeId(o[s]);if(l==n){o[s]=this.escapeId(i);break}}else o.push(this.escapeId(i));e.setAttribute(t,o.join(","))}return e},wFORMS.behaviors.dependent_list.instance.prototype.updateSelectors=function(e,t){for(var e=e?e.split(","):[],n=0;n<e.length;n++){var i=this.unescapeId(e[n]);t[i]&&(e[n]=this.escapeId(t[i]))}return e.join(",")},wFORMS.behaviors.dependent_list.instance.prototype.unescapeId=function(e){return e?e.replace(/^#/,"").replace(/\\\[/g,"[").replace(/\\\]/g,"]"):null},wFORMS.behaviors.dependent_list.instance.prototype.escapeId=function(e){return e?"#"+e.replace(/\[/g,"\\[").replace(/\]/g,"\\]"):null},wFORMS.behaviors.dependent_list.instance.prototype.isInSameScope=function(e,t){return wFORMS.behaviors.repeat.getRepeatedElement(e)===wFORMS.behaviors.repeat.getRepeatedElement(t)},wFORMS.behaviors.dependent_list.instance.prototype.onRepeatableDuplicated=function(e,t,n){var i=wFORMS.helpers.getForm(e),r=this,a=function(e,t){for(var n in t)if(t[n]==e)return n;return e},o=e.querySelectorAll("option[data-filter-dependent], select[data-filter-dependent], input[data-filter-dependent], option[data-filter-control], select[data-filter-control], input[data-filter-control]");if(o.length>0){o.forEach(function(e){var t=e.id,o=a(t,n.master);if(t!=o){var s=r.updateSelectors(e.getAttribute("data-filter-dependent"),n.master);if(s){i.querySelectorAll(s).forEach(function(e){r.updateReference(e,"data-filter-control",o,t,!0)})}var s=r.updateSelectors(e.getAttribute("data-filter-control"),n.master);if(s){i.querySelectorAll(s).forEach(function(e){r.updateReference(e,"data-filter-dependent",o,t,!0)})}}});var o=t.querySelectorAll("option[data-filter-dependent], select[data-filter-dependent], input[data-filter-dependent], option[data-filter-control], select[data-filter-control], input[data-filter-control]"),s={};for(var l in n.repeat){var c=a(l,n.master);s[c]=n.repeat[l]}o.forEach(function(e){var t=e.id,o=a(t,n.repeat);o=a(o,n.master);var l=r.updateSelectors(e.getAttribute("data-filter-dependent"),s);if(l){i.querySelectorAll(l).forEach(function(n){var i=r.isInSameScope(e,n);r.updateReference(n,"data-filter-control",o,t,i)})}var l=r.updateSelectors(e.getAttribute("data-filter-control"),n.repeat);if(l){i.querySelectorAll(l).forEach(function(n){var i=r.isInSameScope(e,n);r.updateReference(n,"data-filter-dependent",o,t,i)})}})}},wFORMS.behaviors.dependent_list.instance.prototype.onRepeatableRemoved=function(e){},"undefined"==typeof wFORMS)throw new Error("wFORMS core not found. This behavior depends on the wFORMS core.");if(wFORMS.behaviors.prefill={instance:function(e){this.behavior=wFORMS.behaviors.prefill,this.target=e},skip:!1},wFORMS.behaviors.prefill.applyTo=function(e){if(!wFORMS.behaviors.prefill.skip){var t=new wFORMS.behaviors.prefill.instance(e),n=wFORMS.getBehaviorInstance(e,"switch"),i=wFORMS.getBehaviorInstance(e,"calculation"),r=t.getParameters();for(var a in r)try{var o=e.elements[a];if(o)t.populateField(o,r[a],n,i);else for(var s=document.getElementById(a),l=s.getElementsByTagName("input"),c=0;c<l.length;c++)"checkbox"==l[c].getAttribute("type")&&t.populateField(l[c],r[a],n,i)}catch(e){}return t.onApply(),t}},wFORMS.behaviors.prefill.instance.prototype.onApply=function(){},wFORMS.behaviors.prefill.instance.prototype.populateField=function(e,t,n,i){if(e)if(e.tagName){if("INPUT"==e.tagName&&("text"==e.type||"hidden"==e.type||"password"==e.type)||e.tagName,e.value=t,"INPUT"==e.tagName&&"checkbox"==e.type)if("1"==t||this.getLabel(e)==t||e.id==t)e.checked=!0;else for(var r=t.split(";"),a=0;a<r.length;a++){var o=r[a].replace(/^\s\s*/,"").replace(/\s\s*$/,"");"1"!=o&&this.getLabel(e)!=o&&e.id!=o||(e.checked=!0)}if("SELECT"==e.tagName&&!e.multiple)for(var s=0;s<e.options.length;s++)e.options[s].value!=t&&e.options[s].text!=t||(e.options[s].selected=!0);if("SELECT"==e.tagName&&e.multiple)for(var r=t.split(";"),s=0;s<e.options.length;s++)if(e.options[s].value==t||e.options[s].text==t)e.options[s].selected=!0;else for(var a=0;a<r.length;a++){var o=r[a].replace(/^\s\s*/,"").replace(/\s\s*$/,"");e.options[s].value!=o&&e.options[s].text!=o||(e.options[s].selected=!0)}n&&n.run(null,e),i&&i.run(null,e)}else for(a=0;a<e.length;a++)if(e[a].value==t||this.getLabel(e[a])==t){e[a].checked=!0,n&&n.run(null,e[a]),i&&i.run(null,e[a]);break}},wFORMS.behaviors.prefill.instance.prototype.getLabel=function(e){if(!e||!e.form)return null;if(!e.form.querySelectorAll)return null;var t=e.getAttribute("id");return l=e.form.querySelectorAll("label[for="+t+"]"),l&&l.length>=1?l.item(0).innerHTML:null},wFORMS.behaviors.prefill.instance.prototype.getParameters=function(){var e=Array();if(1==arguments.length)var t=arguments[0];else var t=document.location.search;if(0!=t.length){if(t.split("?")[1])var n=t.split("?")[1].split("&");else var n=t.split("&");for(var i=0;i<n.length;i++)e[n[i].split("=")[0]]=decodeURIComponent(n[i].split("=")[1].replace(/\+/g," "));return e}},"undefined"==typeof wFORMS)throw new Error("wFORMS core not found. This behavior depends on the wFORMS core.");wFORMS.behaviors.responsive={skip:!1,instance:function(e){this.behavior=wFORMS.behaviors.responsive,this.target=e;this.run()}},wFORMS.behaviors.responsive.applyTo=function(e){return wFORMS.behaviors.responsive.skip?null:new wFORMS.behaviors.responsive.instance(e)},wFORMS.behaviors.responsive.instance.prototype.run=function(){this.handleAllMatrixLayouts(),this.handleAllGridLayouts()},wFORMS.behaviors.responsive.instance.prototype.handleAllMatrixLayouts=function(){for(var e=this.target.clientWidth,t=this.target.querySelectorAll("table.matrixLayout"),n=!1,i=0;i<t.length;i++)n=this.handleMatrixLayout(t.item(i),e)||n;return n},wFORMS.behaviors.responsive.instance.prototype.handleMatrixLayout=function(e,t){var n=!1;if(e.clientWidth>t){e.className=e.className+" stacked";for(var i=e.querySelectorAll("input"),r=0;r<i.length;r++){var a=this.createLabel(i.item(r).getAttribute("title"),i.item(r).id,"postField");i.item(r).parentNode.insertBefore(a,i.item(r).nextSibling),n=!0}}return n},wFORMS.behaviors.responsive.instance.prototype.handleAllGridLayouts=function(){for(var e=this.target.clientWidth,t=this.target.querySelectorAll("table.gridLayout"),n=!1,i=0;i<t.length;i++)n=this.handleGridLayout(t.item(i),e)||n;return n},wFORMS.behaviors.responsive.instance.prototype.handleGridLayout=function(e,t){var n=!1;if(e.clientWidth>t){e.className=e.className+" stacked";for(var i=e.querySelectorAll("input[type=text],input[type=password],input[type=file],textarea,select"),r=0;r<i.length;r++){var a=this.createLabel(i.item(r).getAttribute("title"),i.item(r).id,"preField");i.item(r).parentNode.insertBefore(a,i.item(r)),n=!0}}return n},wFORMS.behaviors.responsive.instance.prototype.createLabel=function(e,t,n){var i=document.createElement("label");return i.innerHTML=e,i.setAttribute("for",t),i.className=n,i},wFORMS.behaviors.autosuggest={MESSAGES:{NO_RESULTS:"No results found"}};
//# sourceMappingURL=fa.js.map
